
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="/libs/js/jquery-1.9.1.min.js"></script>
<script>
jQuery.fn.wordBreakKeepAll=function(option){var is_there_end_angle_bracket=function(str){return str.lastIndexOf('<')<str.lastIndexOf('>');};var is_there_start_angle_bracket=function(str){return str.lastIndexOf('>')<str.lastIndexOf('<');};var is_there_no_angle_bracket=function(str){return str.lastIndexOf('>')==str.lastIndexOf('<');};var defaultOption={OffForIE:false,useCSSonIE:true};var opt=$.extend(defaultOption,option);if(/MSIE/.test(navigator.userAgent)&&opt.OffForIE==false&&opt.useCSSonIE==true){var addWordBreakKeepAll=function(obj){$(obj).css({'word-break':'keep-all','word-wrap':'break-word'});if($(obj).css('display')=='inline'){$(obj).css('display','block');}};}else if(!/MSIE/.test(navigator.userAgent)||/MSIE/.test(navigator.userAgent)&&opt.OffForIE==false&&opt.useCSSonIE==false){var addWordBreakKeepAll=function(obj){var html=$(obj).html();html=html.replace(/(\r\n|\n|\r)/gm,' ＃＆＊＠§ ');var textArr=html.split(' ');textArr=textArr.filter(function(e){return e;});$(obj).text('');var skip=false;var full_str='';for(var i=0,j=textArr.length;i<j;i++){var str=textArr[i];if(skip==false&&is_there_no_angle_bracket(str)&&str.indexOf('＃＆＊＠§')==-1){full_str+='<span style="white-space: nowrap">'+str+'</span> ';}else{full_str+=str+' ';}
if(is_there_start_angle_bracket(str)){skip=true;}
if(is_there_end_angle_bracket(str)){skip=false;}};$(obj).html(full_str.replace(/＃＆＊＠§/g,"\n"));};}
return this.each(function(){addWordBreakKeepAll(this);});};
</script>
<title>TarotSecret</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta property="og:type" content="website" />
<meta property="og:locale:alternate" content="en_US" />
<meta property="og:locale" content="ko_KR" />
<meta property="og:site_name" content="" />
<meta property="og:image" content="" />
<meta property="og:url" content="" />
<meta property="og:title" content="" />
<meta property="og:description" content="">
<meta name="apple-mobile-web-app-title" content="" />
<link rel="shortcut icon" type="image/x-icon" href="" />
<link rel="image_src" href="" />
<meta name="description" content="" />
<meta name="keywords" content="" />

<link rel="apple-touch-icon" sizes="57x57" href="/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
<link rel="manifest" href="/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">

<style>
	body{font-family:"Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;}
	table {border-spacing:0;border-collapse:collapse;}
	td {padding:0}
	a { text-decoration:none}
	div {-webkit-overflow-scrolling: touch;-webkit-appearance: none;-webkit-backface-visibility:hidden;-webkit-transform:translate3d(0,0,0);-webkit-transform:translate3d(0,0,0)}
	img {-webkit-appearance: none;-webkit-backface-visibility:hidden;-webkit-transform:translate3d(0,0,0);-webkit-transform:translate3d(0,0,0)}
	.backgroundColor { background:#77578b }
	.backgroundColor2 { background:#442D5D }
	.backgroundColor3 { background:#b2729b }
	.backgroundColor4 { background:#7c3c7b }
	.backgroundColor5 { background:#504F54 }
	.backgroundColor6 { background:#D6B8CB }
	.buttonShadow { -webkit-box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.70); -moz-box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.70); box-shadow: 2px 2px 2px 0px rgba(0, 0, 0, 0.70); }
	.buttonShadow2 { -webkit-box-shadow: 0px 0px 11px 2px rgba(255, 255, 255, 1); -moz-box-shadow: 0px 0px 11px 2px rgba(255, 255, 255, 1); box-shadow: 0px 0px 11px 2px rgba(255, 255, 255, 1); }
	.shadow {-webkit-box-shadow: 3px 3px 3px 0px rgba(0, 0, 0, 0.30); -moz-box-shadow: 3px 3px 3px 0px rgba(0, 0, 0, 0.30); box-shadow: 3px 3px 3px 0px rgba(0, 0, 0, 0.30);}
	.center {margin-left: auto; margin-right: auto; }
	.buttonTypeLarge { width: 240px; height: 45px; line-height: 45px; font-size: 16px; font-weight: 500; cursor: pointer; text-align: center;}
	.rounded10px { -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px;}
	.rounded8px { -webkit-border-radius: 8px; -moz-border-radius: 8px; border-radius: 8px;}
	.rounded5px { -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius: 5px;}
	.rounded2px { -webkit-border-radius: 2px;-moz-border-radius: 2px; border-radius: 2px;}
	.newsfeedProfileImg {background-color:#fff;width:26px;height:26px;border-radius:13px;-webkit-border-radius:13px;-moz-border-radius:13px;}
	.newsfeedBtn {font-size:9px;display:inline-block;color:#fff;background:rgba(200,200,200,1);padding:3px;margin:0 0 0 5px}
	.forumProfileImg {background-color:#fff;width:40px;height:40px;border-radius:20px;-webkit-border-radius:20px;-moz-border-radius:20px;}
	.pointer { cursor: pointer }
	.underline { text-decoration:underline }
	.centerText { text-align:center }
	.backgroundCover { background-size:cover }
	.backgroundContain { background-size:contain }
	.largeTextBold { font-size:20px;font-weight:500 }
	.largeText { font-size:20px;font-weight:300 }
	.largeTextThin { font-size:20px;font-weight:100 }
	.normalLargeTextBold { font-size:18px;font-weight:500 }
	.normalLargeText { font-size:18px;font-weight:300 }
	.normalLargeTextThin { font-size:18px;font-weight:100 }
	.normalTextBold { font-size:14px;font-weight:500 }
	.normalText { font-size:14px;font-weight:300 }
	.normalTextThin { font-size:14px;font-weight:100 }
	.smallNormalTextBold { font-size:13px;font-weight:500 }
	.smallNormalText { font-size:13px;font-weight:300 }
	.smallNormalTextThin { font-size:13px;font-weight:100 }
	.smallTextBold { font-size:12px;font-weight:500 }
	.smallText { font-size:12px;font-weight:300 }
	.smallTextThin { font-size:12px;font-weight:100 }
		
	
	.profileBackgroundColor1 {
		background: rgba(203,96,179,1);
		background: -moz-linear-gradient(-45deg, rgba(203,96,179,1) 0%, rgba(219,54,164,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(203,96,179,1)), color-stop(100%, rgba(219,54,164,1)));
		background: -webkit-linear-gradient(-45deg, rgba(203,96,179,1) 0%, rgba(219,54,164,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(203,96,179,1) 0%, rgba(219,54,164,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(203,96,179,1) 0%, rgba(219,54,164,1) 100%);
		background: linear-gradient(135deg, rgba(203,96,179,1) 0%, rgba(219,54,164,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#cb60b3', endColorstr='#db36a4', GradientType=1 )";
	}
	.profileBackgroundColor2 {
		background: rgba(255,175,75,1);
		background: -moz-linear-gradient(-45deg, rgba(255,175,75,1) 0%, rgba(255,146,10,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(255,175,75,1)), color-stop(100%, rgba(255,146,10,1)));
		background: -webkit-linear-gradient(-45deg, rgba(255,175,75,1) 0%, rgba(255,146,10,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(255,175,75,1) 0%, rgba(255,146,10,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(255,175,75,1) 0%, rgba(255,146,10,1) 100%);
		background: linear-gradient(135deg, rgba(255,175,75,1) 0%, rgba(255,146,10,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffaf4b', endColorstr='#ff920a', GradientType=1 )";
	}
	.profileBackgroundColor3 {
		background: rgba(210,255,82,1);
		background: -moz-linear-gradient(-45deg, rgba(210,255,82,1) 0%, rgba(145,232,66,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(210,255,82,1)), color-stop(100%, rgba(145,232,66,1)));
		background: -webkit-linear-gradient(-45deg, rgba(210,255,82,1) 0%, rgba(145,232,66,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(210,255,82,1) 0%, rgba(145,232,66,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(210,255,82,1) 0%, rgba(145,232,66,1) 100%);
		background: linear-gradient(135deg, rgba(210,255,82,1) 0%, rgba(145,232,66,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#d2ff52', endColorstr='#91e842', GradientType=1 )";
	}
	.profileBackgroundColor4 {
		background: rgba(212,228,239,1);
		background: -moz-linear-gradient(-45deg, rgba(212,228,239,1) 0%, rgba(134,174,204,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(212,228,239,1)), color-stop(100%, rgba(134,174,204,1)));
		background: -webkit-linear-gradient(-45deg, rgba(212,228,239,1) 0%, rgba(134,174,204,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(212,228,239,1) 0%, rgba(134,174,204,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(212,228,239,1) 0%, rgba(134,174,204,1) 100%);
		background: linear-gradient(135deg, rgba(212,228,239,1) 0%, rgba(134,174,204,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#d4e4ef', endColorstr='#86aecc', GradientType=1 )";
	}
	.profileBackgroundColor5 {
		background: rgba(164,179,87,1);
		background: -moz-linear-gradient(-45deg, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(164,179,87,1)), color-stop(100%, rgba(117,137,12,1)));
		background: -webkit-linear-gradient(-45deg, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%);
		background: linear-gradient(135deg, rgba(164,179,87,1) 0%, rgba(117,137,12,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#a4b357', endColorstr='#75890c', GradientType=1 )";
	}
	.profileBackgroundColor6 {
		background: rgba(98,125,77,1);
		background: -moz-linear-gradient(-45deg, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(98,125,77,1)), color-stop(100%, rgba(31,59,8,1)));
		background: -webkit-linear-gradient(-45deg, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
		background: linear-gradient(135deg, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#627d4d', endColorstr='#1f3b08', GradientType=1 )";
	}
	.profileBackgroundColor7 {
		background: rgba(241,231,103,1);
		background: -moz-linear-gradient(-45deg, rgba(241,231,103,1) 0%, rgba(254,182,69,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(241,231,103,1)), color-stop(100%, rgba(254,182,69,1)));
		background: -webkit-linear-gradient(-45deg, rgba(241,231,103,1) 0%, rgba(254,182,69,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(241,231,103,1) 0%, rgba(254,182,69,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(241,231,103,1) 0%, rgba(254,182,69,1) 100%);
		background: linear-gradient(135deg, rgba(241,231,103,1) 0%, rgba(254,182,69,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#f1e767', endColorstr='#feb645', GradientType=1 )";
	}
	.profileBackgroundColor8 {
		background: rgba(73,155,234,1);
		background: -moz-linear-gradient(-45deg, rgba(73,155,234,1) 0%, rgba(32,124,229,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(73,155,234,1)), color-stop(100%, rgba(32,124,229,1)));
		background: -webkit-linear-gradient(-45deg, rgba(73,155,234,1) 0%, rgba(32,124,229,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(73,155,234,1) 0%, rgba(32,124,229,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(73,155,234,1) 0%, rgba(32,124,229,1) 100%);
		background: linear-gradient(135deg, rgba(73,155,234,1) 0%, rgba(32,124,229,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#499bea', endColorstr='#207ce5', GradientType=1 )";
	}
	.profileBackgroundColor9 {
		background: rgba(147,206,222,1);
		background: -moz-linear-gradient(-45deg, rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(147,206,222,1)), color-stop(41%, rgba(117,189,209,1)), color-stop(100%, rgba(73,165,191,1)));
		background: -webkit-linear-gradient(-45deg, rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%);
		background: linear-gradient(135deg, rgba(147,206,222,1) 0%, rgba(117,189,209,1) 41%, rgba(73,165,191,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#93cede', endColorstr='#49a5bf', GradientType=1 )";
	}
	.profileBackgroundColor10 {
		background: rgba(179,220,237,1);
		background: -moz-linear-gradient(-45deg, rgba(179,220,237,1) 0%, rgba(41,184,229,1) 50%, rgba(188,224,238,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(179,220,237,1)), color-stop(50%, rgba(41,184,229,1)), color-stop(100%, rgba(188,224,238,1)));
		background: -webkit-linear-gradient(-45deg, rgba(179,220,237,1) 0%, rgba(41,184,229,1) 50%, rgba(188,224,238,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(179,220,237,1) 0%, rgba(41,184,229,1) 50%, rgba(188,224,238,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(179,220,237,1) 0%, rgba(41,184,229,1) 50%, rgba(188,224,238,1) 100%);
		background: linear-gradient(135deg, rgba(179,220,237,1) 0%, rgba(41,184,229,1) 50%, rgba(188,224,238,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#b3dced', endColorstr='#bce0ee', GradientType=1 )";
	}
	.profileBackgroundColor11 {
		background: rgba(169,3,41,1);
		background: -moz-linear-gradient(-45deg, rgba(169,3,41,1) 0%, rgba(143,2,34,1) 44%, rgba(109,0,25,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(169,3,41,1)), color-stop(44%, rgba(143,2,34,1)), color-stop(100%, rgba(109,0,25,1)));
		background: -webkit-linear-gradient(-45deg, rgba(169,3,41,1) 0%, rgba(143,2,34,1) 44%, rgba(109,0,25,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(169,3,41,1) 0%, rgba(143,2,34,1) 44%, rgba(109,0,25,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(169,3,41,1) 0%, rgba(143,2,34,1) 44%, rgba(109,0,25,1) 100%);
		background: linear-gradient(135deg, rgba(169,3,41,1) 0%, rgba(143,2,34,1) 44%, rgba(109,0,25,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#a90329', endColorstr='#6d0019', GradientType=1 )";
	}
	.profileBackgroundColor12 {
		background: rgba(113,3,168,1);
		background: -moz-linear-gradient(-45deg, rgba(113,3,168,1) 0%, rgba(136,3,143,1) 44%, rgba(78,2,82,1) 100%);
		background: -webkit-gradient(left top, right bottom, color-stop(0%, rgba(113,3,168,1)), color-stop(44%, rgba(136,3,143,1)), color-stop(100%, rgba(78,2,82,1)));
		background: -webkit-linear-gradient(-45deg, rgba(113,3,168,1) 0%, rgba(136,3,143,1) 44%, rgba(78,2,82,1) 100%);
		background: -o-linear-gradient(-45deg, rgba(113,3,168,1) 0%, rgba(136,3,143,1) 44%, rgba(78,2,82,1) 100%);
		background: -ms-linear-gradient(-45deg, rgba(113,3,168,1) 0%, rgba(136,3,143,1) 44%, rgba(78,2,82,1) 100%);
		background: linear-gradient(135deg, rgba(113,3,168,1) 0%, rgba(136,3,143,1) 44%, rgba(78,2,82,1) 100%);
		filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#7103a8', endColorstr='#4e0252', GradientType=1 )";
	}
	
	.profileBackgroundColor13{background:#919191}
	.profileBackgroundColor14{background:#46413c}
	.profileBackgroundColor15{background:#292929}
	.profileBackgroundColor16{background:#d8677d}
	.profileBackgroundColor17{background:#af3031}
	.profileBackgroundColor18{background:#b286c7}
	.profileBackgroundColor19{background:#9274ae}
	.profileBackgroundColor20{background:#b776af}
	.profileBackgroundColor21{background:#6ab38c}
	.profileBackgroundColor22{background:#4a938d}
	.profileBackgroundColor23{background:#91a86f}
	.profileBackgroundColor24{background:#a3ab6a}
	.profileBackgroundColor25{background:#96b456}
	.profileBackgroundColor26{background:#58b76e}
	.profileBackgroundColor27{background:#7eacb3}
	.profileBackgroundColor28{background:#81afd2}
	.profileBackgroundColor29{background:#418fc6}
	.profileBackgroundColor30{background:#2f86ae}
	.profileBackgroundColor31{background:#325595}
	.profileBackgroundColor32{background:#6067a6}
	 
	.counseling1Text{ color:#fff }
	.counseling2Text{ color:#fff }
	.counseling3Text{ color:#fff }
	.counseling4Text{ color:#fff }
	.counseling5Text{ color:#fff }
	.counseling6Text{ color:#fff }
	.counseling7Text{ color:#fff }
	.counseling8Text{ color:#fff }
/* 	.counseling1Text{ text-shadow:-2px -2px #a79741, 2px -2px #a79741, -2px 2px #a79741, 2px 2px #a79741;-moz-text-shadow:-2px -2px #a79741, 2px -2px #a79741, -2px 2px #a79741, 2px 2px #a79741;-webkit-text-shadow:-2px -2px #a79741, 2px -2px #a79741, -2px 2px #a79741, 2px 2px #a79741; } */
/* 	.counseling8Text{ text-shadow:-2px -2px #39264d, 2px -2px #39264d, -2px 2px #39264d, 2px 2px #39264d;-moz-text-shadow:-2px -2px #39264d, 2px -2px #39264d, -2px 2px #39264d, 2px 2px #39264d;-webkit-text-shadow:-2px -2px #39264d, 2px -2px #39264d, -2px 2px #39264d, 2px 2px #39264d; }  */
/* 	.counseling3Text{ text-shadow:-2px -2px #c66164, 2px -2px #c66164, -2px 2px #c66164, 2px 2px #c66164;-moz-text-shadow:-2px -2px #c66164, 2px -2px #c66164, -2px 2px #c66164, 2px 2px #c66164;-webkit-text-shadow:-2px -2px #c66164, 2px -2px #c66164, -2px 2px #c66164, 2px 2px #c66164; } */
/* 	.counseling4Text{ text-shadow:-2px -2px #407b47, 2px -2px #407b47, -2px 2px #407b47, 2px 2px #407b47;-moz-text-shadow:-2px -2px #407b47, 2px -2px #407b47, -2px 2px #407b47, 2px 2px #407b47;-webkit-text-shadow:-2px -2px #407b47, 2px -2px #407b47, -2px 2px #407b47, 2px 2px #407b47; } */
/* 	.counseling5Text{ text-shadow:-2px -2px #0c476b, 2px -2px #0c476b, -2px 2px #0c476b, 2px 2px #0c476b;-moz-text-shadow:-2px -2px #0c476b, 2px -2px #0c476b, -2px 2px #0c476b, 2px 2px #0c476b;-webkit-text-shadow:-2px -2px #0c476b, 2px -2px #0c476b, -2px 2px #0c476b, 2px 2px #0c476b; } */
/* 	.counseling6Text{ text-shadow:-2px -2px #b3735d, 2px -2px #b3735d, -2px 2px #b3735d, 2px 2px #b3735d;-moz-text-shadow:-2px -2px #b3735d, 2px -2px #b3735d, -2px 2px #b3735d, 2px 2px #b3735d;-webkit-text-shadow:-2px -2px #b3735d, 2px -2px #b3735d, -2px 2px #b3735d, 2px 2px #b3735d; } */
/* 	.counseling7Text{ text-shadow:-2px -2px #a76c10, 2px -2px #a76c10, -2px 2px #a76c10, 2px 2px #a76c10;-moz-text-shadow:-2px -2px #a76c10, 2px -2px #a76c10, -2px 2px #a76c10, 2px 2px #a76c10;-webkit-text-shadow:-2px -2px #a76c10, 2px -2px #a76c10, -2px 2px #a76c10, 2px 2px #a76c10; } */
/* 	.counseling2Text{ text-shadow:-2px -2px #bd9472, 2px -2px #bd9472, -2px 2px #bd9472, 2px 2px #bd9472;-moz-text-shadow:-2px -2px #bd9472, 2px -2px #bd9472, -2px 2px #bd9472, 2px 2px #bd9472;-webkit-text-shadow:-2px -2px #bd9472, 2px -2px #bd9472, -2px 2px #bd9472, 2px 2px #bd9472; } */
	
	.gradientBackground1{
	background: rgba(73,155,234,1);
	background: -moz-linear-gradient(left, rgba(73,155,234,1) 0%, rgba(8,100,199,1) 100%);
	background: -webkit-gradient(left top, right top, color-stop(0%, rgba(73,155,234,1)), color-stop(100%, rgba(8,100,199,1)));
	background: -webkit-linear-gradient(left, rgba(73,155,234,1) 0%, rgba(8,100,199,1) 100%);
	background: -o-linear-gradient(left, rgba(73,155,234,1) 0%, rgba(8,100,199,1) 100%);
	background: -ms-linear-gradient(left, rgba(73,155,234,1) 0%, rgba(8,100,199,1) 100%);
	background: linear-gradient(to right, rgba(73,155,234,1) 0%, rgba(8,100,199,1) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#499bea', endColorstr='#0864c7', GradientType=1 );
	}
	.gradientBackground2{
	background: rgba(138,75,232,1);
	background: -moz-linear-gradient(left, rgba(138,75,232,1) 0%, rgba(168,0,118,1) 100%);
	background: -webkit-gradient(left top, right top, color-stop(0%, rgba(138,75,232,1)), color-stop(100%, rgba(168,0,118,1)));
	background: -webkit-linear-gradient(left, rgba(138,75,232,1) 0%, rgba(168,0,118,1) 100%);
	background: -o-linear-gradient(left, rgba(138,75,232,1) 0%, rgba(168,0,118,1) 100%);
	background: -ms-linear-gradient(left, rgba(138,75,232,1) 0%, rgba(168,0,118,1) 100%);
	background: linear-gradient(to right, rgba(138,75,232,1) 0%, rgba(168,0,118,1) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#8a4be8', endColorstr='#a80076', GradientType=1 );
	}
	.gradientBackground3{
	background: rgba(94,147,165,1);
	background: -moz-linear-gradient(left, rgba(94,147,165,1) 0%, rgba(0,141,166,1) 100%);
	background: -webkit-gradient(left top, right top, color-stop(0%, rgba(94,147,165,1)), color-stop(100%, rgba(0,141,166,1)));
	background: -webkit-linear-gradient(left, rgba(94,147,165,1) 0%, rgba(0,141,166,1) 100%);
	background: -o-linear-gradient(left, rgba(94,147,165,1) 0%, rgba(0,141,166,1) 100%);
	background: -ms-linear-gradient(left, rgba(94,147,165,1) 0%, rgba(0,141,166,1) 100%);
	background: linear-gradient(to right, rgba(94,147,165,1) 0%, rgba(0,141,166,1) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5e93a5', endColorstr='#008da6', GradientType=1 );
	}
	.gradientBackground4{
	background: rgba(255,255,255,1);
	background: -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(252,252,252,1) 81%, rgba(237,237,237,1) 100%);
	background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(255,255,255,1)), color-stop(81%, rgba(252,252,252,1)), color-stop(100%, rgba(237,237,237,1)));
	background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(252,252,252,1) 81%, rgba(237,237,237,1) 100%);
	background: -o-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(252,252,252,1) 81%, rgba(237,237,237,1) 100%);
	background: -ms-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(252,252,252,1) 81%, rgba(237,237,237,1) 100%);
	background: linear-gradient(to bottom, rgba(255,255,255,1) 0%, rgba(252,252,252,1) 81%, rgba(237,237,237,1) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed', GradientType=0 );
	}
	.gradientBackground5{
	background: rgba(237,237,237,1);
	background: -moz-linear-gradient(top, rgba(237,237,237,1) 0%, rgba(252,252,252,1) 19%, rgba(255,255,255,1) 100%);
	background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(237,237,237,1)), color-stop(19%, rgba(252,252,252,1)), color-stop(100%, rgba(255,255,255,1)));
	background: -webkit-linear-gradient(top, rgba(237,237,237,1) 0%, rgba(252,252,252,1) 19%, rgba(255,255,255,1) 100%);
	background: -o-linear-gradient(top, rgba(237,237,237,1) 0%, rgba(252,252,252,1) 19%, rgba(255,255,255,1) 100%);
	background: -ms-linear-gradient(top, rgba(237,237,237,1) 0%, rgba(252,252,252,1) 19%, rgba(255,255,255,1) 100%);
	background: linear-gradient(to bottom, rgba(237,237,237,1) 0%, rgba(252,252,252,1) 19%, rgba(255,255,255,1) 100%);
	filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ededed', endColorstr='#ffffff', GradientType=0 );
	}
</style>
<script>
function Layer(windowWidth, windowHeight){
	var delegate = null;
	this.delegate = null;
	this.currentType = null;
	var obj = this;

	this.setDelegate = function(obj){
		this.delegate = delegate = obj;
	}

	$( "#layerCancelBtn" ).click(function(){
		obj.cancelBtnAction(obj.delegate);
	});
	$( "#layerOkBtn" ).click(function(){
		obj.okBtnAction(obj.delegate);
	});
//		
	this.showLayerWidthShortMessage = function(msg,title){
		$("#layerOkBtn").hide();
		$("#layerCancelBtn").hide();
		this.showLayer(msg, title);
		setTimeout(function(){$("#fullSizeLayerDiv").fadeOut(300);},1000);
	}

	this.showConfirmDialogWithTitleAndMsg = function(msg, title, okBtnTitle, cancelBtnTitle)
	{
		var height = 100;

		$("#layerContentsTitleDiv").html(title);
		$("#layerContentsMessageDiv").html(msg);

		$("#fullSizeLayerDiv").fadeIn(300);

		var width = ($("#fullSizeLayerDiv").width() * 0.9 > 300) ? 300 : $("#fullSizeLayerDiv").width() * 0.9;
		
		$("#layerContentsContainerDiv").css({minWidth:200,width:width,minHeight:height,borderTopLeftRadius:'0.5em',borderTopRightRadius:'0.5em', 
			top : ($("#fullSizeLayerDiv").height() - height) / 2, 
			left : ($("#fullSizeLayerDiv").width() - width) / 2
		});
		
		var buttonMaxWidth = $("#layerContentsContainerDiv").outerWidth();

		if(cancelBtnTitle == null){
			$("#layerOkBtn").show();
			$("#layerOkBtn").html(okBtnTitle);
			$("#layerOkBtn").css({top : $("#layerContentsContainerDiv").height(),
								borderBottomLeftRadius:'0.5em',borderBottomRightRadius:'0.5em',
								left :0, width: "100%"});
		}else if(okBtnTitle == null){
			$("#layerCancelBtn").show();
			$("#layerCancelBtn").html(cancelBtnTitle);
			$("#layerCancelBtn").css({top : $("#layerContentsContainerDiv").height(),
				borderBottomLeftRadius:'0.5em',borderBottomRightRadius:'0.5em',
				left : 0, width: "100%"});
		}else{
			$("#layerOkBtn").show();
			$("#layerCancelBtn").show();
			$("#layerCancelBtn").html(cancelBtnTitle);
			$("#layerOkBtn").html(okBtnTitle);
			$("#layerCancelBtn").css({top : $("#layerContentsContainerDiv").height(),
				borderBottomLeftRadius:'0.5em',
				left : 0, width: buttonMaxWidth/2});

			$("#layerOkBtn").css({top : $("#layerContentsContainerDiv").height(),
				borderBottomRightRadius:'0.5em',
				left : buttonMaxWidth/2, width: buttonMaxWidth/2});
		}

		setTimeout(function(){ $("#layerContentsMessageDiv").css({marginTop:(100 - ($("#layerContentsTitleDiv").outerHeight()+20) - $("#layerContentsMessageDiv").outerHeight())/2});},100);
	}
		
	this.showLayer = function(msg, title)
	{
		var width = 200;
		var height = 100;

		if(title != null){
			$("#layerContentsTitleDiv").html(title);
		}else{
			$("#layerContentsTitleDiv").css({height:0,margin:0});
		}
		$("#layerContentsMessageDiv").html(msg);
		$("#fullSizeLayerDiv").fadeIn(300);
		console.log($("#fullSizeLayerDiv").width() + "-" + width);
		$("#layerContentsContainerDiv").css({minWidth:width, width:width, minHeight:height, height:height, borderRadius:'0.5em', 
											top : ($("#fullSizeLayerDiv").height() - height) / 2, 
											left : ($("#fullSizeLayerDiv").width() - width) / 2});
		setTimeout(function(){ $("#layerContentsMessageDiv").css({marginTop:(100 - ($("#layerContentsTitleDiv").outerHeight()+20) - $("#layerContentsMessageDiv").outerHeight())/2});},100);
		 
	}
	this.hideLayer = function(isReload){
		isReload = (isReload == null) ? false : isReload;
		 
		$("#fullSizeLayerDiv").fadeOut(300); 
		if(isReload) window.location.reload(true); 
	}

	this.cancelBtnAction = function(delegate){
		if(delegate == null) return;
		
		if((typeof delegate !== 'undefined') && delegate.layerCancelBtnAction){
			delegate.layerCancelBtnAction();
		}
	}

	this.okBtnAction = function(delegate){
		if(delegate == null) return;
		
		if(typeof delegate !== 'undefined' && delegate.layerOkBtnAction)
			delegate.layerOkBtnAction();
	}
		
}

function Common(windowWidth, windowHeight){

	var delegate = null;
	this.delegate = null;
	
	this.setDelegate = function(obj){
		this.delegate = delegate = obj;
	}
	
	this.showProfile = function(uid,obj){
		if($("#userProfileDiv").is(":visible")){
			$("#userProfileDiv").fadeOut(300,function(){
				$("#userProfileDiv").hide();
			});
			
		}else{
			
			if(typeof uid === null || uid.length < 1) return;
			$.ajax({
				type:"post"
				, url:"/profile.php"
				, async : true
	    	    , timeout : 30000
	    	    , cache : false
	    	    , dataType : "html"
		    	, data :  "action=userProfile&uid="+encodeURIComponent($.trim(uid))
	    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
	    	    , error : function(request, status, error) {
	        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (user profile)");
	    	    }
	    	    , success : function(response, status, request) {
		    	    console.log(response);
	    	    	if(response != 'error'){
	    	    		$("#userProfileDiv").fadeIn(300);
	    	    		$("#userProfileDiv").css({top : $(obj).position().top + 30, left : 10, width:windowWidth-20});
	    				$("#userProfileContainerDiv").html(response);
	    	    	}else{
	    	    		commonLayer.showLayerWidthShortMessage("실패했습니다.","안내");
	    	    	}
	    	    }
			});
		}
	}

	this.mypage = function(uid){
		if(typeof uid === null || uid.length < 1) return;
		
		$("#fullSizeLayerDiv").fadeOut(300,function(){
			$("#userProfileDiv").hide();
			location.href = '/mypage/' + uid;
		});
	}
	
	this.showLanguageMenu = function(btnObj){
		if($("#languageContainerDiv").is(":visible")){
			$("#languageContainerDiv").fadeOut(200,function(){
				$("#languageContainerDiv").hide();
			});
		}else{
			$("#languageContainerDiv").fadeIn(200);
			var leftMargin = ($("#gnbContainerDiv").outerWidth(true) - $("#gnbContainerDiv").width()) / 2 - 25;
			$("#languageContainerDiv").css({top : $(btnObj).position().top + $(btnObj).height() + 15, left : leftMargin + $(btnObj).position().left});
		}
	}

	this.changeLanguage = function(languageCode){
		location.href = "/language.php?language=" + languageCode + "&url=/tarot/today";
	}

	this.writeInquery = function(from,fromId){

		var content = $.trim($("#" + from + "InqueryContentTextarea" + fromId).val());
		var email = "";
				
		if(content.length < 1) return;
		$.ajax({
			type:"post"
			, url:"/support.php"
			, async : true
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "html"
	    	, data :  "action=insertInquery&from="+encodeURIComponent($.trim(from))+"&fromId="+encodeURIComponent($.trim(fromId))+"&content=" + encodeURIComponent(content)+"&email=" + encodeURIComponent(email)
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(request, status, error) {
        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (write inquery)");
    	    }
    	    , success : function(response, status, request) {
        	    console.log(response);
    	    	if(response == 'success'){
    	    		commonLayer.showLayerWidthShortMessage("의견이 등록되었습니다. 감사합니다.","안내");
    	    		if(typeof mypage !== "undefined"){
    	    			mypage.naviBtnAction("newsfeed",true);
    	    		}
    	    		if(delegate != null && typeof delegate.writeInqueryComplete !== 'undefined'){
    					delegate.writeInqueryComplete(fromId);
    				}
	    			
    	    	}else{
    	    		commonLayer.showLayerWidthShortMessage("실패했습니다.","안내");
    	    	}
    	    }
		});
	}

	this.windowOpen = function(destination){
		if(destination == 'close'){
			self.close();
		}else{
			window.open(destination, '_blank');
		}
	}
	this.goto = function(destination){
		
		//$('body').fadeOut(300,function(){
			if(destination == 'back'){
				//$('body').show();
				history.back();
			}else if(destination == 'close'){
				self.close();
			}else{
				//$('body').show();
				location.href = destination;
			}
		//});	
	}
}

var windowHeight = 0;
var windowWidth = 0;

$(function() {
	//windowHeight = ($(document).height() > $(window).height()) ? $(document).height() : $(window).height();
	//windowWidth = ($(document).width() > $(window).width()) ? $(document).width() : $(window).width();
	$(window).resize(function(){
		windowHeight = ($(document).height() > $(window).height()) ? $(document).height() : $(window).height();
		windowWidth = ($(document).width() > $(window).width()) ? $(document).width() : $(window).width();
	}).resize();
	
	common = new Common(windowWidth, windowHeight);
	commonLayer = new Layer(windowWidth, windowHeight);
	var leftMargin = $("#gnbContainerDiv").outerWidth(true) - $("#gnbContainerDiv").outerWidth(false);
});
</script>

</head>
<body style="margin: 0; padding: 0; width: 100%; height: 100%;">
<div id="tellersFeeContainerDiv" style="position: fixed; top: 0; left: 0; display: none; background-color: rgba(0, 0, 0, 0.85); color: #ffffff; height: 100vh; width: 100%;z-index:98;overflow-y:auto">
	<div style="margin:40px 0 20px 0;font-size:24px;font-weight:300;text-align:center">복채</div>
	<div style="width:90%;font-weight:100;margin:0 auto;line-height:180%;text-align:center">타로점을 보셨으므로 복채를 받겠습니다. 아래 중 한 가지를 선택하시기 바랍니다.</div>
	
	<div style="padding:10px;max-width:95%;margin:0 auto;text-align:center;" id="feeTypeBtnContainerDiv">
		<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem1Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['pay'](1)">
			<div style="display:table-cell;vertical-align:middle">
				<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;"><img src="/img/new/img_sns.gif" width=40/></div>
				<div style="font-weight:100;font-size:12px;line-height:160%">자신의 SNS에 TarotSecret 서비스 소개</div>
			</div>
		</div>
				<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem3Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['pay'](3)">
			<div style="display:table-cell;vertical-align:middle">
				<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">$</div>
				<div style="font-weight:100;font-size:12px;line-height:160%">돈으로 지불</div>
			</div>
		</div>
		<!-- div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;text-align:center;max-width:100px;" class="rounded5px pointer" onclick="tarotRecord.tellersFeeBtnAction['pay'](4)">
			<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">?!</div>
			<div style="font-weight:100;font-size:12px;line-height:160%">다른 회원의 고민에 조언해주기</div>
		</div-->
		<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;text-align:center;max-width:100px;" class="rounded5px pointer" onclick="tarotRecord.tellersFeeBtnAction['pay'](4)">
			<div style="display:table-cell;vertical-align:middle">
				<div style="font-weight:100;font-size:24px;margin:0 0 5px 0;">후기</div>
				<div style="font-weight:100;font-size:12px;line-height:160%">이번 점을 본 후기를 작성하고 고민 내용 공개/의견 받기</div>
			</div>
		</div>
		<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem4Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['pay'](5)">
			<div style="display:table-cell;vertical-align:middle">
				<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">JOIN</div>
				<div style="font-weight:100;font-size:12px;line-height:160%">회원가입</div>
			</div>
		</div>
		<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem5Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['done'](0)">
			<div style="display:table-cell;vertical-align:middle">
				<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">X</div>
				<div style="font-weight:100;font-size:12px;line-height:160%">다음에 지불</div>
			</div>
		</div>
	</div>
	
	<div style="display:none;" id="feeContentContainerDiv">
		<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent1Div" onclick="tarotRecord.showDoneBtn();">
		
			<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.tarotsecret.net')">
				<div style="font-weight:500;font-size:18px">Facebook</div>
			</div>
			
			<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="window.open('https://twitter.com/share?url=http%3A%2F%2Fwww.tarotsecret.net&text=TarotSecret')">
				<div style="font-weight:500;font-size:18px">Twitter</div>
			</div>
			
			<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText"  onclick="tarotRecord.tellersFeeBtnAction['blog']()">
				<div style="font-weight:500;font-size:18px">Blog</div>
			</div>
			
			<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText"  onclick="tarotRecord.tellersFeeBtnAction['etcsns']()">
				<div style="font-weight:500;font-size:18px">&hellip;</div>
			</div>
			<!-- div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;text-align:center;max-width:100px;" class="rounded5px pointer">
				<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;"><a href='/kakaostory.php' target='_blank'>Twitter</a></div>
			</div-->
		</div>
		<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent2Div">
					<div id="kakaoBtnDiv" style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['done'](1)">
					<div style="font-weight:500;font-size:18px">KAKAO</div>
			</div>
					<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['done'](1);window.open('http://line.me/R/msg/text/?%ec%a0%9c%33%ec%9e%90%ec%9d%98%20%ec%8b%9c%ea%b0%81%ec%9c%bc%eb%a1%9c%20%eb%82%98%eb%a5%bc%20%eb%b0%94%eb%9d%bc%eb%b3%bc%20%ec%88%98%20%ec%9e%88%eb%8a%94%20%ea%b8%b0%ed%9a%8c%2c%20%ec%8b%a4%ec%a0%9c%ec%99%80%20%ea%b0%99%ec%9d%80%20%ed%83%80%eb%a1%9c%ec%a0%90%20%4c%6f%67%6d%65%ed%83%80%eb%a1%9c%0d%0ahttp%3a%2f%2ftarotsecret%2enet%2f')">
				<div style="font-weight:500;font-size:18px">LINE</div>
			</div>
			
			<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText"  onclick="tarotRecord.tellersFeeBtnAction['etcmsg']()">
				<div style="font-weight:500;font-size:18px">&hellip;</div>
			</div>
		</div>
		
		<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent3Div">
					<table align=center style="margin:5px auto;padding:10px;border:1px solid #cdc;max-width:90%;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['bankaccount']()">
			<tr><td style="padding:10px">
				<div style="font-weight:500;font-size:18px">계좌이체</div>
				<div style="font-weight:100;font-size:14px;line-height:160%">SC제일은행 602-20-309404, 김현태</div>
			</td></tr></table>
					<table align=center style="margin:5px auto;padding:10px;border:1px solid #cdc;max-width:90%;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['paypal']();">
			<tr><td style="pading:10px">
				<div style="font-weight:500;font-size:18px">PAYPAL</div>
				<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
					<input type="hidden" name="cmd" value="_s-xclick"/>
					<input type="hidden" name="hosted_button_id" value="CX8587C3SEZH4"/>
					<table>
					<tr><td><input type="hidden" name="on0" value="Fortune teller's fee">Fortune teller's fee</td></tr><tr><td><select name="os0" style="color:#000000">
						<option value="fee 1" style="color:#000000">fee 1 $1.00 USD</option>
						<option value="fee 2" style="color:#000000">fee 2 $2.00 USD</option>
						<option value="fee 3" style="color:#000000">fee 3 $3.00 USD</option>
						<option value="fee 4" style="color:#000000">fee 4 $5.00 USD</option>
						<option value="fee 5" style="color:#000000">fee 5 $7.00 USD</option>
						<option value="fee 6" style="color:#000000">fee 6 $10.00 USD</option>
						<option value="fee 7" style="color:#000000">fee 7 $15.00 USD</option>
						<option value="fee 8" style="color:#000000">fee 8 $30.00 USD</option>
						<option value="fee 9" style="color:#000000">fee 9 $50.00 USD</option>
						<option value="fee 10" style="color:#000000">fee 10 $100.00 USD</option>
					</select></td></tr>
					</table>
					<input type="hidden" name="currency_code" value="USD"/>
					<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
					<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
				</form>
			</td></tr></table>
		</div>
		
		<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent4Div">
			<textarea id="tarotReviewTextarea" style="width:90%;height:100px;line-height:160%" class='smallText' onkeyup="tarotRecord.checkReviewInput(this)" placeholder="여기에 후기를 작성해주세요"></textarea>
			<div style="height: 45px;line-height:180%">
				<div>
					<div id="reviewErrorMsgDiv" class="rounded2px" style="display:none;color:#fff;background:rgba(0,0,0,0.5);padding:5px;" class="normalTextBold">후기를 조금 더 길게 작성해주세요.</div>
				</div>
			</div>
		</div>
		
		<div style="margin:40px auto;text-align:center">
			<div style="display:inline;padding:10px;border:1px solid #cdc;background:rgba(255,255,255,0.25);font-size:14px;" class="rounded5px pointer normalText" onclick="tarotRecord.tellersFeeBtnAction['cancel']()">취소</div>
			<div id="doneBtn" style="display:none;padding:10px;border:1px solid #cdc;background:rgba(255,255,255,0.25);" class="rounded5px pointer normalTextBold" onclick="tarotRecord.tellersFeeBtnAction['done'](1)">완료</div>
			<div id="writeReviewBtn" style="display:none;padding:10px;border:1px solid #cdc;background:rgba(255,255,255,0.25);" class="rounded5px pointer normalTextBold" onclick="tarotRecord.tellersFeeBtnAction['writeReview']()">완료</div>
		</div>
	</div>
</div>
<style>
a{padding:0;color:#fff;}
.tarotCounselingBtn {
	line-height: 20px;color: #454;white-space: nowrap;vertical-align: middle;
	padding:10px;
	-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;
	background-color: #eee;	background-image: -webkit-linear-gradient(#fcfcfc, #eee);background-image: linear-gradient(#fcfcfc, #eee);
	border-radius: 3px;	-webkit-appearance: none;
}
.tarotCounselingBtn1Color1 {
	color: #fff;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.15);border-color: #419ea9;
	background-color: #44a5b0;background-image: -webkit-linear-gradient(#6ddcdd, #44a5b0);background-image: linear-gradient(#6ddcdd, #44a5b0);
}
.tarotCounselingBtnColor2 {
	color: #fff;text-shadow: 0 -1px 1px rgba(0, 0, 0, 0.15);border-color: #d1b531;
	background-color: #b0a544;background-image: -webkit-linear-gradient(#ddc96d, #b0a544);background-image: linear-gradient(#ddc96d, #b0a544);
}
</style>

<div id="recordContainerDiv" style="display:none;position:fixed;width:50%;background:#fff;z-index:3;overflow-y:auto;display:none" class="recordShadow">
	<img id="tarotReportHideBtnDiv" src="/img/btn_cancel.png" style="position:fixed;margin:10px 10px 0 10px;width:25px;height:25px;z-index:4" class="pointer" onclick="tarotRecord.hideReport()" />
	<div id="recordCounselingTitleContainer" style="padding:20px 10px;text-align:center;color:#fff">
		<div style="margin:5px 0" class='largeTextBold centerText' id="recordCounselingTitleNameDiv"></div>
		<div style="margin:0" class='normalText centerText' id="recordCounselingTitleDescDiv"></div>
		<div style="margin:10px 0;" class='smallTextThin'>TAROT SECRET</div>
	</div>
	<div style="padding:0 10px;position:relative;">
		<table width=100% id="userInfoTable" style='display:none'><tr>
			<td rowspan=2 width=27 style='padding:5px 5px 0 0' class='pointer'>
				<img id='userProfileImg' class='forumProfileImg' />
			</td>
			<td style='padding:0px 0 0px 0px;line-height:80%' class='smallText'>
				<span class='pointer smallTextBold' id='userProfileName'></span>
				<div style='margin:10px 0 0 0;color:#aaa' id="recordDateDiv"></div>
			</td>
		</tr></table>
		
		<div style='height:1px;border-top:1px solid #ede'></div>
		
		<div id="commandContainerDiv" style="display:none">
			<div style="position:absolute;width:70px;height:70px" id="recordStampDiv"></div>
			<div id="recordTellersFeeDiv" style="margin:10px 0 20px 0;text-align:center;z-index:2">
				<div id="recordTellersFeeTitleDiv" class="normalTextBold" style="margin:10px 0;">복채</div>
				<div id="recordTellersFeeContentDiv" class="smallText" style="display:inline"></div>
				<input id="recordTellersFeeBtn" type="button" onclick="tarotRecord.showTellersFeeView()" value="지불하기">
			</div>

			<div id="recordSettingDiv" style="margin:10px 0 20px 0;text-align:center">
				<div id="recordSettingTitleDiv" class="normalTextBold" style="margin:10px 0;">설정</div>
				<div id="recordOpenSettingContentDiv" class="smallText">
					<input type="checkbox" id="recordOpenCheckBox" name="recordOpenCheckBox" onchange="tarotRecord.updateRecordStatus('open');" />
					<label for="recordOpenCheckBox"><span></span>체크를 하면 이 고민에 대해 다른 사람들의 조언을 받을 수 있습니다. </label>
				</div>
				<div class="rounded8px tarotCounselingBtn buttonShadow tarotCounselingBtnColor1 pointer normalTextBold" style='margin:10px 0;display:inline-block' onclick="tarotRecord.updateRecordStatus('deleteQuestion')">이 타로점 기록을 삭제</div><br/>
			</div>
		</div>

		<div class='normalTextBold centerText' style='margin:40px 0 0 0'>Q. <span style="line-height:180%;" class="normalTextThin centerText" id="recordQuestionDiv"></span></div>

		<div class='centerText' style='margin:40px 0 0 0' id='answerOfTarotContainerDiv'>
			<div class='normalTextBold'>
				<span style='background:rgba(0,0,0,0.3);color:#fff;padding:3px' class='smallTextBold'>타로의 대답</span>
				<div style='margin:15px 0;'>
					<div class='normalText' id='answerMeansDiv1'></div>
					<div style='display:none' class='normalText' id='answerMeansDiv2'></div>
					<div  class='smallTextThin' style='margin:20px 0;line-height:180%' id='answerMeansDescDiv1'></div>
					<div style='display:none;margin:20px 0' id='answerMeansDescDiv2'></div>
				</div>
			</div>
			<div>
				<div style='display:inline'><img id='answerImg1' width=40% /></div>
				<div style='display:inline'><img id='answerImg2' style='display:none' width=40% /></div>
			</div>
			
			<div style='margin:10px 0;color:#787'>
				<div class='smallText' style='display:inline' id='answerCardTitle1'></div>
				<div class='smallText' style='display:none' id='answerCardTitle2'></div>
			</div>
		</div>
		
		<div class='centerText' style='margin:40px 0 0 0;display:none' id="reviewContainerDiv">
			<div class='normalTextBold'>
				<span style='background:rgba(0,0,0,0.3);color:#fff;padding:3px' class='smallTextBold'>점을 본 후기</span>
				<div style='margin:15px 0;'>
					<div  class='normalTextThin' style='margin:20px 0;line-height:180%' id='reviewTextDiv'></div>
				</div>
			</div>
		</div>

		<div style="margin:50px 0 30px 0" class="centerText">
			<div class="rounded8px tarotCounselingBtn buttonShadow tarotCounselingBtnColor1 pointer normalTextBold" onclick="tarotRecord.showRecordContent()" style='display:inline;margin:0 auto' id="showRecordContentBtnDiv">타로점 해석 전체 보기</div>
			<div id="stoppedRecordNoticeDiv" class="smallText">중단된 타로점이기 때문에 기록이 없습니다.</div>
		</div>
		
		<div id='recordContentDiv' style='display:none;margin:20px 0 0 0'>
			<div style="border:1px solid;width:70%;margin:10px auto 20px auto">
				<div id="recordShuffledCardsContainerDiv" style="position:relative;left:0">
										<img id="recordShuffledCard1" style="position: absolute;" />					<img id="recordShuffledCard2" style="position: absolute;" />					<img id="recordShuffledCard3" style="position: absolute;" />					<img id="recordShuffledCard4" style="position: absolute;" />					<img id="recordShuffledCard5" style="position: absolute;" />					<img id="recordShuffledCard6" style="position: absolute;" />					<img id="recordShuffledCard7" style="position: absolute;" />					<img id="recordShuffledCard8" style="position: absolute;" />					<img id="recordShuffledCard9" style="position: absolute;" />					<img id="recordShuffledCard10" style="position: absolute;" />				</div>
			</div>
			
						<div id="recordCounselingContainer1" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">1</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard1" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling1"></div>
			</div>
						<div id="recordCounselingContainer2" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">2</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard2" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling2"></div>
			</div>
						<div id="recordCounselingContainer3" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">3</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard3" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling3"></div>
			</div>
						<div id="recordCounselingContainer4" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">4</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard4" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling4"></div>
			</div>
						<div id="recordCounselingContainer5" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">5</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard5" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling5"></div>
			</div>
						<div id="recordCounselingContainer6" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">6</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard6" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling6"></div>
			</div>
						<div id="recordCounselingContainer7" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">7</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard7" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling7"></div>
			</div>
						<div id="recordCounselingContainer8" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">8</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard8" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling8"></div>
			</div>
						<div id="recordCounselingContainer9" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">9</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard9" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling9"></div>
			</div>
						<div id="recordCounselingContainer10" style="margin:20px 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">10</div>
				<div style="width:40%;margin:10px auto"><img id="recordCounselingCard10" width=100% /></div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounseling10"></div>
			</div>
						<div id="recordCounselingContainerSummary" style="margin:40px 0 0 0;display:none">
				<div style="font-size:16px;font-weight:500;margin:20px auto;text-align:center">총평</div>
				<div style="line-height:160%;width:80%;margin:20px auto;" class="normalTextThin" id="recordCounselingSummary"></div>
			</div>
		</div>
		
		<div id="bottomBtnContainerDiv" style="border-bottom:1px solid #ded;border-top:1px solid #ded;padding:10px 0;margin:20px 0 0 0" class="smallTextBold">
			<table width=100%><tr>
				<td class='pointer' onclick="tarotRecord.activity('likeRecord',recordId)"><table><tr><td valign=middle><img src='/img/btn_like.png' /></td><td style='padding:0 0 0 5px' class="smallTextBold" id='likeRecordText'>좋아요</td><td id='likeRecordCntTd'  class="smallTextBold" style='padding:3px 0 0 5px' valign=top></td></tr></table></td><td width=20></td>
				<td><table style='display:none' id='recordViewCntTable'><tr><td align=center>조회 <span id='recordViewCnt'></span> 회</td></tr></table></td>
				<td align=right>
					<div class="pointer" id="shareBtnDiv" style='display:none' onclick='tarotRecord.showShareView()'>공유하기</div>
				</td></tr></table></td>
			</tr></table>
		</div>
		<div id="replyInputContainerDiv">
			<div class="normalText" style='margin:10px 0 10px 0'>고민에 대한 조언, 의견, 응원 남기기</div>
			<textarea style="width:100%;height:100px" id="recordCommentTextarea" ></textarea> 
			<span class="pointer gnbBtn gnbBtnColor2" style="margin:5px 0" onclick="tarotRecord.activity('writeComment',recordId)">작성 완료</span>
		</div>
		
		<div style="margin:20px 0 0 0" id="recordCommentListDiv"></div>
		<div id="tarotRecordActivityIndicatorDiv" style="display:none">
			<p style="text-align:center"><img src="/img/ajax-loader.gif" /></p>
		</div>
	</div>

	<div id="tellersFeeContainerDiv" style="position:fixed;top:0;left:0;width:100%;background:rgba(0,0,0,0.8);color:#fff;display:none;z-index:98">
		<div style="margin:40px 0 20px 0;font-size:24px;font-weight:300;text-align:center">복채</div>
		<div style="width:90%;font-weight:100;margin:0 auto;line-height:180%;text-align:center">타로점을 보셨으므로 복채를 받겠습니다. 아래 중 한 가지를 선택하시기 바랍니다.</div>
		
		<div style="padding:10px;max-width:95%;margin:0 auto;text-align:center;" id="feeTypeBtnContainerDiv">
			<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem1Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['pay'](1)">
				<div style="display:table-cell;vertical-align:middle">
					<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;"><img src="/img/new/img_sns.gif" width=40/></div>
					<div style="font-weight:100;font-size:12px;line-height:160%">자신의 SNS에 TarotSecret 서비스 소개</div>
				</div>
			</div>
						<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem3Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['pay'](3)">
				<div style="display:table-cell;vertical-align:middle">
					<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">$</div>
					<div style="font-weight:100;font-size:12px;line-height:160%">돈으로 지불</div>
				</div>
			</div>
			<!-- div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;text-align:center;max-width:100px;" class="rounded5px pointer" onclick="tarotRecord.tellersFeeBtnAction['pay'](4)">
				<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">?!</div>
				<div style="font-weight:100;font-size:12px;line-height:160%">다른 회원의 고민에 조언해주기</div>
			</div-->
			<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;text-align:center;max-width:100px;" class="rounded5px pointer" onclick="tarotRecord.tellersFeeBtnAction['pay'](4)">
				<div style="display:table-cell;vertical-align:middle">
					<div style="font-weight:100;font-size:24px;margin:0 0 5px 0;">후기</div>
					<div style="font-weight:100;font-size:12px;line-height:160%">이번 점을 본 후기를 작성하고 고민 내용 공개/의견 받기</div>
				</div>
			</div>
			<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem4Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['pay'](5)">
				<div style="display:table-cell;vertical-align:middle">
					<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">JOIN</div>
					<div style="font-weight:100;font-size:12px;line-height:160%">회원가입</div>
				</div>
			</div>
			<div style="display:inline-table;vertical-align:top;width:100px;height:90px;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" id="feeItem5Div" class="rounded8px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['done'](0)">
				<div style="display:table-cell;vertical-align:middle">
					<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;">X</div>
					<div style="font-weight:100;font-size:12px;line-height:160%">다음에 지불</div>
				</div>
			</div>
		</div>
		
		<div style="display:none;" id="feeContentContainerDiv">
			<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent1Div" onclick="tarotRecord.showDoneBtn();">
			
				<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.tarotsecret.net')">
					<div style="font-weight:500;font-size:18px">Facebook</div>
				</div>
				
				<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="window.open('https://twitter.com/share?url=http%3A%2F%2Fwww.tarotsecret.net&text=TarotSecret')">
					<div style="font-weight:500;font-size:18px">Twitter</div>
				</div>
				
				<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText"  onclick="tarotRecord.tellersFeeBtnAction['blog']()">
					<div style="font-weight:500;font-size:18px">Blog</div>
				</div>
				
				<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText"  onclick="tarotRecord.tellersFeeBtnAction['etcsns']()">
					<div style="font-weight:500;font-size:18px">&hellip;</div>
				</div>
				<!-- div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;text-align:center;max-width:100px;" class="rounded5px pointer">
					<div style="font-weight:500;font-size:24px;margin:0 0 5px 0;"><a href='/kakaostory.php' target='_blank'>Twitter</a></div>
				</div-->
			</div>
			<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent2Div">
							<div id="kakaoBtnDiv" style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['done'](1)">
						<div style="font-weight:500;font-size:18px">KAKAO</div>
				</div>
							<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['done'](1);window.open('http://line.me/R/msg/text/?%ec%a0%9c%33%ec%9e%90%ec%9d%98%20%ec%8b%9c%ea%b0%81%ec%9c%bc%eb%a1%9c%20%eb%82%98%eb%a5%bc%20%eb%b0%94%eb%9d%bc%eb%b3%bc%20%ec%88%98%20%ec%9e%88%eb%8a%94%20%ea%b8%b0%ed%9a%8c%2c%20%ec%8b%a4%ec%a0%9c%ec%99%80%20%ea%b0%99%ec%9d%80%20%ed%83%80%eb%a1%9c%ec%a0%90%20%4c%6f%67%6d%65%ed%83%80%eb%a1%9c%0d%0ahttp%3a%2f%2ftarotsecret%2enet%2f')">
					<div style="font-weight:500;font-size:18px">LINE</div>
				</div>
				
				<div style="display:inline-table;margin:5px;padding:10px;border:1px solid #cdc;max-width:100px;" class="rounded5px pointer centerText"  onclick="tarotRecord.tellersFeeBtnAction['etcmsg']()">
					<div style="font-weight:500;font-size:18px">&hellip;</div>
				</div>
			</div>
			
			<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent3Div">
							<table align=center style="margin:5px auto;padding:10px;border:1px solid #cdc;max-width:90%;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['bankaccount']()">
				<tr><td style="padding:10px">
					<div style="font-weight:500;font-size:18px">계좌이체</div>
					<div style="font-weight:100;font-size:14px;line-height:160%">SC제일은행 602-20-309404, 김현태</div>
				</td></tr></table>
							<table align=center style="margin:5px auto;padding:10px;border:1px solid #cdc;max-width:90%;" class="rounded5px pointer centerText" onclick="tarotRecord.tellersFeeBtnAction['paypal']();">
				<tr><td style="pading:10px">
					<div style="font-weight:500;font-size:18px">PAYPAL</div>
					<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
						<input type="hidden" name="cmd" value="_s-xclick"/>
						<input type="hidden" name="hosted_button_id" value="CX8587C3SEZH4"/>
						<table>
						<tr><td><input type="hidden" name="on0" value="Fortune teller's fee">Fortune teller's fee</td></tr><tr><td><select name="os0" style="color:#000000">
							<option value="fee 1" style="color:#000000">fee 1 $1.00 USD</option>
							<option value="fee 2" style="color:#000000">fee 2 $2.00 USD</option>
							<option value="fee 3" style="color:#000000">fee 3 $3.00 USD</option>
							<option value="fee 4" style="color:#000000">fee 4 $5.00 USD</option>
							<option value="fee 5" style="color:#000000">fee 5 $7.00 USD</option>
							<option value="fee 6" style="color:#000000">fee 6 $10.00 USD</option>
							<option value="fee 7" style="color:#000000">fee 7 $15.00 USD</option>
							<option value="fee 8" style="color:#000000">fee 8 $30.00 USD</option>
							<option value="fee 9" style="color:#000000">fee 9 $50.00 USD</option>
							<option value="fee 10" style="color:#000000">fee 10 $100.00 USD</option>
						</select></td></tr>
						</table>
						<input type="hidden" name="currency_code" value="USD"/>
						<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" />
						<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1" />
					</form>
				</td></tr></table>
			</div>
			
			<div style="margin:20px auto;width:90%;display:none;text-align:center" id="feeContent4Div">
				<textarea id="tarotReviewTextarea" style="width:90%;height:100px;line-height:160%" class='smallText' onkeyup="tarotRecord.checkReviewInput(this)" placeholder="여기에 후기를 작성해주세요"></textarea>
				<div style="height: 45px;line-height:180%">
					<div>
						<div id="reviewErrorMsgDiv" class="rounded2px" style="display:none;color:#fff;background:rgba(0,0,0,0.5);padding:5px;" class="normalTextBold">후기를 조금 더 길게 작성해주세요.</div>
					</div>
				</div>
			</div>
			
			<div style="margin:40px auto;text-align:center">
				<div style="display:inline;padding:10px;border:1px solid #cdc;background:rgba(255,255,255,0.25);font-size:14px;" class="rounded5px pointer normalText" onclick="tarotRecord.tellersFeeBtnAction['cancel']()">취소</div>
				<div id="doneBtn" style="display:none;padding:10px;border:1px solid #cdc;background:rgba(255,255,255,0.25);" class="rounded5px pointer normalTextBold" onclick="tarotRecord.tellersFeeBtnAction['done'](1)">완료</div>
				<div id="writeReviewBtn" style="display:none;padding:10px;border:1px solid #cdc;background:rgba(255,255,255,0.25);" class="rounded5px pointer normalTextBold" onclick="tarotRecord.tellersFeeBtnAction['writeReview']()">완료</div>
			</div>
		</div>
	</div>
</div>

<div id="shareViewContainerDiv" style="position: fixed; top: 0; left: 0; display: none; background-color: rgba(0, 0, 0, 0.85); color: #ffffff; height: 100vh; width: 100%;z-index:100">
	<img src="/img/btn_cancel.png" style="margin:10px 0 0 10px;width:25px;height:25px" class="pointer" onclick="tarotRecord.showShareView()" />
	<div style="height:100vh;text-align:center">
		<div style="margin:50px 0;" class="largeTextBold">공유하기</div>
		<a id='shareFB' target='_blank' class="pointer"><img src="/img/facebook.png" /></a> &nbsp; 
		<a id='shareKS' target='_blank' class="pointer"><img src="/img/kakaostory.png"/></a> &nbsp;
		<a id='shareTW' target='_blank' class="pointer"><img src="/img/twitter.png" /></a>
	</div>
</div>

<textarea class="copytextarea1" style="position:absolute;width:0;height:0;margin:0;padding:0">제3자의 시각으로 나를 바라볼 수 있는 기회, 실제와 같은 타로점 TarotSecret http://www.tarotsecret.net</textarea>
<textarea class="copytextarea2" style="position:absolute;width:0;height:0;margin:0;padding:0">60220309404</textarea>
<script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
<script type='text/javascript'>
 /*
 //<![CDATA[
    // // 사용할 앱의 JavaScript 키를 설정해 주세요.
    Kakao.init('4d85777d0aab5cb1bffc655e3105e6a5');
    // // 카카오톡 링크 버튼을 생성합니다. 처음 한번만 호출하면 됩니다.
    Kakao.Link.createTalkLinkButton({
      container: '#kakaoBtnDiv',
      label: '제3자의 시각으로 나를 바라볼 수 있는 기회, 실제와 같은 타로점 TarotSecret',
      image: {
        src: 'http://v6.tarotcafe.net/img/new/img_tarotsecret_icon.png',
        width: '180',
        height: '180'
      },
      webButton: {
        text: 'TarotSecret',
        url: 'http://www.tarotsecret.net' // 앱 설정의 웹 플랫폼에 등록한 도메인의 URL이어야 합니다.
      }
    });
  //]]>
*/
    var recordId = null;
    var activityCommentId = null;
function TarotRecord(maxWidth,maxHeight){

	var tid = null;
	var uid = null;
	var delegate = null; this.delegate = null;
	var isShowPaypalGuide = false;
	this.isPostpay = "0"; var isPostpay = "0"; 
	this.counselingType = ""; var counselingType = ""; 

	var isEndOfPage = false;
	var pageNo = 0;
	
	this.resizeLayout = function(w,h){
		$("#recordContainerDiv").css({top : (h - $("#recordContainerDiv").height())/2, left : (w - $("#recordContainerDiv").width() )/2});
	}
	
	var tarotRecordLayer = new Layer(maxWidth, maxHeight);
	tarotRecordLayer.setDelegate(this);

	this.setCounselingType = function(type){
		this.counselingType = counselingType = type;
	}
	this.setPostpay = function(postpay){
		this.isPostpay = isPostpay = postpay;
	}
	this.showTellersFeeView = function(){

		$("#tellersFeeContainerDiv").css({height:maxHeight});
		$("#tellersFeeContainerDiv").fadeIn(300);

		var itemMaxWidth = 0;
		var itemMaxHeight = 0;
		for(var i = 1;i<=5;i++){
			itemMaxWidth = (itemMaxWidth > $("#feeItem"+i+"Div").width()) ? itemMaxWidth : $("#feeItem1Div").width();
			//itemMaxHeight = (itemMaxWidth > $("#feeItem"+i+"Div").height() + 20) ? itemMaxHeight : $("#feeItem1Div").height() + 20; 
		}

		for(var i = 1;i<=5;i++){
			$("#feeItem"+i+"Div").css({width : itemMaxWidth});//, height : itemMaxHeight});
		}
		
				$("#feeItem4Div").hide();
			
	}
	
	this.setDelegate = function(obj){
		this.delegate = delegate = obj;
	}

	this.setTid = function(obj){
		this.tid = tid = obj;
	}

	this.tellersFeeBtnAction = {
		pay: function(feeType) {

			if($("#feeTypeBtnContainerDiv").css('opacity') < 1 || tid == null || feeType == null) 
				return;

			if(feeType == 4){
				$("#writeReviewBtn").show();
				$("#writeReviewBtn").css({display:'inline'});
			}

			$("#feeTypeBtnContainerDiv").fadeOut(300,function(){
				
				$("#feeContentContainerDiv").fadeIn(300);
				$("#feeContent" + feeType + "Div").fadeIn(300);

				$.ajax({
					type:"post"
					, url:"/tarot.php"
					, async : false
		    	    , timeout : 30000
		    	    , cache : false
		    	    , dataType : "html"
			    	, data :  "action=updateTarotRecord&tid="+tid+"&counselingType="+ counselingType +"&feeType=" + feeType + "&isPostpay=" + isPostpay
		    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
		    	    , error : function(request, status, error) {
		        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (update tarot record)");
		    	    }
		    	    , success : function(response, status, request) {
		    	    	console.log(response);
		    	    	if(feeType == 5){
			    	    	location.href = '/signup';
		    	    	}
		        	   	if(response == 'error'){
		        	   		tarotRecordLayer.showDialogWithTitleAndMsg("타로점 기록을 갱신할 수 없습니다. 타로점을 종료하고 다음에 보시겠습니까?", "안내", "종료", "취소");
		        	   	}
		    	    }
				});
			});
		},
		blog: function(){
			tarotRecordLayer.showConfirmDialogWithTitleAndMsg("자신의 블로그에 TarotSecret 서비스 소개글을 작성해주세요. TarotSecret서비스 운영에 큰 힘이 됩니다.","안내",null,"확인");
			tarotRecord.showDoneBtn();
		},
		etcsns: function(){
			tarotRecordLayer.showConfirmDialogWithTitleAndMsg("자신의 홈페이지, 활동 중인 온라인 커뮤니티(카페 등)에 TarotSecret 서비스를 소개해주세요. TarotSecret서비스 운영에 큰 힘이 됩니다.","안내",null,"확인");
			tarotRecord.showDoneBtn();
		},
		etcmsg: function(){
			tarotRecordLayer.showConfirmDialogWithTitleAndMsg("KAKAO, LINE 외에 다른 메신저를 통해 TarotSecret 서비스를 소개해주세요. TarotSecret을 이용할 수 있는 경로가 복사되었습니다.","안내",null,"확인");
			tarotRecord.showDoneBtn();
			
			var copyTextarea = document.querySelector('.copytextarea1');
			copyTextarea.select();
			
			try {
			  var successful = document.execCommand('copy');
			  var msg = successful ? 'successful' : 'unsuccessful';
			  console.log('Copying text command was ' + msg);
			} catch (err) {
			  console.log('Oops, unable to copy');
			}
		},
		bankaccount: function(){
			tarotRecordLayer.showConfirmDialogWithTitleAndMsg("SC제일은행 602-20-309404(김현태) 계좌번호가 복사되었습니다.","안내",null,"확인");
			
			var copyTextarea = document.querySelector('.copytextarea2');
			copyTextarea.select();
			
			try{
				var successful = document.execCommand('copy');
				var msg = successful ? 'successful' : 'unsuccessful';
				
				tarotRecord.showDoneBtn();
			}catch(err){
				console.log('unable to copy');
			}
		},
		paypal: function(){
			if(isShowPaypalGuide == true) return;

			isShowPaypalGuide = true;
			tarotRecordLayer.showLayerWidthShortMessage("Paypal 지불 후 [완료] 버튼을 눌러주세요.","안내");
			tarotRecord.showDoneBtn();
		},
		writeReview: function(){
			if($.trim($('#tarotReviewTextarea').val()).length < 1) return;
			tarotRecord.updateRecordStatus('write_review');
		},
		cancel: function(){
			$("#feeContentContainerDiv").fadeOut(300,function(){
				$("#feeContent1Div").hide();
				$("#feeContent2Div").hide();
				$("#feeContent3Div").hide();

				$("#doneBtn").hide();
				$("#writeReviewBtn").hide();
				$("#tarotReviewTextarea").hide();
				$("#feeTypeBtnContainerDiv").fadeIn(300);
				isShowPaypalGuide = false;
			});
		},
		done: function(isPaid){
			tarotRecord.tellersFeeComplete(isPaid);
		}
	};

	this.showDoneBtn = function(){
		$("#doneBtn").fadeIn(300);
		$("#doneBtn").css({display:'inline'});
	}
	
	this.layerCancelBtnAction = function(){
		tarotRecordLayer.hideLayer();
	}

	this.layerOkBtnAction = function(){
		if(tarotRecordLayer.currentType == 'deleteQuestion'){
			tarotRecord.updateRecordStatus('delete');
		}else if(tarotRecordLayer.currentType == 'removeReply'){
			tarotRecord.activity(tarotRecordLayer.currentType, activityCommentId);
			tarotRecordLayer.hideLayer();
		}else{
			tarotRecord.tellersFeeBtnAction['done'](1);
		}
	}

	this.tellersFeeComplete = function(isPaid){
		$("#tellersFeeContainerDiv").fadeOut(300,function(){
			tarotRecord.showRecordStamp(isPaid);
		});
	}

	this.showRecordContent = function(){
		if($("#recordContentDiv").is(":visible")){
			$("#recordContentDiv").fadeOut(300);
			$("#showRecordContentBtnDiv").html("타로점 해석 전체 보기");
		}else{
			$("#recordContentDiv").fadeIn(300);
			$("#showRecordContentBtnDiv").html("타로점 해석 닫기");
		}
	}
	
	this.showRecord = function(counselingName, counselingDesc, counselingMentArray, isShowTellersFeeView, counselingType, totalCardCnt, deckPath, deckNo, shuffledCardsArray, isOwner, feeType, feeMsg, isOpen, isEnd, question, ownerUid, 
			answerMeans, answerMeansDesc, answerCardTitle, answerCardNo, username, profileFaceNo, recordDate, viewCnt, record_id, likeCnt, review){

		if($("#recordContainerDiv").is(":visible")){
			this.hideReport();
			return;
		}
		
		$("#recordCommentListDiv").html("");
		isEndOfPage = false;
		pageNo = 0;
		
		if(viewCnt != null && viewCnt != 0){
			$("#recordViewCntTable").show();
			$("#recordViewCnt").html(viewCnt);
		}else{ $("#recordViewCntTable").hide(); }

		if(username != null){$("#userInfoTable").show();}else{$("#userInfoTable").hide();}
		if(isOwner){$("#commandContainerDiv").show();}else{$("#commandContainerDiv").hide();}
		
		if(isOpen == 1){$("#shareBtnDiv").show();}else{$("#shareBtnDiv").hide();}
		if(likeCnt > 0){ $("#likeRecordCntTd").html(likeCnt); $("#likeRecordText").css({color : "#594b85"}); $("#likeRecordCntTd").css({color : "#594b85"});}else{$("#likeRecordCntTd").html("");}

		if($.trim(review).length > 0){ $("#reviewContainerDiv").show(); $("#reviewTextDiv").html(review); }else{$("#reviewContainerDiv").hide();}

		$("#recordStampDiv").hide();
		$("#recordContainerDiv").fadeIn(300);
		$('#recordContainerDiv').scrollTop(0);
		
		var recordContainerDivTop = 0;
		if(windowWidth > windowHeight)
		{
			$("#recordContainerDiv").css({top : windowHeight / 2, width : parseInt(windowWidth * 0.5), height : windowHeight - 20, left : parseInt((windowWidth - windowWidth * 0.5)/2)});
			recordContainerDivTop = 20;
		}else{
			$("#recordContainerDiv").css({top : windowHeight / 2, width : parseInt(windowWidth), height : windowHeight, left : parseInt((windowWidth - windowWidth)/2)});
		}


		if(ownerUid != null){
			uid = ownerUid;
			$('#userProfileImg').attr('src',"/img/face/face" + profileFaceNo + ".jpg");
			$('#userProfileName').html(username);
			$('#recordDateDiv').html(recordDate);
			$('#userProfileImg').click(function(){
				common.showProfile(uid, $('#userProfileImg'));
			});
			$('#userProfileName').click(function(){
				common.showProfile(uid, $('#userProfileName'));
			});
		}

		if(record_id != null){ recordId = record_id;this.getRecordCommentList(); }
		
		$("#recordQuestionDiv").html(question);

		$("#recordContainerDiv").animate({top : recordContainerDivTop},function(){
			if(isShowTellersFeeView){
				tarotRecord.showTellersFeeView(tid);
				$("#tarotReportHideBtnDiv").hide();
				$("#recordSettingDiv").hide();
			}else{
				(isOpen == "1") ? $("#recordOpenCheckBox").prop( "checked", true ) : $("#recordOpenCheckBox").prop( "checked", false );
			}
		});

		(feeType > 0) ? $("#recordTellersFeeBtn").hide() : $("#recordTellersFeeBtn").show();
		$("#recordTellersFeeContentDiv").html(feeMsg);

		$("#recordCounselingTitleNameDiv").html(counselingName);
		$("#recordCounselingTitleDescDiv").html(counselingDesc);
		var counselingTitleImageName = (counselingType > 100 && counselingType < 109) ? "_old" : counselingType;
		$("#recordCounselingTitleContainer").css({"background":"url(/img/new/counseling_type/img_ticket_title"+ counselingTitleImageName +".jpg)", 
												'background-repeat' : 'no-repeat', 'background-position':'center top',
												'-webkit-background-size' : 'cover', '-moz-background-size' : 'cover', '-o-background-size' : 'cover', 'background-size' : 'cover'}); 


		if(isEnd < 1){
			$("#answerOfTarotContainerDiv").hide();
			$("#recordTellersFeeDiv").hide();
			$("#recordOpenSettingContentDiv").hide();
			$("#recordStampDiv").hide();
			$("#answerOfTarotContainerDiv").hide();
			$("#showRecordContentBtnDiv").hide();
			$("#bottomBtnContainerDiv").hide();
			$("#replyInputContainerDiv").hide();
			return;
		}else{
			$("#answerOfTarotContainerDiv").show();
			$("#recordTellersFeeDiv").show();
			$("#recordOpenSettingContentDiv").show();
			$("#stoppedRecordNoticeDiv").hide();
			$("#answerOfTarotContainerDiv").show();
			$("#showRecordContentBtnDiv").show();
			$("#bottomBtnContainerDiv").show();
			$("#replyInputContainerDiv").show();
		}

		$("#shareFB").attr("href", 'https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Ftarotsecret.net%2Fforum%2FtarotRecord%2F' + tid);
		$("#shareKS").attr("href", '/share/socialMedia/kakaostory/' + tid);
		$("#shareTW").attr("href", 'https://twitter.com/share?url=http%3A%2F%2Ftarotsecret.net%2Fforum%2FtarotRecord%2F' + tid);
		
		var answerMeansArray = answerMeans.split('|');
		var answerMeansDescArray = answerMeansDesc.split('|');
		var answerCardTitleArray = answerCardTitle.split('|');
		var answerCardNoArray = answerCardNo.split('|');

		for(var i = 0; i < answerMeansArray.length; i++){
			$("#answerMeansDiv"+(i+1)).html(answerMeansArray[i]);
			$("#answerMeansDescDiv"+(i+1)).html(answerMeansDescArray[i]);
			$("#answerMeansDiv"+(i+1)).show();
			$("#answerMeansDescDiv"+(i+1)).show();

			var answerCardSrc = "/img/card_decks/"+deckPath+"/"+answerCardNoArray[i]+".jpg";
			$("#answerImg"+(i+1)).attr('src',answerCardSrc);                                 
			$("#answerImg"+(i+1)).show();
			
			$("#answerCardTitle"+(i+1)).html(answerCardTitleArray[i]);
			$("#answerCardTitle"+(i+1)).show();
		}

		
		$("#recordShuffledCardsContainerDiv").css({height : $("#recordContainerDiv").width() * 0.7, width : $("#recordContainerDiv").width() * 0.7,left : 0});
		$("#recordShuffledCardsContainerDiv").addClass("backgroundColor"+deckNo); 
		setTimeout(function(){
			tarotRecord.setShuffledCardPosition($("#recordShuffledCardsContainerDiv").width(), $("#recordShuffledCardsContainerDiv").width(), counselingType, "recordShuffledCard");
		},20);		

		for(var i = 0;i <= totalCardCnt;i ++){

			if(i < totalCardCnt){
				var cardSrc = "/img/card_decks/"+deckPath+"/"+shuffledCardsArray[i]+".jpg";
				$("#recordShuffledCard"+(i+1)).attr('src',cardSrc);
				$("#recordCounselingCard"+(i+1)).attr('src',cardSrc);
				$("#recordCounselingContainer"+(i+1)).show();
				$("#recordCounseling"+(i+1)).html(counselingMentArray[i]);
								
			}else{
				$("#recordCounselingContainerSummary").show();
				$("#recordCounselingSummary").html(counselingMentArray[i]);
			}
		}
	}

	this.showRecordStamp = function(isPaid){

		$("#recordStampDiv").show();
		if(isPaid){
			$("#recordTellersFeeContentDiv").html("지불 완료");
			$("#recordStampDiv").css({backgroundImage:"url('/img/new/img_stamp_black.png')",backgroundSize: 'cover', top : $("#recordTellersFeeDiv").position().top, left : $("#recordTellersFeeDiv").width()/2 + 30});
			$("#recordTellersFeeBtn").hide();

// 			if(delegate != 'undefined' && typeof delegate.reloadRecordByTid === 'function'){
// 				delegate.reloadRecordByTid(tid);
// 			}

		}else{
			$("#recordTellersFeeContentDiv").html("복채를 지불하지 않았습니다.");
			$("#recordStampDiv").css({backgroundImage:"url('/img/new/img_stamp_red.png')",backgroundSize: 'cover', top : $("#recordTellersFeeDiv").position().top, left : $("#recordTellersFeeDiv").width()/2 + 30});
		}

		if(delegate != 'undefined' && $.isFunction(delegate.completeTellersFee)){
			delegate.completeTellersFee();
		}
	}

	this.showRecordByTid = function(tid){

		if($("#recordContainerDiv").is(":visible")){
			this.hideReport();
			return;
		}
		
		if($.trim(tid).length < 1) return;
		this.setTid($.trim(tid));
		
		$.ajax({
			type:"post"
			, url:"/tarotRecord.php"
			, async : true
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "json"
	    	, data :  "action=getRecord&tid="+encodeURIComponent($.trim(tid))
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(e) {
        	   	console.log(e);
        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (tarot report)");
    	    }
    	    , success : function(json) {
        	    console.log(json);
    	    	if(json.status == "failed"){
    	    		commonLayer.showLayerWidthShortMessage(json.message,"안내");
    	    	}else{
    	    		var shuffledCardsArray = (json.counselingInfo.is_end > 0) ? json.counselingInfo.cards.split(',') : null;
    	    		var counselingMentArray;

    				var deckPath = "rider_waite"
        	    	if(json.counselingInfo.deck_no == 2){
        				deckPath = "retouching";
        			}else if(json.counselingInfo.deck_no == 3){
        				deckPath = "tarotcafe";
        			}

        			var isOwner = json.counselingInfo.is_owner;
        			
        			tarotRecord.setPostpay("1");
        			tarotRecord.setCounselingType(parseInt(json.counselingInfo.counseling_type));
        			
	    			tarotRecord.showRecord(json.counselingInfo.name, json.counselingInfo.desc, json.counselingMent, false, parseInt(json.counselingInfo.counseling_type), json.counselingInfo.total_cards_cnt, deckPath, 
	    	    			json.counselingInfo.deck_no, shuffledCardsArray, isOwner, parseInt(json.counselingFee.fee_type), json.counselingFee.fee_message, json.counselingInfo.is_open, json.counselingInfo.is_end, json.counselingInfo.question, 
	    	    			json.userInfo.uid, json.answerOfTarot.means, json.answerOfTarot.means_desc, json.answerOfTarot.card_title, json.answerOfTarot.card_no,
	    	    			json.userInfo.username, json.userInfo.profile_face_no, json.counselingInfo.date, json.counselingInfo.view_cnt, json.counselingInfo.record_id, json.counselingInfo.like_cnt, json.counselingInfo.review);

	    			if(parseInt(json.counselingFee.fee_type) > 0 && json.counselingInfo.is_end > 0){
	    				tarotRecord.showRecordStamp(true);
	    			}
    	    	}
    	    }
		});
	}

	this.activity = function(activityType,id){

		if(activityType == null || activityType == ""){ return; }
		var data = "action=activity&type="+ activityType +"&id="+encodeURIComponent($.trim(id));

				if(activityType == "writeComment"){
			data += "&content=" + encodeURIComponent($.trim($("#recordCommentTextarea").val()));
		}

		$.ajax({
			type:"post"
			, url:"/tarotRecord.php"
			, async : true
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "json"
	    	, data :  data
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(e) {
        	   	console.log(e);
        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (record activity)");
    	    }
    	    , success : function(json) {
				
				if(json.status == "failed"){
					commonLayer.showLayerWidthShortMessage(json.message,"안내");
				}else{
					if(activityType == 'likeRecord'){
						var likeCnt = $("#likeRecordCntTd").html();

						if(json.status == "plus"){
							$("#likeRecordText").css({color : "#594b85"});
							$("#likeRecordCntTd").css({color : "#594b85"});
							likeCnt++;
						}else{
							$("#likeRecordText").css({color : '#000'});
							likeCnt--;
						}

						$("#likeRecordCntTd").html(likeCnt);
					}else if(activityType == 'writeComment'){
						var comments = $("#recordCommentListDiv").html();
						$("#recordCommentListDiv").fadeOut(150,function(){
							$("#recordCommentListDiv").html(json.comment + comments);
							$("#recordCommentListDiv").fadeIn(300);
						});
					}else if(activityType == 'removeReply'){
						$("#comment"+id).fadeOut(300);
					}
				}
			}
		});
	}

	this.updateRecordStatus = function(updateType){

		if(updateType == 'deleteQuestion'){
			tarotRecordLayer.currentType = updateType;
			tarotRecordLayer.showConfirmDialogWithTitleAndMsg("이 타로점을 삭제하시겠습니까?", "안내", "삭제", "취소");
			return;
		}

		var review = (updateType == 'write_review' || updateType == 'modify_review') ? $("#tarotReviewTextarea").val() : "";
		//alert("action=updateRecordStatus&tid=" + encodeURIComponent($.trim(tid)) + "&type=" + encodeURIComponent($.trim(updateType)) + "&review=" + encodeURIComponent($.trim(review)));
		$.ajax({
			type:"post"
			, url:"/tarotRecord.php"
			, async : true
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "json"
	    	, data :  "action=updateRecordStatus&tid=" + encodeURIComponent($.trim(tid)) + "&type=" + encodeURIComponent($.trim(updateType)) + "&review=" + encodeURIComponent($.trim(review))
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(e) {
        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (tarot report)");
    	    }
    	    , success : function(json) {

    	    	if(json.status == "failed"){
    	    		commonLayer.showLayerWidthShortMessage(json.message,"안내");
    	    	}else{
        	    	
        	    	if(updateType == 'open'){
            	    
        	    		commonLayer.showLayerWidthShortMessage("변경되었습니다.","안내");
        	    	}else if(updateType == 'write_review'){
        	    	
        	    		commonLayer.showLayerWidthShortMessage("등록되었습니다. 타로점을 마칩니다.","안내");
        	    		tarotRecord.tellersFeeComplete(1);
            	    }else{
            	    
        	    		commonLayer.showLayerWidthShortMessage("삭제되었습니다.","안내");
//         	    		if(delegate != 'undefined' && $.isFunction(delegate.reloadRecordByTid)){
//         					delegate.reloadRecordByTid(tid);
//         				}
        	    		tarotRecord.hideReport();
        	    	}
    	     	}

    	    }
		});
	}

	////선택한 카드가 배치되는 곳
	this.setShuffledCardPosition = function(containerWidth,containerHeight, counselingType, objName){
		console.log("setShuffledCardPosition" + counselingType);
		objName = (objName == null) ? "shuffledCard" : objName;

		if(objName == "shuffledCard")
			$("#" + objName + "sContainerDiv").css({top : $("#shuffledCardsContainerDiv").position().top, left : (windowWidth - containerWidth) / 2, width: containerWidth, height : containerHeight});

		var cellWidth, cellHeight, cardTop, cardLeft;
		
		switch(counselingType)
		{
			case 101 :
			case 1 :
				cellWidth = parseInt($("#" + objName + "sContainerDiv").width() / 4);
				cellHeight = parseInt($("#" + objName + "sContainerDiv").height() / 3);
				var cellHeight2 = parseInt($("#" + objName + "sContainerDiv").height() / 4);
				var cellHeightPadding = 15;
				var cardHeight = parseInt(($("#" + objName + "sContainerDiv").height() - cellHeightPadding * 5) / 4);

				$("#" + objName + "1").css({height : cardHeight});
				var cardWidth = parseInt(cardHeight * 0.577);

				cardLeft = parseInt(cellWidth * 1 + (cellWidth-cardWidth)/2);
				cardTop = parseInt(cellHeight * 1 + (cellHeight-cardHeight)/2);
				var cardTop2 = parseInt(cellHeight2 * 3 + (cellHeight2-cardHeight)/2);
				$("#" + objName + "1").css({left : cardLeft, top : cardTop});
				$("#" + objName + "2").css({left : cardLeft, top : cardTop, height : cardHeight });
				$("#" + objName + "2").css('transform','rotate(90deg)');

				$("#" + objName + "3").css({left : cardLeft, top : cardTop + cellHeight, height : cardHeight});
				$("#" + objName + "4").css({left : cardLeft - cellWidth, top : cardTop, height : cardHeight});
				$("#" + objName + "5").css({left : cardLeft, top : cardTop - cellHeight, height : cardHeight});
				$("#" + objName + "6").css({left : cardLeft + cellWidth, top : cardTop, height : cardHeight});

				$("#" + objName + "7").css({left : cardLeft + cellWidth * 2, top : cardTop2, height : cardHeight});
				$("#" + objName + "8").css({left : cardLeft + cellWidth * 2, top : cardTop2 - cellHeight2, height : cardHeight});
				$("#" + objName + "9").css({left : cardLeft + cellWidth * 2, top : cardTop2 - cellHeight2 * 2, height : cardHeight});
				$("#" + objName + "10").css({left : cardLeft + cellWidth * 2, top : cardTop2 - cellHeight2 * 3, height : cardHeight});

			break;

			case 102 :
			case 2 :
				cellWidth = parseInt($("#" + objName + "sContainerDiv").width() / 3);
				cellHeight = parseInt($("#" + objName + "sContainerDiv").height() / 2);
				var cellHeightPadding = 20;
				//var cardHeight = parseInt(($("#" + objName + "sContainerDiv").height() - cellHeightPadding * 2) / 2);
				var cardHeight = parseInt($("#" + objName + "sContainerDiv").height() / 2);
				var cardWidth = parseInt(cardHeight * 0.577);
				if((cardWidth * 3 + 15 * 4) > windowWidth){
					cardWidth = (windowWidth - 15 * 4) / 3;
					cardHeight = cardWidth * 1.732;
				}
				
				
				cardLeft = parseInt((cellWidth-cardWidth)/2);
				cardTop = parseInt(($("#" + objName + "sContainerDiv").height()-cardHeight)/2);

				$("#" + objName + "1").css({left : cardLeft, top : cardTop, height : cardHeight});
				$("#" + objName + "2").css({left : cardLeft + cellWidth, top : cardTop, height : cardHeight });
				$("#" + objName + "3").css({left : cardLeft + cellWidth * 2, top : cardTop, height : cardHeight});
			break;

			case 108 :
			case 8 :
				cellWidth = parseInt($("#" + objName + "sContainerDiv").width() / 3);
				console.log($("#" + objName + "sContainerDiv").width());
				console.log(cellWidth);
				cellHeight = parseInt($("#" + objName + "sContainerDiv").height() / 3);
				var cellHeightPadding = 20;
				var cardHeight = parseInt(($("#" + objName + "sContainerDiv").height() - cellHeightPadding * 4) / 3);
	
				$("#" + objName + "1").css({height : cardHeight});
				var cardWidth = parseInt(cardHeight * 0.577);
	
				cardLeft = parseInt(cellWidth * 1 + (cellWidth-cardWidth)/2);
				cardTop = parseInt(cellHeight * 2 + (cellHeight-cardHeight)/2);

				$("#" + objName + "1").css({left : cardLeft, top : cardTop});
				$("#" + objName + "2").css({left : cardLeft - cellWidth/2, top : cardTop - cellHeight, height : cardHeight});
				$("#" + objName + "3").css({left : cardLeft + cellWidth/2, top : cardTop - cellHeight, height : cardHeight});
				$("#" + objName + "4").css({left : cardLeft - cellWidth, top : cardTop - cellHeight*2, height : cardHeight});
				$("#" + objName + "5").css({left : cardLeft + cellWidth, top : cardTop - cellHeight*2, height : cardHeight});
			break;

			case 103 : case 104 : case 105 : case 106 : case 107 :
			case 3 : case 4 : case 5 : case 6 : case 7 :
				cellWidth = parseInt($("#" + objName + "sContainerDiv").width() / 3);
				cellHeight = parseInt($("#" + objName + "sContainerDiv").height() / 3);
				var cellHeightPadding = 20;
				var cardHeight = parseInt(($("#" + objName + "sContainerDiv").height() - cellHeightPadding * 4) / 3);

				$("#" + objName + "1").css({height : cardHeight});
				var cardWidth = parseInt(cardHeight * 0.577);

				cardLeft = parseInt(cellWidth * 1 + (cellWidth-cardWidth)/2);
				cardTop = parseInt(cellHeight * 1 + (cellHeight-cardHeight)/2);

				//alert("cellWidth : " + cellWidth + ", cardWidth : " + cardWidth);
				
				$("#" + objName + "1").css({left : cardLeft, top : cardTop});
				$("#" + objName + "2").css({left : cardLeft, top : cardTop, height : cardHeight });
				$("#" + objName + "2").css('transform','rotate(90deg)');

				$("#" + objName + "3").css({left : cardLeft, top : cardTop + cellHeight, height : cardHeight});
				$("#" + objName + "4").css({left : cardLeft - cellWidth, top : cardTop, height : cardHeight});
				$("#" + objName + "5").css({left : cardLeft, top : cardTop - cellHeight, height : cardHeight});
				$("#" + objName + "6").css({left : cardLeft + cellWidth, top : cardTop, height : cardHeight});
				$("#" + objName + "7").css({left : cardLeft + cellWidth, top : cardTop - cellHeight, height : cardHeight});

			break;
		}

		//$("#currentCardGuideDiv").css({left : cardLeft, top : cardTop, width : cellWidth, height : cellHeight});
		//$("#shuffledCard8").css({left : cardLeft + cellWidth * 2, top : cardTop - cellHeight, height : cardHeight});		
	}
	
	this.hideReport = function(){
		$("#recordContainerDiv").fadeOut(300,function(){
			$("#recordContainerDiv").hide();
		});
	}

	this.checkReviewInput = function(textareaObj){

		if($.trim($(textareaObj).val()).length < 10){
			$("#writeReviewBtn").animate({opacity:0.5},250);
		}else{ 
			$("#writeReviewBtn").animate({opacity:1.0},250);
		}

		if($.trim($("#tarotReviewTextarea").val()).length < 10){
			if($("#reviewErrorMsgDiv").is(":visible") == false){ $("#reviewErrorMsgDiv").fadeIn(300); $("#reviewErrorMsgDiv").css({display:'inline'});}
		}else{
			if($("#reviewErrorMsgDiv").is(":visible")){ $("#reviewErrorMsgDiv").fadeOut(300);}
		}
	}

	
	this.getRecordCommentList = function()
	{
		if(isEndOfPage || $("#tarotRecordActivityIndicatorDiv").is(":visible") || recordId == null) return;

		$.ajax({
			type : "POST"
			, async : true
			, url : "/tarotRecord.php"
			, dataType : "html"
			, timeout : 30000
			, cache : false
			, data : "action=getCommentList&record_id="+ recordId +"&pageNo=" + pageNo + "&uid=" + uid
			, contentType: "application/x-www-form-urlencoded; charset=UTF-8"
			, error : function(request, status, error) {
				alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (comment list)");
			}
			, success : function(response, status, request) {
				$("#recordCommentListDiv").append(response);

				if(response.length < 150){
					isEndOfPage = true;
				}else{
					isEndOfPage = false;
					pageNo += 20; 
				}
			}
			, beforeSend: function() {
				$("#tarotRecordActivityIndicatorDiv").show(); 
	  	    }
	  	    , complete: function() {
	  	    	$("#tarotRecordActivityIndicatorDiv").hide();
	  	    }
  	    
		});
	}
	
	this.showCategoryMenu = function(){
		if($("#tarotCategoryContainerDiv").is(":visible")){
			$("#tarotCategoryContainerDiv").fadeOut(300);
			$("#forumCategoryBtnImg").attr('src','/img/new/btn_top_menu.png');
			return;
		}
		$("#tarotCategoryContainerDiv").fadeIn(300);
		$("#forumCategoryBtnImg").attr('src','/img/new/btn_menu_cancel.png');
	}

	this.reloadRecordByTid = function(){		
	}

	this.showShareView = function(){

		if($("#shareViewContainerDiv").is(":visible")){
			$("#shareViewContainerDiv").fadeOut(300);
			return;
		}
		$("#shareViewContainerDiv").fadeIn(300);

		$.ajax({
			type:"post"
			, url:"/share.php"
			, async : false
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "html"
	    	, data :  "action=insertStatistics&counselingType="+ tarotRecord.counselingType
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(request, status, error) { console.log("statistics share error"); }
    	    , success : function(response, status, request) { console.log(response + "statistics share success"); }
		});		
	}

	this.confirm = function(type, id){
		if(type == 'removeReply'){
			activityCommentId = id;
			tarotRecordLayer.currentType = type;
			tarotRecordLayer.showConfirmDialogWithTitleAndMsg("댓글을 삭제하시겠습니까?", "안내", "삭제", "취소");
		}
	}
}


$(window).scroll(function(){
	if($(window).scrollTop() + $(window).height() == $(document).height()){
		tarotRecord.getRecordCommentList();
	}
});

$(function(){
	tarotRecord = new TarotRecord(windowWidth,windowHeight);

	tarotRecordLayer = new Layer(windowWidth, windowHeight);
});

</script>
<div style='overflow:hidden;height:100vh'><!-- 기본 뷰 -->
<div id="loadActivityDiv" style="width: 100%; height: 400px; margin: auto; text-align: center; line-height: 400px;"></div>
<img id="counselingQuitBtnDiv" src="/img/btn_cancel.png" style="top:0;margin:10px;width:25px;height:25px;z-index:99;position:absolute;display:none" class="pointer" onclick="chat.btnAction('cancel')" />
<div id="currentShuffleCardDescDiv" style="position: fixed; top: 0; left: 0; display: none; background-color: rgba(0, 0, 0, 0.85); color: #ffffff; height: 100vh; width: 100%;z-index:98;overflow-y:auto">
	<div id="shuffleTitleDiv" style="margin:50px 0 0 0;text-align:center;font-weight:500;font-size:24px"></div>
	<div id="shuffleTitleDesc" style="margin:10px auto;text-align:center;font-weight:100;font-size:14px;width:80%"></div>
	<div id="shuffleTitleQuestion" style="margin:25px auto;text-align:center;font-weight:100;font-size:14px;width:80%"></div>
	<div id="shufflePositionNo" style="margin:30px auto 15px 0;text-align:center;font-weight:100;font-size:18px"></div>
	<center><img id="shufflePositionCardImg" style="margin:10px auto" /></center>
	<div id="shufflePositionDesc" style="width:80%;margin:10px auto 30px auto;line-height:160%" class="normalTextThin centerText"></div>
</div>
<script>
//document.ontouchmove = function(e) {e.preventDefault()};
window.onbeforeunload = function () { return '타로점을 그만보고 페이지를 벗어나시겠습니까??'; }
$(function() {
 	chat = new Chat(windowWidth, windowHeight);
 	chat.initialize();

 	shuffle = new Shuffle(windowHeight);
	shuffle.initialize(0);

	counseling = new Counseling(windowWidth,windowHeight);
	counseling.initialize();

	counselingLayer = new Layer(windowWidth, windowHeight);
	counselingLayer.setDelegate(counseling);

	$(window).resize(function(){
		h = $(window).height();
		w = $(window).width();
	    chat.resizeLayout(w,h);
	    shuffle.resizeLayout(w,h);
	    tarotRecord.resizeLayout(w,h);
	}).resize();
});


</script><script>
function Counseling(maxWidth,maxHeight){

	chat.setDelegate(this);
	shuffle.setDelegate(this);
	tarotRecord.setDelegate(this);
	console.log(tarotRecord.delegate);

	counselingStep = "";

	var counselingGuideMentArray;
	var counselingMentArray;
	var answerOfTarotArray;
	var counselingCardPointArray;
	var counselingName = "";
	var counselingDesc = "";
	var counselingTid = 0;
	var parentTid = 0;

	this.initialize = function(){

		setTimeout(function(){ $("#counselingQuitBtnDiv").fadeIn(300); });
		var barHeight = maxHeight/4;

						
			if(shuffle.deckNo == 0){
				counselingStep = "selectTarotDeck"; 					
			}else{
				counselingStep = "inputQuestionForCounselingComplete";
				shuffle.showTarotDummysWithCompleteCallFlag();
			}
			
			shuffle.question = "오늘의 운세";
			shuffle.tarotCounselingSelected(null,2,3);
						
			setTimeout(function(){ counseling.chatBtnAction['next'](); },750);
				
		
	}

///////////////////////////////////Chat Delegate Methods
	this.chatBtnAction = {
		next: function() {
			console.log(counselingStep);
			switch(counselingStep)
			{
				case "startGuide1" :
					shuffle.showGuide('1-1');
					chat.showMsg("우리는 살면서 많은 결정을 합니다.","MASTER");
				break;
				case "startGuide2" :
					shuffle.showGuide('2-1');
					chat.hide();
				break;
				case "startGuide3" :
					shuffle.showGuide('3-1');
					chat.hide();
				break;
				case "startGuide4" :
					shuffle.showGuide('4-1');
					chat.hide();
				break;
				case "startGuide5" :
					shuffle.showTarotMenu();
					chat.showMsg("이제 타로점을 보세요. 로그인을 하시면 다양한 타로점을 보실 수 있습니다.","MASTER");
				break;
				case "sayHello" :
					setTimeout(function(){ 
						chat.showMsg("어서 오세요. 타로점을 시작하겠습니다. 차분한 심호흡과 함께 고민을 마음에 떠올려주세요. 준비가 끝나면 버튼을 눌러주시기 바랍니다.","MASTER");
						setTimeout(function(){ chat.showBtn('next'); },900); 
					}, 500);
					
					//카드 애니메이션 테스트
					if(shuffle.deckNo > 0){
						counselingStep = "selectDetailCounseling";
						shuffle.showTarotDummysWithCompleteCallFlag(false); 					
					}else{
						counselingStep = "selectTarotDeck";
					}
					counseling.statistics("1");
					
				break;
				case "selectTarotDeck" :
					shuffle.showTarotDecksSelectView();
					setTimeout(function(){ chat.showMsg("어떤 타로덱으로 점을 보실지 선택하세요. 색상이나 그림은 조금 다르지만 카드의 의미는 크게 다르지 않습니다.","MASTER");},500);
					counselingStep = "selectDetailCounseling";
				break;
				case "selectDetailCounseling" :
					counseling.statistics("2");
					counselingStep = "inputQuestionForCounseling";
					shuffle.showTarotCounselingSelectView();
					chat.hide();
				break;
				case "inputQuestionForCounselingComplete" :
					counseling.statistics("4");
					shuffle.hideTarotCounselingSelectView();
					counselingStep = "shuffleTarotCard";
					chat.hide();
					setTimeout(function(){ chat.showBtn('next'); },1250);
				break;
				case "shuffleTarotCard" :
					counseling.statistics("5");
					shuffle.playShuffleAnimation();
					chat.hide();
					setTimeout(function(){ chat.showMsg("마음을 차분히 하시고 계속 카드에 집중하세요. 사람이 섞는 것과 같은 알고리즘으로 카드를 섞습니다.","MASTER"); },1000);
				break;

				case "selectPickCardType" :
					counseling.statistics("6");
					chat.hide();
					setTimeout(function(){ chat.showMsg("다 섞은 카드가 여기에 있습니다. 이제 카드들을 각각 정해진 위치에 배열하고 타로점을 시작합니다.<br/>혹시 카드를 직접 선택하시겠습니까? 아니면 방금 섞은 카드를 그대로 사용하시겠습니까?","MASTER"); },1000);
					setTimeout(function(){ chat.showBtn('useShuffled','pickOut'); },1250);
				break;
				case "startCounseling" :
					counseling.statistics("7");
					counselingStep = "counseling";

					$.ajax({
						type:"post"
						, url:"/tarot.php"
						, async : false
			    	    , timeout : 30000
			    	    , cache : false
			    	    , dataType : "html"
				    	, data :  "action=insertTarotRecord&parentTid="+ parentTid +"&counselingType="+ shuffle.counselingType +"&cards="+ shuffle.selectedCardsList +"&question="+ encodeURIComponent(shuffle.question) +"&deckNo="+shuffle.deckNo
			    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
			    	    , error : function(request, status, error) {
			        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (write tarot record)");
			    	    }
			    	    , success : function(response, status, request) {
				    	    console.log(response);
			        	   	if(response != 'error'){
			        	   		counselingTid = response;
			        	   		tarotRecord.setTid(counselingTid);
			        	   		setTimeout(function(){ chat.hide(); }, 1000);
			        	   		setTimeout(function(){ chat.showMsg("이제 타로점을 시작합니다. 마음을 비우시고 차분하게 점에 집중해주세요. 도중에 마음이 불편하거나 더 큰 고민이 생긴다면 중단하세요. 중단한 점은 오늘에 한하여 다시 보실 수 있습니다.","MASTER"); }, 1500);
								setTimeout(function(){ chat.showBtn('next'); }, 2000);
			        	   	}else{
			        	   		counselingLayer.showConfirmDialogWithTitleAndMsg("타로점 기록을 남길 수 없습니다. 타로점을 종료하고 다음에 보시겠습니까?", "안내", "종료", ".취소.");
			        	   	}
			    	    }
					});
					
				break;
				case "counseling" :

					chat.hide();
					shuffle.currentCard++;
					
					if(shuffle.currentCard == shuffle.totalCardCnt + 2){
						counseling.statistics("9");
						//복채 및 후기 작성
						$("#counselingQuitBtnDiv").hide();
						feeType = 0;
						feeMsg = "지불하기";
						tarotRecord.setPostpay("0");
						tarotRecord.setCounselingType(shuffle.counselingType);
						tarotRecord.showRecord(counselingName, counselingDesc, counselingMentArray, true, shuffle.counselingType, shuffle.totalCardCnt, shuffle.deckPath, shuffle.deckNo, shuffle.selectedCardsListArray, true, feeType, feeMsg,true,true, shuffle.question, null,
								answerOfTarotArray[0], answerOfTarotArray[3], answerOfTarotArray[1], answerOfTarotArray[2], null, null, null, null, null, 0, null);
						
						chat.hideBtn('next');
					}else{

						if(shuffle.currentCard == shuffle.totalCardCnt + 1){
							//카운슬링 마무리 멘트
							shuffle.hideActionCard();
							counseling.statistics("8");
							$.ajax({
								type:"post"
								, url:"/tarot.php"
								, async : false
					    	    , timeout : 30000
					    	    , cache : false
					    	    , dataType : "html"
						    	, data :  "action=updateTarotRecord&tid="+counselingTid+"&counselingType="+ shuffle.counselingType +"&feeType=0&isPostpay=0"
					    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
					    	    , error : function(request, status, error) {
					        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (update tarot record)");
					    	    }
					    	    , success : function(response, status, request) {
						    	    //console.log(response);
					        	   	if(response == 'error'){
					        	   		counselingLayer.showConfirmDialogWithTitleAndMsg("타로점 기록을 갱신할 수 없습니다. 타로점을 종료하고 다음에 보시겠습니까?", 안내, "종료", ".취소.");
					        	   	}
					    	    }
							});
						}

						
						setTimeout(function(){ 
							chat.showMsg(counselingMentArray[shuffle.currentCard-1],"MASTER");

							if(shuffle.currentCard >= shuffle.totalCardCnt){
								chat.showBtn('next');
								
							}else{
								chat.showBtn('next');
								//현재 개발 테스트
								//shuffle.showReport(counselingName, counselingDesc, counselingMentArray);
								//tellersFee.initialize("p1enmoZnd6");
								//shuffle.showReportStamp(1);
							}
						},1000);
						
						chat.hideBtn('next');
						shuffle.showCurrentCard(counselingCardPointArray[shuffle.currentCard-1]);
						
					}
					
				break;
			}
		},
		yes: function() {
						shuffle.hideTarotDecksSelectView();
			shuffle.setUserDeckType();
						$.ajax({
				type:"post"
				, url:"/tarot.php"
				, async : false
				, timeout : 30000
				, cache : false
				, dataType : "html"
				, data :  "action=updateDeckInfo&deck="+shuffle.deckNo
				, contentType: "application/x-www-form-urlencoded; charset=UTF-8"
				, error : function(request, status, error) {
					alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (update deck info)");
				}
				, success : function(response, status, request) {
					//실패하더라도 점이 멈추진 않는다.
						    	    }
			});
					},
		cancel: function() {
			//점을 보는 도중 카드에 대한 설명의 레이어가 떠있으면 그걸 없애주고, 아니면 종료해준다.
			if($("#currentShuffleCardDescDiv").is(":visible") == false)
			{
								counselingLayer.showConfirmDialogWithTitleAndMsg("타로점을 그만보시겠습니까?","종료","종료","취소");
							}else{
				$("#counselingQuitBtnDiv").fadeOut(200,function(){
					$("#currentShuffleCardDescDiv").fadeOut(200,function(){
						setTimeout(function(){
							$("#counselingQuitBtnDiv").fadeIn(300);
						},1000);
					});
				});
			}
			
		},
		retry: function() {
			shuffle.playShuffleAnimation();
			chat.hide();
			setTimeout(function(){ chat.showMsg("카드를 다시 한 번 섞습니다. 마음을 차분히 하시고 계속 카드에 집중하세요. 사람이 섞는 것과 같은 알고리즘으로 카드를 섞습니다.","MASTER"); },1000);
		},
		useShuffled: function(){
			chat.hideBtn('useShuffled','pickOut');
			chat.hideToBottomWithAnimation();
			shuffle.expandCardOnTable(maxHeight, shuffle.dummys, shuffle.dummysWidth, shuffle.dummysHeight);
		},
		pickOut: function(){
			shuffle.expandDummys(maxHeight, shuffle.dummys, shuffle.dummysWidth, shuffle.dummysHeight);
			chat.hide();
			chat.hideToBottomWithAnimation();
			chat.hideBtn('useShuffled','pickOut');
		}
	};

	this.statistics = function(step){
		$.ajax({
			type:"post"
			, url:"/tarot.php"
			, async : false
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "html"
	    	, data :  "action=insertStatistics&step="+ step +"&counselingType="+ shuffle.counselingType
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(request, status, error) { console.log("statistics " + step + " error"); }
    	    , success : function(response, status, request) { console.log(response + "statistics " + step + " success"); }
		});
	}

	this.layerCancelBtnAction = function(){
		counselingLayer.hideLayer();
	}

	this.layerOkBtnAction = function(){
		counseling.quit();
	}

	this.quit = function(){

		$("#chatContentDiv").fadeOut(300);
		$("#shuffleContainerDiv").fadeOut(300,function(){
			location.href = '/tarot';
		});
	}

	
	this.showCardInfo = function(cardPositionNo){
		//console.log(shuffle);
		//console.log(shuffle.shuffledCardsArray);
		//console.log(cardPositionNo);
		//counselingMentArray[shuffle.currentCard];
		var cardSrc = "/img/card_decks/"+shuffle.deckPath+"/"+shuffle.selectedCardsListArray[cardPositionNo-1]+".jpg";
		$("#shuffleTitleDiv").html(counselingName);
		$("#shuffleTitleDesc").html(counselingDesc);

		//if(shuffle.counselingType != 2){//오늘의 점이 아니면 고민 내용을 보여준다. 
			$("#shuffleTitleQuestion").html(shuffle.question);
// 		}else{
// 			$("#shuffleTitleQuestion").hide();
// 		}
		
		$("#shufflePositionCardImg").attr('src',cardSrc);
		$("#shufflePositionNo").html(cardPositionNo);

		if(cardPositionNo > shuffle.currentCard){
			$("#shufflePositionDesc").html("이 카드는 아직 해석하기 전의 카드 입니다. 이미 해석을 본 카드만 해석을 보실 수 있습니다.");
		}else{
			$("#shufflePositionDesc").html(counselingMentArray[cardPositionNo-1]);
		}

		$("#currentShuffleCardDescDiv").fadeIn(300);
	}
	


///////////////////////////////////Shuffle delegate method
	this.deckSelectActionComplete = function(deckNo){
		var chatMsg = "";
		switch(deckNo){
			case 1 : chatMsg = "「 Rider Waite - original 」"; break;
			case 2 : chatMsg = "「 Rider Waite - retouching 」"; break;
			case 3 : chatMsg = "「 Rider Waite - tarotcafe 」"; break;
		}
		chat.hideBtn("yes","cancel");
		chat.showMsg(chatMsg + " " + "이 타로덱으로 선택하시겠습니까?","MASTER");
		setTimeout(function(){ chat.showBtn("yes","cancel"); },1000);
	}
	
	this.showTarotCounselingSelectViewComplete = function(){
		chat.showMsg("어떤 고민 때문에 타로점을 보러 오셨는지 선택해주세요.","MASTER");
	}

	this.hideTarotCounselingSelectViewComplete = function(){
				chat.showMsg("오늘의 타로점을 시작하겠습니다. 자, 이제 카드를 섞습니다. 카드를 섞는 동안 정신을 집중해주세요.","MASTER");
			}

	this.hideTarotDecksSelectViewComplete = function(){
		shuffle.showTarotDummysWithCompleteCallFlag(true);
	}
	
	this.showTarotDummysWithCompleteCallFlagComplete = function(){
				counselingStep = "inputQuestionForCounselingComplete";
				this.chatBtnAction['next']();
	}
	
	this.tarotCounselingSelectedComplete = function(){
		chat.hide();
		$.ajax({
			type:"post"
			, url:"/tarot.php"
			, async : false
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "html"
	    	, data :  "action=getCounselingGuideMent&counselingType="+shuffle.counselingType
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(request, status, error) {
        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (tarot guide ment)");
    	    }
    	    , success : function(response, status, request) {
        	    //alert(response);
        	    counseling.statistics("3");
        	    console.log(response);
    	    	counselingGuideMentArray = null;
    	    	counselingGuideMentArray = response.split('|');
    	    	counselingName = counselingGuideMentArray[1];
    	    	counselingDesc = counselingGuideMentArray[2];
    	    	    	    }
		});
	}

	this.shuffleCardsAnimationComplete = function(){
		chat.hide();
		
		setTimeout(function(){ chat.showMsg("카드를 다 섞었습니다. 마음을 가다듬으시고 이제 타로점을 시작하시기 바랍니다. 만약 더 섞고 싶으시면 1~2회 정도 더 섞으시기 바랍니다.","MASTER"); chat.showBtn('start','retry'); },500);
		
		counselingStep = "selectPickCardType";
	}

	this.selectedATarotCard  = function(totalCardNo, currentCardNo){

		if(totalCardNo-1 >= currentCardNo){

			if(shuffle.isUseShuffled){
				shuffle.autoSelectedCard(currentCardNo, maxHeight, shuffle.dummys, shuffle.dummysWidth, shuffle.dummysHeight);
			}else{
				//chat.showMsg("카드를 총 8장 뽑습니다. 고민의 현재 상태, 방해물, 발단, 과거, 미래, 결론 등의 카드 입니다. (총 " + totalCardNo +"장 중 " + currentCardNo +"장 )","MASTER","change");
				var pickupTitleMent = "";
				if(totalCardNo-1 > currentCardNo){
					shuffle.showNextPickupTitle("이번에 선택하실 카드",counselingGuideMentArray[currentCardNo+3]);
				}else{
					shuffle.showNextPickupTitle("마지막으로 선택하실 카드",counselingGuideMentArray[currentCardNo+3]);
				}
			}
		}else{

			shuffle.hideExpandDummys();
			
			if(shuffle.isUseShuffled){
				shuffle.dummys.fadeOut(250);
				chat.showMsg("이제 카드를 모두 펼쳤습니다.","MASTER");
			}else{
				chat.showMsg("카드를 모두 선택해주셨습니다. 이제 타로점을 시작합니다.","MASTER");
			}
			counselingStep = "startCounseling";
			
			$.ajax({
				type:"post"
				, url:"/tarot.php"
				, async : false
	    	    , timeout : 30000
	    	    , cache : false
	    	    , dataType : "html"
				, data :  "action=getCounselingMent&counselingType="+shuffle.counselingType+"&selectedCards="+shuffle.selectedCardsList
				, contentType: "application/x-www-form-urlencoded; charset=UTF-8"
				, error : function(request, status, error) {
					chat.showMsg("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (please check a internet access check)","MASTER");
				}
	    	    , success : function(response, status, request) {

					counselingMentArray = null;
					counselingCardPointArray = null;
					answerOfTarotArray = null;
					tempArray = response.split('[!');

					counselingCardPointArray = tempArray[0].split('|');
					counselingMentArray = tempArray[1].split('|');
					answerOfTarotArray = tempArray[2].split('[[');

					counseling.chatBtnAction['next']();
				}
			});
		}
	}

	this.inputQuestionComplete = function(){
		chat.hide();
		counselingStep = "inputQuestionForCounselingComplete";
		this.chatBtnAction['next']();
	}

	this.expandDummysComplete = function(){
		shuffle.showTarotCardPickupInterface();
		shuffle.showNextPickupTitle("이번에 선택하실 카드",counselingGuideMentArray[3]);
	}

	this.finishShowGuideStep = function(step){
		switch(step){
			case '1-1' :
				
				setTimeout(function(){ 
					shuffle.showGuide('1-2');
					setTimeout(function(){ chat.showMsg("그 결정으로 행복해질 수도 있지만","MASTER","append");  },500); 
				},1500);
			break;
			case '1-2' :
				setTimeout(function(){ 
					shuffle.showGuide('1-3');
					setTimeout(function(){ chat.showMsg("불행해지기도 합니다.","MASTER","append");
						setTimeout(function(){ counselingStep = "startGuide2"; chat.showBtn('next');  },500);
					},300); 
				},1500);
			break;
			case '2-1' :
				setTimeout(function(){ chat.showMsg("타로카드는,","MASTER");
					setTimeout(function(){
						shuffle.showGuide('2-2');
						chat.showMsg("자신 스스로를 속이고 있는지","MASTER","append");
					},1000);
				},1000);
			break;
			case '2-2' :
				setTimeout(function(){
					shuffle.showGuide('2-3');
					setTimeout(function(){ 	chat.showMsg("아니면 최선을 다 하고 있는지","MASTER","append");  },500);
				},1200);
			break;
			case '2-3' :
				setTimeout(function(){
					shuffle.showGuide('2-4');
					chat.showMsg("자신 스스로를 심판해볼 수 있는 기회를 줍니다.","MASTER","append");
				},1500);
			break;
			case '2-4' :
				setTimeout(function(){ counselingStep = "startGuide3"; chat.showBtn('next');  },1000);
			break;
			case '3-1' :
				setTimeout(function(){ chat.showMsg("타로카드를 통해 자신의 어려움이나,","MASTER");
					setTimeout(function(){
						shuffle.showGuide('3-2');
						chat.showMsg("슬픔","MASTER","append");
					},1500);
				},300);
			break;
			case '3-2' :
				setTimeout(function(){
					shuffle.showGuide('3-3');
					chat.showMsg("또는, 희망과","MASTER","append");
				},1500);
			break;
			case '3-3' :
				setTimeout(function(){
					shuffle.showGuide('3-4');
					chat.showMsg("강인함을 진단해보세요.","MASTER","append");
				},1500);
			break;
			case '3-4' :
				setTimeout(function(){ counselingStep = "startGuide4"; chat.showBtn('next');  },1000);
			break;
			case '4-1' :
				shuffle.showGuide('4-2');
				chat.showMsg("지금 어렵고 힘들지라도,","MASTER");
			break;
			case '4-2' :
				setTimeout(function(){
					shuffle.showGuide('4-3');
					chat.showMsg("행운은 돌아오게 되어있습니다.","MASTER","append");
				},2000);
			break;
			case '4-3' :
				setTimeout(function(){ counselingStep = "startGuide5"; chat.showBtn('next');  },1000);
			break;
				
		}
		
	}

	///////////////// tarotRecord delegate
	this.completeTellersFee = function(){
		console.log("completeTellersFee");
		switch(shuffle.counselingType)
		{
			case 1 : common.goto("/forum/list/caltic"); break;
			case 2 : common.goto("/forum"); break;
			case 3 : 
			case 4 : common.goto("/forum/list/love"); break;
			case 5 : 
			case 6 : common.goto("/forum/list/jobs"); break;
			case 7 : common.goto("/forum/list/finance"); break;
			case 8 : common.goto("/forum/list/chooseone"); break;
		}
		
	}
}

</script><!-- 채트 뷰 background-color: #eee;	background-image: -webkit-linear-gradient(#fcfcfc, #eee);background-image: linear-gradient(#fcfcfc, #eee);-->
<style>
.chatBtn {
	font-size:15px;font-weight:500;line-height: 20px;color: #333;white-space: nowrap;vertical-align: middle;
	-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;
	padding:0 20px;-webkit-appearance: none;
}
.chatBtnColor1 {
	color: #fff;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);border-color: #419ea9;
	background-color: #44a5b0;background-image: -webkit-linear-gradient(#6ddcdd, #44a5b0);background-image: linear-gradient(#6ddcdd, #44a5b0);
}
.chatBtnColor2 {
	color: #fff;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);border-color: #d1b531;
	background-color: #b0a544;background-image: -webkit-linear-gradient(#ddc96d, #b0a544);background-image: linear-gradient(#ddc96d, #b0a544);
}
</style>

<div id="chatContentDiv" style="position: absolute;z-index:4;display:none;width:95%;min-height:130px;max-width:1000px" class="rounded5px">
	<table width=100% style="opacity:0.9">
		<tr><td width=25 background='/img/img_window_left_top.png'></td><td background='/img/img_window_top.png' height=25></td><td background='/img/img_window_right_top.png' width=25></td></tr>
		<tr><td width=25 background='/img/img_window_left.png'></td><td background='/img/img_window_back.png'>
			<div id="chatText" style="position: relative;margin:0 auto;line-height: 180%;overflow-y:auto;padding:0px;color:#fff;" class="normalTextThin"></div>
			<div style="display:none;cursor:pointer;margin:0 auto;text-align:center" id="chatScrollDownBtnDiv"><img src='/img/new/img_arrow_gray.png' width=15></div>
		</td><td background='/img/img_window_right.png'></td></tr>
		<tr><td width=25 background='/img/img_window_left_bottom.png'></td><td background='/img/img_window_bottom.png' height=25></td><td background='/img/img_window_right_bottom.png' width=25></td></tr>
	</table>
</div>

<div id="nextBtnDiv" style="position: absolute;z-index:97;display:none;cursor:pointer;height:46px;width:56px;background-image:url(/img/btn/img_btn1_small.png);background-size:cover" class="chatBtn" onclick="chat.btnAction('next')">
	<div id="nextBtnArrowDiv" style="position:absolute;display:none;"><img src="/img/img_arrow.png" width=16/></div><!-- ▷ -->
</div>

<table id="yesBtnDiv" style="position: absolute;z-index:97;display:none"  class="pointer" onclick="chat.btnAction('yes')"><tr>
	<td style="background-image:url('/img/btn/img_btn1_left.png');width:12px;height:46px;" class="backgroundCover"></td>
	<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn1_center.png')" class="backgroundContain centerText smallNormalTextBold">네</td>
	<td style="background-image:url('/img/btn/img_btn1_right.png');width:12px;height:46px;" class="backgroundCover"></td>
</tr></table>

<table id="startBtnDiv" style="position: absolute;z-index:97;display:none"  class="pointer" onclick="chat.btnAction('start')"><tr>
	<td style="background-image:url('/img/btn/img_btn1_left.png');width:12px;height:46px;" class="backgroundCover"></td>
	<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn1_center.png')" class="backgroundContain centerText smallNormalTextBold">시작한다</td>
	<td style="background-image:url('/img/btn/img_btn1_right.png');width:12px;height:46px;" class="backgroundCover"></td>
</tr></table>

<table id="retryBtnDiv" style="position: absolute;z-index:97;display:none"  class="pointer" onclick="chat.btnAction('retry')"><tr>
	<td style="background-image:url('/img/btn/img_btn2_left.png');width:12px;height:46px;" class="backgroundCover"></td>
	<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn2_center.png')" class="backgroundContain centerText smallNormalTextBold">다시섞는다</td>
	<td style="background-image:url('/img/btn/img_btn2_right.png');width:12px;height:46px;" class="backgroundCover"></td>
</tr></table>

<table id="useShuffledBtnDiv" style="position: absolute;z-index:97;display:none"  class="pointer" onclick="chat.btnAction('useShuffled')"><tr>
	<td style="background-image:url('/img/btn/img_btn2_left.png');width:12px;height:46px;" class="backgroundCover"></td>
	<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn2_center.png')" class="backgroundContain centerText smallNormalTextBold">그대로 사용한다</td>
	<td style="background-image:url('/img/btn/img_btn2_right.png');width:12px;height:46px;" class="backgroundCover"></td>
</tr></table>

<table id="pickOutBtnDiv" style="position: absolute;z-index:97;display:none"  class="pointer" onclick="chat.btnAction('pickOut')"><tr>
	<td style="background-image:url('/img/btn/img_btn3_left.png');width:12px;height:46px;" class="backgroundCover"></td>
	<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn3_center.png')" class="backgroundContain centerText smallNormalTextBold">직접 선택한다</td>
	<td style="background-image:url('/img/btn/img_btn3_right.png');width:12px;height:46px;" class="backgroundCover"></td>
</tr></table>

<!-- div id="chatContentDiv" style="position: absolute;z-index:4;display:none;width:95%;min-height:130px;background:rgba(0,0,0,0.4);box-shadow: 2px 2px 1px 1px rgba(0,0,0,0.95)" class="rounded5px">
	<div style="position:relative;padding:15px;background:rgba(255,255,255,0.5);color:#444;-webkit-border-top-left-radius: 5px; -moz-border-top-left-radius: 5px; border-top-right-radius: 5px;-webkit-border-top-right-radius: 5px; -moz-border-top-right-radius: 5px; border-top-right-radius: 5px;">
		<div id="chatText" style="position: relative;display: none;margin:0 auto;line-height: 180%;overflow-y:auto;padding:0px;color:#fff;" class="smallNormalText"></div>
		<div style="position:absolute;display:none;cursor:pointer" id="chatScrollDownBtnDiv"><img src='/img/new/img_arrow_gray.png' width=15></div>
	</div>
	<table width=100% height=35><tr>
		<td align=right style="min-height:35px" id="chatBtnContainerDiv">
			<div id="nextBtnDiv" style="z-index:97;display:none;cursor:pointer;height:35px;padding:5px"  class="chatBtn chatBtnColor1" onclick="chat.btnAction('next')">
				<div id="nextBtnArrowDiv" style="position:absolute;display:none;"><img src="/img/img_arrow.png" width=16/></div>
			</div>
			
			<div id="yesBtnDiv" style="position: absolute;z-index:97;display:none;cursor:pointer;height:35px;" class="chatBtn chatBtnColor1" onclick="chat.btnAction('yes')">
				<div style="line-height:35px;text-align:center">네</div>
			</div>
			
			<div id="startBtnDiv" style="position: absolute;z-index:97;display:none;cursor:pointer;height:35px;" class="chatBtn chatBtnColor1" onclick="chat.btnAction('start')">
				<div style="line-height:35px;text-align:center">시작한다</div>
			</div>
			
			<div id="retryBtnDiv" style="position: absolute;z-index:97;display:none;cursor:pointer;height:35px;" class="chatBtn chatBtnColor2" onclick="chat.btnAction('retry')">
				<div style="line-height:35px;text-align:center">다시섞는다</div>
			</div>
			
			<div id="useShuffledBtnDiv" style="position: absolute;z-index:97;display:none;cursor:pointer;height:35px;" class="chatBtn chatBtnColor1" onclick="chat.btnAction('useShuffled')">
				<div style="line-height:35px;text-align:center">그대로 사용한다</div>
			</div>
			
			<div id="pickOutBtnDiv" style="position: absolute;z-index:97;display:none;cursor:pointer;height:35px;" class="chatBtn chatBtnColor2" onclick="chat.btnAction('pickOut')">
				<div style="line-height:35px;text-align:center">직접 선택한다</div>
			</div>
			
			<div id="showQuestionBtn" style="position: absolute;z-index:97;display:none;cursor:pointer;height:35px;" class="chatBtn chatBtnColor2" onclick="chat.btnAction('showQuestion')">
				<div style="line-height:35px;text-align:center">고민 보기</div>
			</div>
		</td>
	</table>
</div-->

<!-- div id="chatBtnBackDiv" style="position:absolute;display:none;z-index:98;background:rgba(0,0,0,0.5)" class="rounded5px"></div-->


<script>
function Chat(windowWidth, windowHeight) {

	
	var nextBtn = $("#nextBtnDiv");
	var yesBtn = $("#yesBtnDiv");
	var startBtn = $("#startBtnDiv");
	var cancelBtn = $("#counselingQuitBtnDiv");
	var retryBtn = $("#retryBtnDiv");
	var useShuffledBtn = $("#useShuffledBtnDiv");
	var pickOutBtn = $("#pickOutBtnDiv");
	var showQuestionBtn = $("#showQuestionBtn");
	var chatBtn1 = chatBtn2 = chatBtn3 = null;
	
	var nextBtnAnimateInterval = "";
	var delegate = null;

	//public
	this.width = 0;
	this.height = 0;
	this.top = 0;
	this.left = 0;
	this.delegate = null;

	$("#chatScrollDownBtnDiv").click(function(){
		$('#chatText').scrollTop($("#chatText").prop('scrollHeight'));
	});

	this.initialize = function(){
		this.resizeLayout(windowWidth, windowHeight);
	}
	this.resizeLayout = function (w, h) {

		//this.top = windowHeight - $("#chatContentDiv").outerHeight() - 10;
		//this.left =(windowWidth -  $("#chatContentDiv").outerWidth()) / 2;
		//this.width = $("#chatContentDiv").outerWidth() - ($("#chatContentDiv").outerWidth() - $("#chatContentDiv").width());
		//this.height = $("#chatContentDiv").outerHeight() - ($("#chatContentDiv").outerHeight() - $("#chatContentDiv").height());
			
		//화면에서 세로는 10픽셀 위에, 가로는 가운데 정렬
				$("#chatContentDiv").css({left : (w -  $("#chatContentDiv").width()) / 2, top : h - 30 - $("#chatContentDiv").height(), maxHeight: h * 0.35 + "px"});
				$("#chatText").css({maxHeight: h * 0.35 - (25+56) + "px"});
		//$("#chatScrollDownBtnDiv").css({left : this.width/2 - $("#chatScrollDownBtnDiv").width()/2, top :  this.height - $("#chatScrollDownBtnDiv").height() - 26 });

		this.setBtnPosition();
	}

	this.setDelegate = function(obj){
		this.delegate = delegate = obj;
	}
	
	this.showBtn = function(btnType1, btnType2, btnType3)
	{
		console.log("showBtn : " + btnType1);
		chatBtn1 = chatBtn2 = chatBtn3 = null;
		
		var leftMargin2 = 0;//,leftMargin3 = 0;
		
		if(btnType1 == "next"){
			chatBtn1 = nextBtn;
		}else if(btnType1 == "yes"){
			chatBtn1 = yesBtn;
		}else if(btnType1 == "start"){
			chatBtn1 = startBtn;
		}else if(btnType1 == "useShuffled"){
			chatBtn1 = useShuffledBtn;
		}
		
		if(btnType2 == "retry"){
			chatBtn2 = retryBtn;
		}
		else if(btnType2 == "pickOut"){
			chatBtn2 = pickOutBtn;
		}
		else if(btnType2 == "showQuestion"){ 
			chatBtn2 = showQuestionBtn;
		}

		chatBtn1.fadeIn(300);
		if(btnType1 == "next")
		{
			//채팅창 오른쪽 위로 배치
			var padding = $("#chatContentDiv").outerWidth() - $("#chatContentDiv").width();
			
			$("#nextBtnArrowDiv").fadeIn(250);

			//먼저 1회 하고, interval로 반복한다.
			var l = 24;
			$("#nextBtnArrowDiv").css({top : 15 , left : l });
			$("#nextBtnArrowDiv").animate({left : ( l + $("#nextBtnArrowDiv").width() * 2) + "px"},1000,function(){$("#nextBtnArrowDiv").css({left:l});});

			nextBtnAnimateInterval = setInterval(function(){
				$("#nextBtnArrowDiv").animate({left : (l + $("#nextBtnArrowDiv").width() * 2) + "px"},1000,function(){$("#nextBtnArrowDiv").css({left:l});}
			);},1000);

		}
				
		if(chatBtn2 != null){
			chatBtn2.fadeIn(300);
		}

		this.setBtnPosition();
	}

	this.setBtnPosition = function(){

		if(chatBtn1 == null) return;
			
		var padding = $("#chatContentDiv").outerWidth() - $("#chatContentDiv").width();
		chatBtn1.css({top : $("#chatContentDiv").position().top - 10 - chatBtn1.height(),
					left : ($("#chatContentDiv").position().left + $("#chatContentDiv").width() - padding) - chatBtn1.outerWidth()});


		if(chatBtn2 != null){
			var leftMargin = chatBtn1.outerWidth() + 10;
			var padding = $("#chatContentDiv").outerWidth() - $("#chatContentDiv").width();
			chatBtn2.css({top : $("#chatContentDiv").position().top - 10 - chatBtn1.height(),
						left : ($("#chatContentDiv").position().left + $("#chatContentDiv").width() - padding) - chatBtn2.outerWidth() - leftMargin});
		}
	}

	var hideBtn = this.hideBtn = function(btnType1, btnType2)//, btnType3)
	{
		console.log("hideBtn : " + btnType1);
		
		clearInterval(nextBtnAnimateInterval);

		if(btnType1 == 'next' || btnType2 == 'next'){
			nextBtn.fadeOut(250);
		}
		if(btnType1 == 'yes'){
			yesBtn.fadeOut(250);
		}
		if(btnType1 == 'start'){
			startBtn.fadeOut(250);
		}
		if(btnType1 == 'useShuffled'){
			useShuffledBtn.fadeOut(250);
		}
		if(btnType2 == 'retry'){
			retryBtn.fadeOut(250);
		}
		if(btnType2 == 'pickOut'){
			pickOutBtn.fadeOut(250);
		}
		if(btnType2 == 'showQuestion'){
			showQuestionBtn.fadeOut(250);
		}
	}

	this.showMsg = function(text,nickname,kind){
		$("#chatScrollDownBtnDiv").fadeOut(100);
		var thumbnail = (nickname == 'MASTER') ? '/img/face/face0.jpg' : '/img/img_member.png';

		if(kind == 'append')
		{
			var maxHeight = $("#chatContentDiv").height()-50;
			//$("#chatUserPhoto").attr('src',thumbnail);
			$("#chatUserNickname").html(nickname);
			//$("#chatText").append('<br/>'+text);
			$("#chatText").append("&nbsp;" + text);

			
			
		}else if(kind == 'chanage'){
			//$("#chatUserPhoto").attr('src',thumbnail);
			$("#chatUserNickname").html(nickname);
			$("#chatText").append(text);
			
		}else{


			$("#chatUserNickname").html(nickname);
			$("#chatText").html('<table style="color:#fff;margin:0 0 10px 0"><tr><td style="width:40px;height:30px"><img src="'+ thumbnail +'" style="width:30px;margin:0 0 -10px 0;padding:0;-webkit-border-radius: 30px;-moz-border-radius:30px;border-radius:30px;" /></td><td style="line-height:30px;height:30px;" class="normalTextBold">' + nickname + '</td></tr></table>' + text);

			
			if($("#chatContentDiv").is(":visible") == false){
				$("#chatContentDiv").fadeIn(300);
				
			}else{
				var fadeOutTime = ($("#chatText").is(":visible")) ? 250 : 0;

				//$("#chatUserPhoto").fadeOut(fadeOutTime);
				$("#chatUserNickname").fadeOut(fadeOutTime);
				$("#chatText").fadeOut(fadeOutTime)
				
				if(text == ""){
					if(nickname != null){
						
					}
					return;
				}

				
				setTimeout(function(){
					//$("#chatUserPhoto").attr('src',thumbnail);
					
					$("#chatUserNickname").fadeIn(250);
					//$("#chatUserPhoto").fadeIn(250);
					$("#chatText").fadeIn(250,function(){
					});
				},fadeOutTime);
					
			}
		}

				$("#chatContentDiv").css({ top : windowHeight - 30 - $("#chatContentDiv").height()});
		
		$('#chatText').scrollTop(0);
		
		setTimeout(function(){
			var scrollHeight = $("#chatText").prop('scrollHeight');
			if($("#chatText").height() < scrollHeight)
	        	$("#chatScrollDownBtnDiv").fadeIn(250);
		},500);
	}

	this.hide = function(){
		console.log("hide chat");
		$("#chatContentDiv").fadeOut(300);
	}

	this.hideToBottomWithAnimation = function(){
		$("#chatContentDiv").animate({top : windowHeight},300,function(){ $("#chatContentDiv").hide();});
	}

	this.btnAction = function(btnName){

		var btn1Name = null;
		var btn2Name = null;
		var btn3Name = null;
		var functionName = "";

		switch(btnName){
			case 'next' : if(nextBtn.css('opacity') < 1) return; btn1Name = btnName; btn2Name = 'cancel'; functionName = "next"; break;
			case 'yes' : if(yesBtn.css('opacity') < 1) return; btn1Name = btnName; btn2Name = 'cancel'; functionName = "yes"; break;
			case 'start' : if(startBtn.css('opacity') < 1) return; btn1Name = btnName; btn2Name = 'retry'; btn3Name = 'cancel'; functionName = "next"; break;
			case 'retry' : if(retryBtn.css('opacity') < 1) return; btn1Name = 'start'; btn2Name = btnName; btn3Name = 'cancel'; functionName = "retry"; break;
			case 'useShuffled' : if(useShuffledBtn.css('opacity') < 1) return; btn1Name = btnName; btn2Name = 'pickOut'; functionName = "useShuffled"; break;
			case 'pickOut' : if(pickOutBtn.css('opacity') < 1) return; btn1Name = 'useShuffled'; btn2Name = btnName; functionName = "pickOut"; break;
			case 'cancel' : if(cancelBtn.css('opacity') < 1) return; functionName = "cancel"; break;
		}
		
		hideBtn(btn1Name, btn2Name, btn3Name);

		if(typeof delegate !== 'undefined' &&  delegate.chatBtnAction[functionName])
			setTimeout(function(){ delegate.chatBtnAction[functionName](); },250);
	}
};
</script><style>
.tarotBackgroundColor0 { 
/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#53346d+0,110026+100 */
background: #53346d; /* Old browsers */
background: -moz-linear-gradient(top, #53346d 0%, #110026 100%); /* FF3.6-15 */
background: -webkit-linear-gradient(top, #53346d 0%,#110026 100%); /* Chrome10-25,Safari5.1-6 */
background: linear-gradient(to bottom, #53346d 0%,#110026 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#53346d', endColorstr='#110026',GradientType=0 ); /* IE6-9 */
 }
.tarotBackgroundColor1 { background: #A8C6F6 }
.tarotBackgroundColor2 { background: #660066; }
.tarotBackgroundColor3 { background: #9dd9cc; }
/* .cardShadow1 { box-shadow: 0px 0px 10px 10px rgba(255,255,255,0.75) } */
/* .cardShadow2 { box-shadow: 0px 0px 10px 10px rgba(0,0,0,0.75) } */
/* .cardShadow1s { box-shadow: 0px 0px 5px 5px rgba(255,255,255,0.75) } */
/* .cardShadow2s { box-shadow: 0px 0px 5px 5px rgba(0,0,0,0.75) } */
.tarotCounselingSelectBtn { background-size:cover;color:#fff;width:270px;height:127px;cursor:pointer;display:table; margin:10px auto; }
.tarotCounselingSelectBtnInnerDiv { text-align:center; vertical-align:middle; width:70%; height:127px; line-height:160%; margin:0 auto; padding:0 30px; }
</style>
<div id="shuffleContainerDiv" style="position: absolute; display: none; width: 100%; overflow:none;" class="tarotBackgroundColor0">

	<div id="shuffledCardsContainerDiv" style="position: absolute; display: none">
		<div style="border:1px solid #fff;display:none;position:absolute;background:rgba(0,0,0,0.1)" id="currentCardGuideDiv"></div>
			<!-- img id="shuffledCard1" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(1)" / -->
		<img id="shuffledCard1" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard2" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(2)" / -->
		<img id="shuffledCard2" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard3" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(3)" / -->
		<img id="shuffledCard3" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard4" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(4)" / -->
		<img id="shuffledCard4" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard5" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(5)" / -->
		<img id="shuffledCard5" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard6" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(6)" / -->
		<img id="shuffledCard6" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard7" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(7)" / -->
		<img id="shuffledCard7" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard8" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(8)" / -->
		<img id="shuffledCard8" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard9" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(9)" / -->
		<img id="shuffledCard9" style="position: absolute; display: none;" />
		<!-- img id="shuffledCard10" style="position: absolute; display: none; cursor: pointer;" onclick="counseling.showCardInfo(10)" / -->
		<img id="shuffledCard10" style="position: absolute; display: none;" />
	</div>

	<div id="tarotCardsContainerDiv" style="position: absolute; overflow-x: auto; overflow-y:hidden; -webkit-overflow-scrolling: touch;">
		<div id="tarotCardsInnerDiv">
			<img id="tarotCard1" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,1)" />
			<img id="tarotCard2" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,2)" />
			<img id="tarotCard3" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,3)" />
			<img id="tarotCard4" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,4)" />
			<img id="tarotCard5" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,5)" />
			<img id="tarotCard6" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,6)" />
			<img id="tarotCard7" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,7)" />
			<img id="tarotCard8" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,8)" />
			<img id="tarotCard9" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,9)" />
			<img id="tarotCard10" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,10)" />
			<img id="tarotCard11" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,11)" />
			<img id="tarotCard12" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,12)" />
			<img id="tarotCard13" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,13)" />
			<img id="tarotCard14" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,14)" />
			<img id="tarotCard15" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,15)" />
			<img id="tarotCard16" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,16)" />
			<img id="tarotCard17" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,17)" />
			<img id="tarotCard18" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,18)" />
			<img id="tarotCard19" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,19)" />
			<img id="tarotCard20" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,20)" />
			<img id="tarotCard21" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,21)" />
			<img id="tarotCard22" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,22)" />
			<img id="tarotCard23" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,23)" />
			<img id="tarotCard24" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,24)" />
			<img id="tarotCard25" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,25)" />
			<img id="tarotCard26" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,26)" />
			<img id="tarotCard27" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,27)" />
			<img id="tarotCard28" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,28)" />
			<img id="tarotCard29" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,29)" />
			<img id="tarotCard30" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,30)" />
			<img id="tarotCard31" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,31)" />
			<img id="tarotCard32" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,32)" />
			<img id="tarotCard33" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,33)" />
			<img id="tarotCard34" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,34)" />
			<img id="tarotCard35" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,35)" />
			<img id="tarotCard36" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,36)" />
			<img id="tarotCard37" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,37)" />
			<img id="tarotCard38" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,38)" />
			<img id="tarotCard39" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,39)" />
			<img id="tarotCard40" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,40)" />
			<img id="tarotCard41" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,41)" />
			<img id="tarotCard42" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,42)" />
			<img id="tarotCard43" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,43)" />
			<img id="tarotCard44" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,44)" />
			<img id="tarotCard45" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,45)" />
			<img id="tarotCard46" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,46)" />
			<img id="tarotCard47" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,47)" />
			<img id="tarotCard48" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,48)" />
			<img id="tarotCard49" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,49)" />
			<img id="tarotCard50" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,50)" />
			<img id="tarotCard51" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,51)" />
			<img id="tarotCard52" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,52)" />
			<img id="tarotCard53" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,53)" />
			<img id="tarotCard54" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,54)" />
			<img id="tarotCard55" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,55)" />
			<img id="tarotCard56" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,56)" />
			<img id="tarotCard57" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,57)" />
			<img id="tarotCard58" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,58)" />
			<img id="tarotCard59" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,59)" />
			<img id="tarotCard60" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,60)" />
			<img id="tarotCard61" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,61)" />
			<img id="tarotCard62" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,62)" />
			<img id="tarotCard63" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,63)" />
			<img id="tarotCard64" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,64)" />
			<img id="tarotCard65" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,65)" />
			<img id="tarotCard66" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,66)" />
			<img id="tarotCard67" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,67)" />
			<img id="tarotCard68" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,68)" />
			<img id="tarotCard69" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,69)" />
			<img id="tarotCard70" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,70)" />
			<img id="tarotCard71" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,71)" />
			<img id="tarotCard72" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,72)" />
			<img id="tarotCard73" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,73)" />
			<img id="tarotCard74" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,74)" />
			<img id="tarotCard75" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,75)" />
			<img id="tarotCard76" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,76)" />
			<img id="tarotCard77" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,77)" />
			<img id="tarotCard78" style="position: absolute; display: none; width: 198px; cursor: pointer;" onclick="shuffle.selectedATarotCard(this,78)" />
		</div>
	</div>
	
	<table id="pickupGuideContainerDiv" style="opacity:0.9;position:absolute;display:none;margin:0 auto;width:90%">
		<tr><td width=25 background='/img/img_window_left_top.png'></td><td background='/img/img_window_top.png' height=25></td><td background='/img/img_window_right_top.png' width=25></td></tr>
		<tr><td width=25 background='/img/img_window_left.png'></td><td background='/img/img_window_back.png'>
			<div id="pickupGuideTitleDiv" style="color:#fff;text-align:center;margin:0 0 5px 0" class="normalText"></div>
			<div id="pickupGuideTextDiv" style="line-height:160%;color:#fff;width:90%;padding:10px;margin:10px auto;" class="smallNormalTextThin centerText"></div>
			<div style="color:#fff" class="smallTextThin centerText">▼ 좌, 우로 스크롤하여 카드를 선택하세요.</div>
		</td><td background='/img/img_window_right.png'></td></tr>
		<tr><td width=25 background='/img/img_window_left_bottom.png'></td><td background='/img/img_window_bottom.png' height=25></td><td background='/img/img_window_right_bottom.png' width=25></td></tr>
	</table>
	
	<img id="dummysL" style="position: absolute; display:none;width: 263px; height: 403px" /> 
	<img id="dummysR" style="position: absolute; display:none;width: 263px; height: 403px" />
	<img id="dummysAction" style="z-index: 2; position: absolute; display:none;width: 263px; height: 403px; display: none" />
	<img id="dummys" style="position: absolute; display:none; width: 263px; height: 403px" />
	
	<div id="questionDiv" style="z-index:3;display:inline;position:absolute;max-width:80%;padding:10px;background:rgba(0,0,0,0.25);overflow:hidden;color:#fff" class="rounded8px"></div>

	<div id="tarotCounselingSelectDiv" style="position: absolute; display: none; color: #787878; overflow-y:auto">
		<div style="position:absolute;width:100%;text-align:center" id="tarotCounselingSelectInnerDiv">
			<table align=center style="opacity:0.9;display:none;margin:0 auto 15px auto;display:none" id="tarotCounselingSelectTitleTable">
				<tr><td width=25 background='/img/img_window_left_top.png'></td><td background='/img/img_window_top.png' height=25></td><td background='/img/img_window_right_top.png' width=25></td></tr>
				<tr><td width=25 background='/img/img_window_left.png'></td><td background='/img/img_window_back.png' style="color:#fff">
					<div id="tarotCounselingSelectTitleDiv" class="normalLargeTextBold">타로점 종류 선택</div>
					<div id="tarotCounselingSelectDescDiv" style="margin:15px 0 0 0" class="normalText">어떤 타로점을 보실지 선택해주세요.</div>
				</td><td background='/img/img_window_right.png'></td></tr>
				<tr><td width=25 background='/img/img_window_left_bottom.png'></td><td background='/img/img_window_bottom.png' height=25></td><td background='/img/img_window_right_bottom.png' width=25></td></tr>
			</table>
			
			<div id="tarotCounselingSelectBtnDiv" style="opacity:0;margin:130px 0 0 0;padding:0 0 190px 0">
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket1.png);" onclick="shuffle.tarotCounselingSelected(this,1,10)">
					<table width=100% ><tr><td valign=center style="padding:0 10px" class="tarotCounselingSelectBtnInnerDiv counseling1Text normalText">
						<div style="margin:0 0 5px 0" class="largeTextBold">캘틱크로스</div>
						어떠한 고민도 점쳐볼 수 있는 타로점					</td></tr></table>
				</div>
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket8.png);" onclick="shuffle.tarotCounselingSelected(this,8,5)">
					<table width=100% ><tr><td valign=center class="tarotCounselingSelectBtnInnerDiv counseling8Text normalText">
					<div style="margin:0 0 5px 0" class="largeTextBold">양자택일</div>
						두 가지 중 한 가지만 선택해야 할 때					</td></tr></table>
				</div>
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket3.png);" onclick="shuffle.tarotCounselingSelected(this,3,7)">
					<table width=100% ><tr><td valign=center class="tarotCounselingSelectBtnInnerDiv counseling3Text normalText">
					<div style="margin:0 0 5px 0" class="largeTextBold">애정운A</div>
						썸, 소개팅, 새로운 인연과의 고민에 대해					</td></tr></table>
				</div>
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket4.png);" onclick="shuffle.tarotCounselingSelected(this,4,7)">
					<table width=100% ><tr><td valign=center class="tarotCounselingSelectBtnInnerDiv counseling4Text normalText">
					<div style="margin:0 0 5px 0" class="largeTextBold">애정운B</div>
						애인, 부부 등 연인과의 애정 문제에 대해					</td></tr></table>
				</div>
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket5.png);" onclick="shuffle.tarotCounselingSelected(this,5,7)">
					<table width=100% ><tr><td valign=center class="tarotCounselingSelectBtnInnerDiv counseling5Text normalText">
					<div style="margin:0 0 5px 0" class="largeTextBold">직업운A</div>
						업무, 직업, 회사, 동료와의 고민에 대해					</td></tr></table>
				</div>
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket6.png);" onclick="shuffle.tarotCounselingSelected(this,6,7)">
					<table width=100% ><tr><td valign=center class="tarotCounselingSelectBtnInnerDiv counseling6Text normalText">
					<div style="margin:0 0 5px 0" class="largeTextBold">직업운B</div>
						취업, 이직, 새로운 업무에 대한 고민					</td></tr></table>
				</div>
				<div class="tarotCounselingSelectBtn" style="background-image:url(/img/new/counseling_type/img_ticket7.png);" onclick="shuffle.tarotCounselingSelected(this,7,7)">
					<table width=100% ><tr><td valign=center class="tarotCounselingSelectBtnInnerDiv counseling7Text normalText">
					<div style="margin:0 0 5px 0" class="largeTextBold">금전운</div>
						금전, 재산과 관련된 고민에 대해					</td></tr></table>
				</div>
			</div>
			<div id="tarotCounselingSelectInputDiv" style="display: none;">
				<div id="tarotQuestionInputGuideDiv" style="font-size: 14px;line-height:160%;width:80%;margin:10px 0;"></div>
				<textarea id="tarotCounselingQuestionTextarea" onkeyup="shuffle.checkQuestionInput(this)" class="backgroundCover smallNormalTextThin" style="background-image:url('/img/img_question_input_back.jpg');height: 150px; color: #000; padding:10px; border:none;  outline: none;-webkit-box-shadow: none;-moz-box-shadow: none;box-shadow: none;width: 80%" placeholder="고민이 일어난 계기에 대해서 상세히 적어주세요. 실명이나 별명, 직급 등은 언급하지 마시기 바랍니다."></textarea>
				<div style="height: 45px;line-height:180%">
					<div>
						<div id="shortQuestionMsgDiv" class="rounded2px" style="display: none; color: #fff;background:rgba(0,0,0,0.5);padding:5px;font-size: 14px; font-weight: bold">고민을 조금 더 길게 입력해주세요.</div>
					</div>
					<div style="margin:5px 0;">
						
						
						<!-- div id="notInputQuestionBtn" class="rounded8px tarotCounselingBtn tarotCounselingBtnColor1 buttonShadow pointer" style='display:inline-block' onclick="shuffle.inputQuestionCompleteBtn(0)">입력 없이 진행</div><br/-->
						
						<table id="reSelectTarotCounselingBtn" style="display:inline-block"  class="pointer" onclick="shuffle.showTarotCounselingSelectView()"><tr>
							<td style="background-image:url('/img/btn/img_btn2_left.png');width:12px;height:46px;" class="backgroundCover"></td>
							<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn2_center.png')" class="backgroundContain centerText smallNormalTextBold">타로점을 다시 선택</td>
							<td style="background-image:url('/img/btn/img_btn2_right.png');width:12px;height:46px;" class="backgroundCover"></td>
						</tr></table>
						
						<table id="questionInputCompleteBtn" style="display:inline-block"  class="pointer" onclick="shuffle.inputQuestionCompleteBtn(1)"><tr>
							<td style="background-image:url('/img/btn/img_btn1_left.png');width:12px;height:46px;" class="backgroundCover"></td>
							<td style="line-height:46px;color:#fff;background-image:url('/img/btn/img_btn1_center.png')" class="backgroundContain centerText smallNormalTextBold">입력 완료</td>
							<td style="background-image:url('/img/btn/img_btn1_right.png');width:12px;height:46px;" class="backgroundCover"></td>
						</tr></table>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div id="tarotDeckSelectDiv" style="position:absolute;display:none;overflow-x:auto">
		<div id="tarotDeck1Div"  style="position:absolute;cursor:pointer" onclick="shuffle.deckSelectAction(1)">
			<img id="tarotDeck1Dummys" src='/img/dummys/img_cards_1_78.png' style="position:absolute"/>
			<img id="tarotDeck1Card" src="/img/dummys/img_deckselect_card1_back.gif" style="position:absolute"/>
			<div style="position:absolute;text-align:center;width:100%" id="tarotDeck1TitleDiv">
				<span class="normalTextBold">Rider Waite</span><br/><span class="smallText">original</span>
			</div>
		</div>
		<div id="tarotDeck2Div" style="position:absolute;cursor:pointer" onclick="shuffle.deckSelectAction(2)">
			<img id="tarotDeck2Dummys" src='/img/dummys/img_cards_2_78.png' style="position:absolute"/>
			<img id="tarotDeck2Card" src="/img/dummys/img_deckselect_card2_back.gif" style="position:absolute"/>
			<div style="position:absolute;text-align:center;width:100%" id="tarotDeck2TitleDiv">
				<span class="normalTextBold">Rider Waite</span><br/><span class="smallText">retouching</span>
			</div>
		</div>
		<div id="tarotDeck3Div" style="position:absolute;cursor:pointer" onclick="shuffle.deckSelectAction(3)">
			<img id="tarotDeck3Dummys" src='/img/dummys/img_cards_3_78.png' style="position:absolute"/>
			<img id="tarotDeck3Card" src="/img/dummys/img_deckselect_card3_back.gif" style="position:absolute"/>
			<div style="position:absolute;text-align:center;width:100%" id="tarotDeck3TitleDiv">
				<span class="normalTextBold">Rider Waite</span><br/><span class="smallText">tarotcafe</span>
			</div>
		</div>
	</div>
	<div id="tarotMenuContainerDiv" style="position: absolute; top: 0; left: 0; display: none; color: #ffffff; padding:10px;z-index:98">
		<div style="position:relative;box-shadow: 2px 2px 1px #888888;margin:5px 0;padding:10px;min-height:100px" class="gradientBackground2 pointer" onclick="common.goto('/tarot/today')">
			<div style="border:1px solid #fff;margin:10px 20px;min-height:80px" class="rounded10px">
				<table style="margin:10px 0px;"><tr>
					<td><img src="/img/face/face24.jpg" width=30 style="margin:0 10px"/></td>
					<td><span style="color:#fff" class="largetTextBold">오늘의 타로점</span>
						<div style="color:#fff;padding:5px 10px 0 0" class="normalTextThin">오늘 조심해야할 것, 명심해야할 것 등 하루 운에 대해</div></td>
				</tr></table>
			</div>
		</div>
		
		<div style="position:relative;box-shadow: 2px 2px 1px #888888;margin:5px 0;padding:10px;min-height:100px;" class="gradientBackground3 pointer" onclick="common.goto('/tarot/counseling')">
			<div style="border:1px solid #fff;margin:10px 20px;min-height:80px" class="rounded10px">
				<table style="margin:10px 0px;"><tr>
					<td><img src="/img/face/face21.jpg" width=30 style="margin:0 10px"/></td>
					<td><span style="color:#fff" class="largetTextBold">다양한 고민에 대한 타로점</span>
						<div style="color:#fff;padding:5px 10px 0 0" class="normalTextThin">캘틱크로스, 사랑, 직업, 금전, 양자택일 등에 대해</div></td>
				</tr></table>
			</div>
		</div>
	</div>
</div>


<script>
function Shuffle(maxHeight) {

	//DELEGATE METHOD 1 : this.delegate.endOfShuffleCard();
	//DELEGATE METHOD 2 : this.delegate.selectedATarotCard(obj,cardNo);
	this.delegate = null; var delegate = null; 
	this.dummysWidth = 0;
	this.dummysHeight = 0;
	var dummys = this.dummys = $("#dummys");
	var pickedCardCnt = 0;
	this.totalCardCnt = 0;
	this.currentCard = 0;
	this.counselingType = 0;
	this.deckNo = 0; var deckNo = 0;
	this.deckPath = ""; var deckPath = "";
	this.shuffledCardsArray = new Array();var shuffledCardsArray = new Array();
	this.selectedCardsList = "";var selectedCardsList = "";
	this.selectedCardsListArray = new Array(); var selectedCardsListArray = new Array();
	this.question = "";
	this.isUseShuffled = false;

	this.initialize = function(deck_no){

		$("#questionDiv").hide();
		
		$("#shuffleContainerDiv").fadeIn(300);
		this.deckNo = deckNo = deck_no;
		this.resizeLayout(windowWidth, windowHeight);

		
		
		//$("#shuffleContainerDiv").addClass("tarotBackgroundColor"+deckNo);
		
		
				$("#tarotCard1").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard2").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard3").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard4").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard5").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard6").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard7").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard8").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard9").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard10").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard11").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard12").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard13").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard14").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard15").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard16").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard17").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard18").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard19").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard20").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard21").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard22").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard23").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard24").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard25").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard26").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard27").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard28").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard29").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard30").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard31").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard32").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard33").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard34").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard35").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard36").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard37").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard38").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard39").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard40").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard41").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard42").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard43").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard44").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard45").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard46").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard47").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard48").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard49").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard50").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard51").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard52").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard53").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard54").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard55").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard56").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard57").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard58").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard59").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard60").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard61").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard62").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard63").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard64").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard65").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard66").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard67").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard68").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard69").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard70").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard71").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard72").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard73").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard74").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard75").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard76").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard77").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		$("#tarotCard78").css({ width : parseInt(this.dummysWidth * 0.752)/2});
		

		if(this.deckNo > 0) this.setUserDeckType();
	}

	this.resizeLayout = function(w,h){
		$("#shuffleContainerDiv").css({top: 0, height : h});
		
		var dummysRatio = $("#dummys").width() / $("#dummys").height();
		this.dummysHeight = parseInt(maxHeight * 0.73);
		this.dummysWidth = parseInt(this.dummysHeight * dummysRatio);
		

		$("#dummys").css({height : this.dummysHeight, width : this.dummysWidth, top : (maxHeight - this.dummysHeight)/2, left : (w - this.dummysWidth)/2});
		$("#dummysL").css({height : this.dummysHeight, width : this.dummysWidth, top : (maxHeight - this.dummysHeight)/2, left : (w - this.dummysWidth)/2});
		$("#dummysR").css({height : this.dummysHeight, width : this.dummysWidth, top : (maxHeight - this.dummysHeight)/2, left : (w - this.dummysWidth)/2});
		$("#dummysAction").css({height : this.dummysHeight, width : this.dummysWidth});

		$("#tarotCounselingSelectDiv").css({height : this.dummysHeight, width : w/2});
		
		
		//더미가 펼쳐지는 것과 관련하여 카드가 선택된 후 놓여질 판을 준비함
		$("#shuffledCardsContainerDiv").show();

		var expandDummysTop = dummysTop = maxHeight;
		var dummysWidth = shuffle.dummysWidth;
		var dummysHeight = shuffle.dummysHeight;

		var dummys = this.dummys;

		var dummysLeft = w/4 - this.dummysWidth/2;
		var tarotCounselingSelectDivLeft = w/2;
		var tarotCounselingSelectDivWidth = w/2;

		dummys.css({left : w/2 - this.dummysWidth/2});
		
		if(w > h){
			if(this.isUseShuffled){
				tarotRecord.setShuffledCardPosition(dummysTop - dummysHeight/2, dummysTop - dummysHeight/2, this.counselingType);
			}else{
				tarotRecord.setShuffledCardPosition(expandDummysTop - dummysHeight/2, expandDummysTop - dummysHeight/2, this.counselingType);
			}

			$("#tarotCounselingSelectDiv").css({background : 'rgba(0,0,0,0)', padding : '0'});

			if($("#tarotCounselingSelectDiv").is(":visible")){
				dummys.css({left : w/4 - this.dummysWidth/2});
			}

			$("#tarotCounselingSelectDiv").css({top : dummys.position().top, left : tarotCounselingSelectDivLeft, width : tarotCounselingSelectDivWidth});
			
		}else{
			if(this.isUseShuffled){
				tarotRecord.setShuffledCardPosition(w, dummysTop - dummysHeight/2, this.counselingType);
			}else{
				tarotRecord.setShuffledCardPosition(w, expandDummysTop - dummysHeight/2, this.counselingType);
			}

			
			
			tarotCounselingSelectDivLeft = 0;
			tarotCounselingSelectDivWidth = w;
			
			$("#tarotCounselingSelectDiv").css({background : 'rgba(0,0,0,0.5)', color : '#fff', textAlign:'center', padding : '40px 0 0 0'});
			//타로점 선택 부분
			$("#tarotCounselingSelectDiv").css({top : 0, left : tarotCounselingSelectDivLeft, width : tarotCounselingSelectDivWidth, height : maxHeight - 40});
//			var selectDivTop = 30;
// 			$("#tarotCounselingSelectInnerDiv").css({top : ((maxHeight - 40) - $("#tarotCounselingSelectInnerDiv").height()) / 2});
// 			if($("#tarotCounselingSelectInnerDiv").height() > maxHeight - 40){
// 				selectDivTop = maxHeight - $("#tarotCounselingSelectDiv").height();
// 				$("#tarotCounselingSelectTitleTable").fadeOut(300);
// 			}
		}
		$("#tarotCounselingSelectInnerDiv").css({top : '50px'});
		$("#pickupGuideContainerDiv").css({top : $("#tarotCardsContainerDiv").position().top - $("#pickupGuideContainerDiv").height() - 10, left : (w - $("#pickupGuideContainerDiv").width() )/2});	

		//점 보는 도중
		if($("#currentCardGuideDiv").is(":visible")){ 
			currentCardObj = $("#shuffledCard"+this.currentCard);
			var currentCardGuideDivLeft = $(currentCardObj).position().left - 15;
			var currentCardGuideDivTop = $(currentCardObj).position().top - 15;
			var delayTime = 300;
			var deg = 0;
			
			if(this.currentCard == 2 && (shuffle.counselingType != 2 && shuffle.counselingType != 8)){
				//cardTransform = "rotate(90deg)";
				deg = 90;
				currentCardGuideDivTop = currentCardGuideDivTop - $("#currentCardGuideDiv").width()/2 + 20;
				currentCardGuideDivLeft = currentCardGuideDivLeft + $("#currentCardGuideDiv").width()/2 - 23;
			}
	
			$("#currentCardGuideDiv").css({left : currentCardGuideDivLeft, top : currentCardGuideDivTop, width: $(currentCardObj).width() + 30, height : $(currentCardObj).height() + 30});


			var largeCardWidth = this.dummysHeight * 0.577;
			var largeCardHeight = this.dummysHeight;

			$("#shuffledCardsContainerDiv").css({top : (maxHeight - $("#shuffledCardsContainerDiv").height()) / 2});
			
			if(w > h)
			{
				$("#shuffledCardsContainerDiv").css({left: (w/2 - $("#shuffledCardsContainerDiv").width()) / 2});
				
				$("#dummysAction").css({height : largeCardHeight, width : largeCardWidth, 
					left : w/2 + (w/2 - largeCardWidth) / 2,
					top : $("#shuffledCardsContainerDiv").position().top + ($("#shuffledCardsContainerDiv").height() - largeCardHeight) / 2});
			}else{

				$("#dummysAction").css({height : largeCardHeight, width : largeCardWidth, 
					left : (w - largeCardWidth) / 2,
					top : $("#shuffledCardsContainerDiv").position().top + ($("#shuffledCardsContainerDiv").height() - largeCardHeight) / 2});
			}

			
		}
	}

	this.setDelegate = function(obj){
		this.delegate = delegate = obj;
	}

////더미보이기
	this.showTarotDummysWithCompleteCallFlag = function(isCompleteCall){
		$("#dummys").fadeIn(700,function(){
			
			if(isCompleteCall == true && typeof delegate !== 'undefined' && delegate.showTarotDummysWithCompleteCallFlagComplete){
				delegate.showTarotDummysWithCompleteCallFlagComplete();
			}
		});
	}

////타로 종류 선택화면 보이기
	this.showTarotCounselingSelectView = function(){

		var dummysLeft = (windowWidth > windowHeight) ? w/4 - this.dummysWidth/2 : w/2 - this.dummysWidth/2;
				 
		dummys.animate({left : dummysLeft},500,function(){
			
			if($("#tarotCounselingSelectDiv").is(":visible") == false){

				//$("#tarotCounselingSelectTitleTable").show();
				$("#tarotCounselingSelectTitleDiv").html("타로점 선택");
				$("#tarotCounselingSelectDescDiv").html("위, 아래로 스크롤하여 타로점을 선택하세요.");
				$("#tarotCounselingSelectDiv").fadeIn(500, function(){
					$("#tarotCounselingSelectBtnDiv").animate({margin:0,opacity:1},500);
					if(typeof delegate !== 'undefined' && delegate.showTarotCounselingSelectViewComplete){
						delegate.showTarotCounselingSelectViewComplete();
					}
				});

				
			}else{
				
				$("#tarotCounselingSelectInputDiv").fadeOut(300,function(){
					
				});

				//$("#tarotCounselingSelectTitleTable").show();
				$("#tarotCounselingSelectTitleDiv").html("타로점 선택");
				$("#tarotCounselingSelectDescDiv").html("위, 아래로 스크롤하여 타로점을 선택하세요.");
				$("#tarotCounselingSelectDescDiv").show();
				$("#tarotCounselingSelectBtnDiv").fadeIn(300);
					$("#tarotCounselingSelectBtnDiv").animate({margin:0,opacity:1},500);
				//세로가 긴 상태인데 4s처럼 세로가 짧으면 title과  desc가 안나오게 해야 어색하지 않다.
				//if($("#tarotCounselingSelectInnerDiv").height() <= maxHeight-40){
					
				//}else{
					
				//}
			}
			
		});
		
	}

	this.hideTarotCounselingSelectView = function(){
		$("#tarotCounselingSelectDiv").fadeOut(500,function(){
			
			dummys.animate({left : windowWidth/2 - dummys.width()/2},500,function(){
				if(typeof delegate !== 'undefined' && delegate.hideTarotCounselingSelectViewComplete){
					delegate.hideTarotCounselingSelectViewComplete();
				}
			});			
		});
	}

/////종류 선택 후 고민입력하기.
	this.tarotCounselingSelected = function(selectedObj,counselingType, cardCnt){
				
		this.counselingType = counselingType;
		this.totalCardCnt = cardCnt;
		var guideDiv = $("#tarotQuestionInputGuideDiv");

		//$("#tarotCounselingSelectTitleTable").fadeOut(300);
		$("#tarotCounselingSelectBtnDiv").fadeOut(300,function(){
			$("#tarotCounselingSelectBtnDiv").css({margin:'130px 0 0 0',opacity:0});
			
			//$("#tarotCounselingSelectTitleDiv").html("고민 입력");
			//$("#tarotCounselingSelectDescDiv").html("");
			//$("#tarotCounselingSelectTitleDiv").hide();
			//$("#tarotCounselingSelectDescDiv").hide();

			$("#tarotCounselingQuestionTextarea").val("");
			$("#tarotCounselingSelectInputDiv").fadeIn(300);
			//$("#tarotCounselingSelectTitleTable").fadeIn(300);
			$("#questionInputCompleteBtn").css({opacity:0.5});
			
			if(typeof delegate !== 'undefined' && delegate.tarotCounselingSelectedComplete )
				delegate.tarotCounselingSelectedComplete();
		});
	}

	this.checkQuestionInput = function(textareaObj){

		if($.trim($(textareaObj).val()).length < 10){
			if($.trim($(textareaObj).val()).length < 1){
				$("#notInputQuestionBtn").animate({opacity:1.0},250);
			}else{
				$("#notInputQuestionBtn").animate({opacity:0.5},250);
			}
			
			$("#questionInputCompleteBtn").animate({opacity:0.5},250);
			$("#reSelectTarotCounselingBtn").animate({opacity:1.0},250);
		}else{ 
			$("#reSelectTarotCounselingBtn").animate({opacity:0.5},250);
			$("#questionInputCompleteBtn").animate({opacity:1.0},250);
		}

		if($.trim($("#tarotCounselingQuestionTextarea").val()).length < 10){
			if($("#shortQuestionMsgDiv").is(":visible") == false){ $("#shortQuestionMsgDiv").fadeIn(300); $("#shortQuestionMsgDiv").css({display:'inline'});}
		}else{
			if($("#shortQuestionMsgDiv").is(":visible")){ $("#shortQuestionMsgDiv").fadeOut(300);}
		}
	}

	this.inputQuestionCompleteBtn = function(isQuestionCheck){
		if(isQuestionCheck == 1){
			if($.trim($("#tarotCounselingQuestionTextarea").val()).length < 10){
				$("#shortQuestionMsgDiv").fadeIn(300);
				return false;
			}
		}

		this.question = $.trim($("#tarotCounselingQuestionTextarea").val());
		if(typeof delegate !== 'undefined' && delegate.inputQuestionComplete)
		{
			return delegate.inputQuestionComplete();
		}
	}

	this.showTarotDecksSelectView = function()
	{
		$("#tarotDeckSelectDiv").fadeIn(300);
		$("#tarotDeckSelectDiv").css({width: windowWidth, height: maxHeight, top : 0, left : 0});

		var deckWidth = this.dummysWidth
		var deckHeight = this.dummysHeight;
		
		if(windowWidth < windowHeight){
			deckWidth = windowWidth / 3 - (10*4);
			deckRatio = $("#dummys").height() / $("#dummys").width();
			deckHeight = parseInt(deckWidth * deckRatio);
		}

		$("#tarotDeck1Div").css({height : deckHeight, width : deckWidth, top : (maxHeight - deckHeight)/2, left : (windowWidth - deckWidth)/2 - deckWidth - 10 });
		$("#tarotDeck2Div").css({height : deckHeight, width : deckWidth, top : (maxHeight - deckHeight)/2, left : (windowWidth - deckWidth)/2});
		$("#tarotDeck3Div").css({height : deckHeight, width : deckWidth, top : (maxHeight - deckHeight)/2, left : (windowWidth - deckWidth)/2 + deckWidth + 10 });

		var cardWidth = parseInt(deckHeight * 0.491);
		var cardLeft = deckWidth - cardWidth + 10;
		
		$("#tarotDeck1Dummys").css({height : deckHeight, width : deckWidth});
		$("#tarotDeck1Card").css({height : deckHeight, width : cardWidth, left : cardLeft});
		$("#tarotDeck1TitleDiv").css({top : deckHeight + 5});

		$("#tarotDeck2Dummys").css({height : deckHeight, width : deckWidth});
		$("#tarotDeck2Card").css({height : deckHeight, width : cardWidth, left : cardLeft});
		$("#tarotDeck2TitleDiv").css({top : deckHeight + 5});

		$("#tarotDeck3Dummys").css({height : deckHeight, width : deckWidth});
		$("#tarotDeck3Card").css({height : deckHeight, width : cardWidth, left : cardLeft});
		$("#tarotDeck3TitleDiv").css({top : deckHeight + 5});

		var cardHeight = $("#tarotDeck1Card").height();
		
		setTimeout(function(){

			var cardSrc = "/img/dummys/img_deckselect_card1.gif";
			
			//카드를 뒤집는 플립 애니메이션
			$("#tarotDeck1Card").stop().animate({width:'0px',height:cardHeight+'px',marginLeft:cardWidth/2+'px',opacity:'0.5'},200,function(){
				$("#tarotDeck1Card").css('z-index',2);
				$("#tarotDeck1Card").attr('src',cardSrc);
				$("#tarotDeck1Card").stop().animate({width:cardWidth+'px',height:cardHeight+'px',marginLeft:'0px',opacity:'1'},{duration:200});
			});
		},500);

		setTimeout(function(){

			var cardSrc = "/img/dummys/img_deckselect_card2.gif";
			
			//카드를 뒤집는 플립 애니메이션
			$("#tarotDeck2Card").stop().animate({width:'0px',height:cardHeight+'px',marginLeft:cardWidth/2+'px',opacity:'0.5'},200,function(){
				$("#tarotDeck2Card").css('z-index',2);
				$("#tarotDeck2Card").attr('src',cardSrc);
				$("#tarotDeck2Card").stop().animate({width:cardWidth+'px',height:cardHeight+'px',marginLeft:'0px',opacity:'1'},{duration:200});
			});
		},600);

		setTimeout(function(){

			var cardSrc = "/img/dummys/img_deckselect_card3.gif";
			
			//카드를 뒤집는 플립 애니메이션
			$("#tarotDeck3Card").stop().animate({width:'0px',height:cardHeight+'px',marginLeft:cardWidth/2+'px',opacity:'0.5'},200,function(){
				$("#tarotDeck3Card").css('z-index',2);
				$("#tarotDeck3Card").attr('src',cardSrc);
				$("#tarotDeck3Card").stop().animate({width:cardWidth+'px',height:cardHeight+'px',marginLeft:'0px',opacity:'1'},{duration:200});
			});
		},800);
	}

	this.hideTarotDecksSelectView = function()
	{
		$("#tarotDeckSelectDiv").fadeOut(300,function(){

			if(typeof delegate !== 'undefined'  && delegate.hideTarotDecksSelectViewComplete){
				delegate.hideTarotDecksSelectViewComplete();
			} 
		});
	}

	this.deckSelectAction = function(deck_no)
	{
		
		
		if(deck_no == 1){
			$("#tarotDeck1Div").css({opacity:1});
			$("#tarotDeck2Div").animate({opacity:0.5});
			$("#tarotDeck3Div").animate({opacity:0.5});
		}else if(deck_no == 2){
			$("#tarotDeck1Div").animate({opacity:0.5});
			$("#tarotDeck2Div").css({opacity:1});
			$("#tarotDeck3Div").animate({opacity:0.5});
		}else{
			$("#tarotDeck3Div").animate({opacity:0.5});
			counselingLayer.showLayerWidthShortMessage("프리미엄 서비스 전용 타로카드입니다.","안내");
			return;
			$("#tarotDeck1Div").animate({opacity:0.5});
			$("#tarotDeck2Div").animate({opacity:0.5});
			$("#tarotDeck3Div").css({opacity:1});
		}

		this.deckNo = deckNo = deck_no;
		
		//$("#shuffleContainerDiv").removeClass();
		//$("#shuffleContainerDiv").addClass("tarotBackgroundColor"+deckNo);
		if(typeof delegate !== 'undefined' && delegate.deckSelectActionComplete){
			delegate.deckSelectActionComplete(deckNo);
		}
	}

	this.setUserDeckType = function(){

		if(this.deckNo == 1){
			this.deckPath = deckPath = "rider_waite"; 
		}else if(this.deckNo == 2){
			this.deckPath = deckPath = "retouching";
		}else{
			this.deckPath = deckPath = "tarotcafe";
		}
		
		$("#dummysL").attr('src','/img/dummys/img_cards_' + this.deckNo + '_42.png');
		$("#dummysR").attr('src','/img/dummys/img_cards_' + this.deckNo + '_42.png');
		$("#dummysAction").attr('src','/img/dummys/img_cards_' + this.deckNo + '_11.png');
		$("#dummys").attr('src','/img/dummys/img_cards_' + this.deckNo + '_78.png');

				$("#tarotCard1").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard2").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard3").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard4").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard5").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard6").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard7").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard8").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard9").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard10").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard11").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard12").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard13").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard14").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard15").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard16").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard17").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard18").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard19").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard20").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard21").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard22").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard23").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard24").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard25").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard26").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard27").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard28").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard29").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard30").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard31").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard32").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard33").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard34").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard35").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard36").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard37").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard38").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard39").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard40").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard41").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard42").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard43").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard44").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard45").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard46").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard47").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard48").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard49").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard50").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard51").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard52").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard53").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard54").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard55").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard56").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard57").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard58").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard59").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard60").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard61").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard62").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard63").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard64").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard65").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard66").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard67").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard68").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard69").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard70").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard71").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard72").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard73").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard74").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard75").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard76").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard77").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("#tarotCard78").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
		
				$("shuffledCard1").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard2").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard3").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard4").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard5").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard6").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard7").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard8").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard9").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
				$("shuffledCard10").attr('src','/img/dummys/img_card_s_' + this.deckNo + '_back.jpg');
			}

////////카드 섞기
	this.playShuffleAnimation = function(){
		
		//셔플 애니메이션1 : 왼쪽에서 가운데로 약간, 오른쪽에서 가운데로 약간씩 각각 5회씩 해줌.
		var shuffleAnimation1 = function(cnt){
			
			//가운데는 사라지면서 왼쪽, 오른쪽으로 분리된다.
			if(cnt == 11){

				$("#dummys").fadeOut(100);
				$("#dummysL").show();
				$("#dummysR").show();

				$("#dummysL").css({height : $("#dummys").height(), width : $("#dummys").width(), top : (maxHeight - $("#dummys").height())/2, left : (windowWidth - $("#dummys").width())/2});
				$("#dummysR").css({height : $("#dummys").height(), width : $("#dummys").width(), top : (maxHeight - $("#dummys").height())/2, left : (windowWidth - $("#dummys").width())/2});
				
				
				$("#dummysL").animate({left : (windowWidth - $("#dummys").width())/2 - $("#dummys").width()},500);
				$("#dummysR").animate({left : (windowWidth - $("#dummys").width())/2 + $("#dummys").width()},500,function(){

					$("#questionDiv").fadeIn(300);
					$("#questionDiv").html(shuffle.question);
					$("#questionDiv").css({top : (maxHeight - $("#questionDiv").height())/2, left : (windowWidth - $("#questionDiv").outerWidth(true))/2});
					
					setTimeout(function(){ $("#dummysAction").show(); shuffleAnimation1(cnt-1); },500);
				});
			}else{

				
				if(cnt%2 == 0){//왼쪽 카드
					$("#dummysAction").css({top:$("#dummysL").position().top, left:$("#dummysL").position().left});
				}else{ //오른쪽 카드
					$("#dummysAction").css({top:$("#dummysR").position().top, left:$("#dummysR").position().left});
				}	

				if(cnt > 8){
					$("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_11.png');
				}else if(cnt > 6){
					$("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_22.png');
					$("#dummysL").attr('src','/img/dummys/img_cards_' + deckNo + '_22.png');
					$("#dummysR").attr('src','/img/dummys/img_cards_' + deckNo + '_22.png');
				}else if(cnt > 4){
					$("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_42.png');
					$("#dummysL").attr('src','/img/dummys/img_cards_' + deckNo + '_11.png');
					$("#dummysR").attr('src','/img/dummys/img_cards_' + deckNo + '_11.png');
				}else if(cnt > 2){
					$("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_56.png');
					$("#dummysL").attr('src','/img/dummys/img_cards_' + deckNo + '_1.png');
					$("#dummysR").attr('src','/img/dummys/img_cards_' + deckNo + '_1.png');
					$("#dummysAction").attr('src','/img/dummys/img_cards_' + deckNo + '_1.png');
				}else if(cnt > 0){
					$("#dummysL").hide();
					$("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_62.png');
				}else{
					$("#dummysAction").hide();
					$("#dummysR").hide();
					$("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_78.png');
	
					setTimeout(function(){shuffleAnimation2(6);},100);
				}
				
				$("#dummys").fadeIn(200);				
				$("#dummysAction").animate({top:$("#dummys").position().top, left:$("#dummys").position().left},200,function(){if(cnt > 0) shuffleAnimation1(cnt-1);});
			}
		}//셔플 애니메이션 1 끝.

		//셔플 애니메이션1 : 약간을 덜어내어 오른쪽으로 보내고 그걸 다시 왼쪽으로 올리고...
		var shuffleAnimation2 = function(cnt){

			//첫 동작 더미를 왼쪽으로 좀 밀고 dummysAction을 셋팅해준다.
			if(cnt == 6){
				
				$("#dummysR").hide();
				$("#dummysL").hide();
				
				$("#dummys").animate({left : $("#dummys").position().left - $("#dummys").width()/2},300,
					function(){
						$("#dummysAction").attr('src','/img/dummys/img_cards_' + deckNo + '_11.png');
						$("#dummysAction").css({left : $("#dummys").position().left - ($("#dummys").width() * 0.1), top : $("#dummys").position().top + $("#dummys").height() * 0.1, zIndex:0});
						$("#dummysAction").show();
						shuffleAnimation2(cnt-1); 
					}
				);

			}else{
				//dummys action을 오른쪽으로 보냄
				$("#dummysAction").animate({left : $("#dummys").position().left + $("#dummys").width(), zIndex:2},300,
					function(){
						//다시 왼쪽으로..
						$("#dummysAction").animate({left : $("#dummys").position().left, top : $("#dummys").position().top},300,
							function(){
								if(cnt > 0){

									if(cnt == 1){
										$("#questionDiv").fadeOut(300);
									}
									setTimeout(function(){
										$("#dummysAction").css({left : $("#dummys").position().left - ($("#dummys").width() * 0.1), top : $("#dummys").position().top + $("#dummys").height() * 0.1, zIndex:0}); 
										shuffleAnimation2(cnt-1); 
									},150);
								}else{//셔플 애니메이션2 종료.
									$("#dummysAction").hide();
									$("#dummys").animate({left :(windowWidth - $("#dummys").width())/2},300);

									if(typeof delegate !== 'undefined' && delegate.shuffleCardsAnimationComplete){

										delegate.shuffleCardsAnimationComplete();
									}
								}
							}
						);
					}
				);
				setTimeout(function(){ $("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_62.png'); },100);
				setTimeout(function(){ $("#dummys").attr('src','/img/dummys/img_cards_' + deckNo + '_78.png'); },500);
			}
		}//애니메이션2 끝

		this.shuffleCard();
		shuffleAnimation1(11);
	}

////카드펼치기
	this.showTarotCardsForRestart = function(){

		if(windowWidth > windowHeight){
			tarotRecord.setShuffledCardPosition(maxHeight - shuffle.dummysHeight/2, maxHeight - shuffle.dummysHeight/2, this.counselingType);
		}else{
			tarotRecord.setShuffledCardPosition(windowWidth, maxHeight - shuffle.dummysHeight/2, this.counselingType);
		}

		$("#shuffledCardsContainerDiv").css({top : (maxHeight - $("#shuffledCardsContainerDiv").height()) / 2});
		
		
		for(var pickedCardCnt = 1; pickedCardCnt <= shuffle.totalCardCnt; pickedCardCnt++){
			
			var shuffledCardObj = $("#shuffledCard" + pickedCardCnt);
			$(shuffledCardObj).show();

			var cardSrc = "/img/card_decks/"+this.deckPath+"/"+shuffledCardsArray[pickedCardCnt-1]+".jpg";
			$(shuffledCardObj).attr('src',cardSrc);
		}
	}
	
	this.hideExpandDummys = function(){
		$("#tarotCardsContainerDiv").fadeOut(500);
	}

	this.expandCardOnTable = function(dummysTop, dummysObj, dummysWidth, dummysHeight)
	{
		$("#dummysR").hide();
		$("#dummysL").hide();
		shuffle.isUseShuffled = true;
		
		//더미가 펼쳐지는 것과 관련하여 카드가 선택된 후 놓여질 판을 준비함
		$("#shuffledCardsContainerDiv").show();

		if(windowWidth > windowHeight){
			tarotRecord.setShuffledCardPosition(dummysTop - dummysHeight/2, dummysTop - dummysHeight/2, this.counselingType);
		}else{
			tarotRecord.setShuffledCardPosition(windowWidth, dummysTop - dummysHeight/2, this.counselingType);
		}

		dummysObj.animate({left : windowWidth - dummysObj.width()/2, 
			top : dummysTop - dummysHeight/2, 
			width : dummysWidth/2, height : dummysHeight/2 },500,function(){

				$("#tarotCardsContainerDiv").css({left : windowWidth - dummysObj.width(), top : dummysTop - dummysHeight/2, width : dummysWidth/2, height : dummysHeight/2});
				$("#tarotCardsInnerDiv").css({left : windowWidth - dummysObj.width(), top : dummysTop - dummysHeight/2, width : dummysWidth/2, height : dummysHeight/2});

				//shuffle.showTarotCardPickupInterface();
				setTimeout(function(){ shuffle.autoSelectedCard(0, dummysTop, dummysObj, dummysWidth, dummysHeight); },300);
		});
	}

	this.autoSelectedCard = function(currentAutoSelectedCard, dummysTop, dummysObj, dummysWidth, dummysHeight) {

		if(this.totalCardCnt > currentAutoSelectedCard){
			var cardObj = $("#tarotCard"+(currentAutoSelectedCard+1));
			cardObj.show();
			cardObj.css({left : windowWidth - (dummysObj.width() * 0.7528), top : 0, width : (dummysObj.width() * 0.7528), height : (dummysObj.height() * 0.833)});
			shuffle.selectedATarotCard(cardObj,(currentAutoSelectedCard+1));
		}
	}
	
	this.expandDummys = function(expandDummysTop, dummysObj, dummysWidth, dummysHeight)
	{
		$("#dummysR").hide();
		$("#dummysL").hide();
		shuffle.isUseShuffled = false;

		//더미가 펼쳐지는 것과 관련하여 카드가 선택된 후 놓여질 판을 준비함
		$("#shuffledCardsContainerDiv").show();
		if(windowWidth > windowHeight){
			tarotRecord.setShuffledCardPosition(expandDummysTop - dummysHeight/2, expandDummysTop - dummysHeight/2, this.counselingType);
		}else{
			tarotRecord.setShuffledCardPosition(windowWidth, expandDummysTop - dummysHeight/2, this.counselingType);
		}
		
		//this.setShuffledCardPosition(expandDummysTop);

		//더미를 펼치기 위해 시작점으로 보냄.
		$(dummysObj).animate({left : windowWidth - $(dummysObj).width()/2, 
							top : expandDummysTop - dummysHeight/2, 
							width : dummysWidth/2, height : dummysHeight/2 },500,function(){

			//20장을 펼치는 애니메이션
			var limit = 14;

			//타로카드 틀을 더미의 top에 맞춰준다.
			var left = ((windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*77) + $(dummysObj).width()) - $("#tarotCard78").width();
			$("#tarotCardsInnerDiv").css({left : left, width: left * -1 + windowWidth, height : $("#tarotCard78").height(), top:0});
			$("#tarotCardsContainerDiv").css({top : $(dummysObj).position().top, left : 0, windowWidth : windowWidth, width : '100%', height : $("#tarotCardsInnerDiv").height()});
			$("#tarotCardsContainerDiv").scrollLeft(left * -1 + 1);
			
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*16;
			$("#tarotCard17").show(); 
	    	$("#tarotCard17").css({left : (left + $(dummysObj).width()) - $("#tarotCard17").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*17;
			$("#tarotCard18").show(); 
	    	$("#tarotCard18").css({left : (left + $(dummysObj).width()) - $("#tarotCard18").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*18;
			$("#tarotCard19").show(); 
	    	$("#tarotCard19").css({left : (left + $(dummysObj).width()) - $("#tarotCard19").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*19;
			$("#tarotCard20").show(); 
	    	$("#tarotCard20").css({left : (left + $(dummysObj).width()) - $("#tarotCard20").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*20;
			$("#tarotCard21").show(); 
	    	$("#tarotCard21").css({left : (left + $(dummysObj).width()) - $("#tarotCard21").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*21;
			$("#tarotCard22").show(); 
	    	$("#tarotCard22").css({left : (left + $(dummysObj).width()) - $("#tarotCard22").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*22;
			$("#tarotCard23").show(); 
	    	$("#tarotCard23").css({left : (left + $(dummysObj).width()) - $("#tarotCard23").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*23;
			$("#tarotCard24").show(); 
	    	$("#tarotCard24").css({left : (left + $(dummysObj).width()) - $("#tarotCard24").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*24;
			$("#tarotCard25").show(); 
	    	$("#tarotCard25").css({left : (left + $(dummysObj).width()) - $("#tarotCard25").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*25;
			$("#tarotCard26").show(); 
	    	$("#tarotCard26").css({left : (left + $(dummysObj).width()) - $("#tarotCard26").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*26;
			$("#tarotCard27").show(); 
	    	$("#tarotCard27").css({left : (left + $(dummysObj).width()) - $("#tarotCard27").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*27;
			$("#tarotCard28").show(); 
	    	$("#tarotCard28").css({left : (left + $(dummysObj).width()) - $("#tarotCard28").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*28;
			$("#tarotCard29").show(); 
	    	$("#tarotCard29").css({left : (left + $(dummysObj).width()) - $("#tarotCard29").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*29;
			$("#tarotCard30").show(); 
	    	$("#tarotCard30").css({left : (left + $(dummysObj).width()) - $("#tarotCard30").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*30;
			$("#tarotCard31").show(); 
	    	$("#tarotCard31").css({left : (left + $(dummysObj).width()) - $("#tarotCard31").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*31;
			$("#tarotCard32").show(); 
	    	$("#tarotCard32").css({left : (left + $(dummysObj).width()) - $("#tarotCard32").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*32;
			$("#tarotCard33").show(); 
	    	$("#tarotCard33").css({left : (left + $(dummysObj).width()) - $("#tarotCard33").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*33;
			$("#tarotCard34").show(); 
	    	$("#tarotCard34").css({left : (left + $(dummysObj).width()) - $("#tarotCard34").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*34;
			$("#tarotCard35").show(); 
	    	$("#tarotCard35").css({left : (left + $(dummysObj).width()) - $("#tarotCard35").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*35;
			$("#tarotCard36").show(); 
	    	$("#tarotCard36").css({left : (left + $(dummysObj).width()) - $("#tarotCard36").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*36;
			$("#tarotCard37").show(); 
	    	$("#tarotCard37").css({left : (left + $(dummysObj).width()) - $("#tarotCard37").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*37;
			$("#tarotCard38").show(); 
	    	$("#tarotCard38").css({left : (left + $(dummysObj).width()) - $("#tarotCard38").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*38;
			$("#tarotCard39").show(); 
	    	$("#tarotCard39").css({left : (left + $(dummysObj).width()) - $("#tarotCard39").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*39;
			$("#tarotCard40").show(); 
	    	$("#tarotCard40").css({left : (left + $(dummysObj).width()) - $("#tarotCard40").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*40;
			$("#tarotCard41").show(); 
	    	$("#tarotCard41").css({left : (left + $(dummysObj).width()) - $("#tarotCard41").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*41;
			$("#tarotCard42").show(); 
	    	$("#tarotCard42").css({left : (left + $(dummysObj).width()) - $("#tarotCard42").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*42;
			$("#tarotCard43").show(); 
	    	$("#tarotCard43").css({left : (left + $(dummysObj).width()) - $("#tarotCard43").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*43;
			$("#tarotCard44").show(); 
	    	$("#tarotCard44").css({left : (left + $(dummysObj).width()) - $("#tarotCard44").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*44;
			$("#tarotCard45").show(); 
	    	$("#tarotCard45").css({left : (left + $(dummysObj).width()) - $("#tarotCard45").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*45;
			$("#tarotCard46").show(); 
	    	$("#tarotCard46").css({left : (left + $(dummysObj).width()) - $("#tarotCard46").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*46;
			$("#tarotCard47").show(); 
	    	$("#tarotCard47").css({left : (left + $(dummysObj).width()) - $("#tarotCard47").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*47;
			$("#tarotCard48").show(); 
	    	$("#tarotCard48").css({left : (left + $(dummysObj).width()) - $("#tarotCard48").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*48;
			$("#tarotCard49").show(); 
	    	$("#tarotCard49").css({left : (left + $(dummysObj).width()) - $("#tarotCard49").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*49;
			$("#tarotCard50").show(); 
	    	$("#tarotCard50").css({left : (left + $(dummysObj).width()) - $("#tarotCard50").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*50;
			$("#tarotCard51").show(); 
	    	$("#tarotCard51").css({left : (left + $(dummysObj).width()) - $("#tarotCard51").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*51;
			$("#tarotCard52").show(); 
	    	$("#tarotCard52").css({left : (left + $(dummysObj).width()) - $("#tarotCard52").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*52;
			$("#tarotCard53").show(); 
	    	$("#tarotCard53").css({left : (left + $(dummysObj).width()) - $("#tarotCard53").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*53;
			$("#tarotCard54").show(); 
	    	$("#tarotCard54").css({left : (left + $(dummysObj).width()) - $("#tarotCard54").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*54;
			$("#tarotCard55").show(); 
	    	$("#tarotCard55").css({left : (left + $(dummysObj).width()) - $("#tarotCard55").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*55;
			$("#tarotCard56").show(); 
	    	$("#tarotCard56").css({left : (left + $(dummysObj).width()) - $("#tarotCard56").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*56;
			$("#tarotCard57").show(); 
	    	$("#tarotCard57").css({left : (left + $(dummysObj).width()) - $("#tarotCard57").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*57;
			$("#tarotCard58").show(); 
	    	$("#tarotCard58").css({left : (left + $(dummysObj).width()) - $("#tarotCard58").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*58;
			$("#tarotCard59").show(); 
	    	$("#tarotCard59").css({left : (left + $(dummysObj).width()) - $("#tarotCard59").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*59;
			$("#tarotCard60").show(); 
	    	$("#tarotCard60").css({left : (left + $(dummysObj).width()) - $("#tarotCard60").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*60;
			$("#tarotCard61").show(); 
	    	$("#tarotCard61").css({left : (left + $(dummysObj).width()) - $("#tarotCard61").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*61;
			$("#tarotCard62").show(); 
	    	$("#tarotCard62").css({left : (left + $(dummysObj).width()) - $("#tarotCard62").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*62;
			$("#tarotCard63").show(); 
	    	$("#tarotCard63").css({left : (left + $(dummysObj).width()) - $("#tarotCard63").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*63;
			$("#tarotCard64").show(); 
	    	$("#tarotCard64").css({left : (left + $(dummysObj).width()) - $("#tarotCard64").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*64;
			$("#tarotCard65").show(); 
	    	$("#tarotCard65").css({left : (left + $(dummysObj).width()) - $("#tarotCard65").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*65;
			$("#tarotCard66").show(); 
	    	$("#tarotCard66").css({left : (left + $(dummysObj).width()) - $("#tarotCard66").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*66;
			$("#tarotCard67").show(); 
	    	$("#tarotCard67").css({left : (left + $(dummysObj).width()) - $("#tarotCard67").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*67;
			$("#tarotCard68").show(); 
	    	$("#tarotCard68").css({left : (left + $(dummysObj).width()) - $("#tarotCard68").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*68;
			$("#tarotCard69").show(); 
	    	$("#tarotCard69").css({left : (left + $(dummysObj).width()) - $("#tarotCard69").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*69;
			$("#tarotCard70").show(); 
	    	$("#tarotCard70").css({left : (left + $(dummysObj).width()) - $("#tarotCard70").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*70;
			$("#tarotCard71").show(); 
	    	$("#tarotCard71").css({left : (left + $(dummysObj).width()) - $("#tarotCard71").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*71;
			$("#tarotCard72").show(); 
	    	$("#tarotCard72").css({left : (left + $(dummysObj).width()) - $("#tarotCard72").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*72;
			$("#tarotCard73").show(); 
	    	$("#tarotCard73").css({left : (left + $(dummysObj).width()) - $("#tarotCard73").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*73;
			$("#tarotCard74").show(); 
	    	$("#tarotCard74").css({left : (left + $(dummysObj).width()) - $("#tarotCard74").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*74;
			$("#tarotCard75").show(); 
	    	$("#tarotCard75").css({left : (left + $(dummysObj).width()) - $("#tarotCard75").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*75;
			$("#tarotCard76").show(); 
	    	$("#tarotCard76").css({left : (left + $(dummysObj).width()) - $("#tarotCard76").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*76;
			$("#tarotCard77").show(); 
	    	$("#tarotCard77").css({left : (left + $(dummysObj).width()) - $("#tarotCard77").width()});
						var left = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*77;
			$("#tarotCard78").show(); 
	    	$("#tarotCard78").css({left : (left + $(dummysObj).width()) - $("#tarotCard78").width()});
			
			//나머지 카드 펼치기
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*0;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*0; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard1").show(); 
			    	$("#tarotCard1").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard1").width()});

			    					}
			});
			},0);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*1;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*1; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard2").show(); 
			    	$("#tarotCard2").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard2").width()});

			    					}
			});
			},40);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*2;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*2; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard3").show(); 
			    	$("#tarotCard3").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard3").width()});

			    					}
			});
			},80);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*3;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*3; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard4").show(); 
			    	$("#tarotCard4").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard4").width()});

			    					}
			});
			},120);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*4;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*4; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard5").show(); 
			    	$("#tarotCard5").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard5").width()});

			    					}
			});
			},160);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*5;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*5; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard6").show(); 
			    	$("#tarotCard6").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard6").width()});

			    					}
			});
			},200);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*6;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*6; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard7").show(); 
			    	$("#tarotCard7").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard7").width()});

			    					}
			});
			},240);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*7;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*7; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard8").show(); 
			    	$("#tarotCard8").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard8").width()});

			    					}
			});
			},280);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*8;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*8; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard9").show(); 
			    	$("#tarotCard9").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard9").width()});

			    					}
			});
			},320);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*9;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*9; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard10").show(); 
			    	$("#tarotCard10").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard10").width()});

			    					}
			});
			},360);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*10;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*10; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard11").show(); 
			    	$("#tarotCard11").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard11").width()});

			    					}
			});
			},400);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*11;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*11; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard12").show(); 
			    	$("#tarotCard12").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard12").width()});

			    					}
			});
			},440);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*12;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*12; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard13").show(); 
			    	$("#tarotCard13").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard13").width()});

			    					}
			});
			},480);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*13;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*13; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard14").show(); 
			    	$("#tarotCard14").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard14").width()});

			    				    	$(dummysObj).hide();
			    	setTimeout(function(){ 
				    	$('#tarotCardsContainerDiv').animate( { scrollLeft : $("#tarotCardsInnerDiv").width()/2 - windowWidth/2 }, 1000,
					    	function(){
					    		if(typeof delegate !== 'undefined' && delegate.expandDummysComplete){
									delegate.expandDummysComplete();
								}
					    	} ); 
				    },500);
			    					}
			});
			},520);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*14;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*14; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard15").show(); 
			    	$("#tarotCard15").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard15").width()});

			    					}
			});
			},560);
						setTimeout(function(){

			//얼마나 왼쪽으로 이동할지 결정
			var left = windowWidth - $(dummysObj).width() - parseInt(windowWidth / limit)*15;
			var left2 = $("#tarotCardsInnerDiv").width() - $(dummysObj).width() - parseInt(windowWidth / limit)*15; 
			$(dummysObj).animate({left : left}, {duration: 40, specialEasing: {width: "linear"},
			    complete: function() { 
			    	$("#tarotCard16").show(); 
			    	$("#tarotCard16").css({left : (left2 + $(dummysObj).width()) - $("#tarotCard16").width()});

			    					}
			});
			},600);
					});
	}

////펼친 카드에서 선택하는 카드가 뭔지 등을 안내하는 인터페이스 표시하기
	this.showTarotCardPickupInterface = function(){

		$("#pickupGuideContainerDiv").css({top : $("#tarotCardsContainerDiv").position().top - $("#pickupGuideContainerDiv").height() - 10, left : (windowWidth - $("#pickupGuideContainerDiv").width() )/2});
		$("#pickupGuideContainerDiv").fadeIn(300);
	}

/////카드 섞은 정보 가져오기
	this.setShuffledCards = function(cards){
		shuffle.selectedCardsList = selectedCardsList = cards;
		shuffle.selectedCardsListArray = selectedCardsListArray = shuffle.shuffledCardsArray = shuffledCardsArray = cards.split(',');
	}
	this.shuffleCard = function(){
		$.ajax({
			type:"post"
			, url:"/tarot.php"
			, async : false
    	    , timeout : 30000
    	    , cache : false
    	    , dataType : "html"
	    	, data :  "action=shuffleTarotCards"
    	    , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
    	    , error : function(request, status, error) {
        	    alert("에러가 발생했습니다. 잠시 후 다시 시도해주세요. (card shuffle)");
    	    }
    	    , success : function(response, status, request) {
    	    	shuffle.shuffledCardsArray = shuffledCardsArray = response.split(',');
    	    }
		});
	}

///////펼친카드 선택하기
	this.selectedATarotCard = function(cardObj,cardNo){

		if($("#tarotCardsContainerDiv").css('opacity') < 1 && shuffle.isUseShuffled == false)
			return;

		//카드 선택 가이드를 사라지게 해준다.(첫 번째 카드는 xx 입니다)
		$("#pickupGuideContainerDiv").fadeOut(300);
		
		//펼쳐진 카드를 살짝 투명하게 만든다. 투명한 동안은 위의 if문에 의해서 다른 카드를 고를 수 없다.
		$("#tarotCardsContainerDiv").animate({opacity : 0.8},250);
		$("#dummysAction").show();
		$("#dummysAction").attr('src',$(cardObj).attr('src'));
		$("#dummysAction").css({top : $("#tarotCardsContainerDiv").position().top + $("#tarotCardsInnerDiv").position().top + $(cardObj).position().top,
								left : $(cardObj).position().left,
								width : $(cardObj).width(), height : $(cardObj).height()});

		var cardWidth = $(cardObj).width();
		var cardHeight = $(cardObj).height();
		var cardSrc = "/img/card_decks/"+this.deckPath+"/"+shuffledCardsArray[cardNo-1]+".jpg";

		$(cardObj).hide();
		
		//카드를 뒤집는 플립 애니메이션
		$("#dummysAction").css({transform:'rotate(0deg)'});
		$("#dummysAction").stop().animate({width:'0px',height:cardHeight+'px',marginLeft:cardWidth/2+'px',opacity:'0.5'},200,function(){
			$("#dummysAction").css('z-index',2);
			$("#dummysAction").attr('src',cardSrc);
			$("#dummysAction").stop().animate({width:cardWidth+'px',height:cardHeight+'px',marginLeft:'0px',opacity:'1'},{duration:200});
		});

		selectedCardsList += shuffledCardsArray[cardNo-1]+",";
		selectedCardsListArray[selectedCardsListArray.length] = shuffledCardsArray[cardNo-1];
		
		this.selectedCardsList = selectedCardsList;
		this.selectedCardsListArray = selectedCardsListArray; 
		setTimeout(function(){
			//플립애니메이션이 끝나면 지정된 위치로 카드를 보낸다.
			var shuffledCardObj = $("#shuffledCard" + (pickedCardCnt+1));

			$(shuffledCardObj).show();
			$(shuffledCardObj).css({opacity : 0});
			$(shuffledCardObj).attr('src','/img/dummys/img_card_s_' + deckNo + '_back.jpg');

			var cardTop = $("#shuffledCardsContainerDiv").position().top + $(shuffledCardObj).position().top;
			var cardLeft = $("#shuffledCardsContainerDiv").position().left + $(shuffledCardObj).position().left;
			var cardWidth = $(shuffledCardObj).width();
			var cardHeight = $(shuffledCardObj).height();

			$(shuffledCardObj).hide();
			
			// 타로점 배열로 보낸다. 2번 카드면 90도로 꺽어서 보낸다.
			pickedCardCnt++;

			if(pickedCardCnt == 2 && (shuffle.counselingType != 2 && shuffle.counselingType != 8)){
				cardTop = cardTop - cardWidth/2 + 8;
				cardLeft = cardLeft + cardWidth/2 - 8;
			}
				
				
			$("#dummysAction").animate({left : cardLeft, top : cardTop, width : cardWidth, height : cardHeight},300,function(){
				$(shuffledCardObj).attr('src',cardSrc);
				$(shuffledCardObj).css({opacity : 1});

				var delayTime = 0;
				
				if(pickedCardCnt == 2 && (shuffle.counselingType != 2 && shuffle.counselingType != 8)){
					var cardTransform = "rotate(90deg)";
					delayTime = 300;

					$("#dummysAction").animate({  borderSpacing: 90 }, {
					    step: function(now,fx) {
					      	$(this).css({transform:'rotate('+now+'deg)'});
					    },
					    duration:delayTime
					},'linear');
				}

				//모든 처리가 끝나면 
				setTimeout(function(){
					$("#dummysAction").hide();
					$(shuffledCardObj).show();
					
					$("#tarotCardsContainerDiv").animate({opacity : 1},250,function(){
						if(pickedCardCnt == shuffle.totalCardCnt){
							$("#tarotCardsContainerDiv").fadeOut(300,function(){
								$("#shuffledCardsContainerDiv").animate({top : (maxHeight - $("#shuffledCardsContainerDiv").height()) / 2});
							});
						}
					});

					if(typeof delegate !== 'undefined' && delegate.selectedATarotCard){
						delegate.selectedATarotCard(shuffle.totalCardCnt, pickedCardCnt);
					}
				},delayTime + 50);
			});
			 

		},420);
	}

	this.showNextPickupTitle = function(title, text){

		$("#pickupGuideTitleDiv").html(title);
		$("#pickupGuideTextDiv").html(text);
		//$("#pickupGuideTextDiv").html("<span style='font-weight:500'>" + title + "</span><br/>"+ text);
		$("#pickupGuideContainerDiv").fadeIn(300);
		setTimeout(function(){
			$("#pickupGuideContainerDiv").css({top : $("#tarotCardsContainerDiv").position().top - $("#pickupGuideContainerDiv").height() - 15, left : (windowWidth - $("#pickupGuideContainerDiv").width() )/2}); 
		},100);
	}

	


	//점 보기 시작하는 부분에 대한 기능
	this.showCurrentCard = function(point){

		var tempArray = selectedCardsList.split(',');
		var cardSrc = "/img/card_decks/"+this.deckPath+"/"+tempArray[this.currentCard-1]+".jpg";
		
		
		var largeCardWidth = this.dummysHeight * 0.577;
		var largeCardHeight = this.dummysHeight;
		var delayTime = 0;
		
		if(this.currentCard == 1){//첫 번째 카드일 때 약간의 애니메이션 효과가 들어간다.
			$("#dummysAction").attr('src',cardSrc);

			if(windowWidth > windowHeight)
			{
				$("#shuffledCardsContainerDiv").animate({left: (windowWidth/2 - $("#shuffledCardsContainerDiv").width()) / 2},500,function(){
					$("#dummysAction").css({height : largeCardHeight, width : largeCardWidth, 
						left : windowWidth/2 + (windowWidth/2 - largeCardWidth) / 2,
						top : $("#shuffledCardsContainerDiv").position().top + ($("#shuffledCardsContainerDiv").height() - largeCardHeight) / 2});
						$("#currentCardGuideDiv").fadeIn(300);
				});
			}else{

				$("#dummysAction").css({height : largeCardHeight, width : largeCardWidth, 
					left : (windowWidth - largeCardWidth) / 2,
					top : $("#shuffledCardsContainerDiv").position().top + ($("#shuffledCardsContainerDiv").height() - largeCardHeight) / 2});
					$("#currentCardGuideDiv").fadeIn(300);
			}
			
			delayTime = 700;
		}else{
			$("#dummysAction").fadeOut(300,function(){
				$("#dummysAction").attr('src',cardSrc);
			});
			delayTime = 600;
		}

		currentCardObj = $("#shuffledCard"+this.currentCard); 
		$(currentCardObj).css({zIndex:1});

		var currentCardGuideDivLeft = $(currentCardObj).position().left - 15;
		var currentCardGuideDivTop = $(currentCardObj).position().top - 15;
		var delayTime = 300;
		var deg = 0;
		
		if(this.currentCard == 2 && (shuffle.counselingType != 2 && shuffle.counselingType != 8)){
			//cardTransform = "rotate(90deg)";
			deg = 90;
			currentCardGuideDivTop = currentCardGuideDivTop - $("#currentCardGuideDiv").width()/2 + 20;
			currentCardGuideDivLeft = currentCardGuideDivLeft + $("#currentCardGuideDiv").width()/2 - 23;
		}

		if(this.currentCard == 1){
			$("#currentCardGuideDiv").css({left : currentCardGuideDivLeft, top : currentCardGuideDivTop, width: $(currentCardObj).width() + 30, height : $(currentCardObj).height() + 30});
		}
		
		setTimeout(function(){ $("#currentCardGuideDiv").animate({left : currentCardGuideDivLeft, top : currentCardGuideDivTop, width: $(currentCardObj).width() + 30, height : $(currentCardObj).height() + 30},
				function(){
			$("#currentCardGuideDiv").animate({  borderSpacing: deg }, {
			    step: function(now,fx) {
			      	$(this).css({transform:'rotate('+now+'deg)'});
			    },
			    duration:delayTime
			},'linear');

			$("#dummysAction").fadeIn(300);
			//$("#dummysAction").removeClass("cardShadow1");
			//$("#dummysAction").removeClass("cardShadow2");
			
			if(point > 0){
				//$(currentCardObj).addClass("cardShadow1");
				//$("#dummysAction").addClass("cardShadow1");
			}else{
				//$(currentCardObj).addClass("cardShadow2");
				//$("#dummysAction").addClass("cardShadow2");
			}
		});
		},350);
		
// 		setTimeout(function(){ 
// 			$("#dummysAction").fadeIn(300);
// 			$("#dummysAction").removeClass("cardShadow1");
// 			$("#dummysAction").removeClass("cardShadow2");
			
// 			if(point > 0){
// 				$(currentCardObj).addClass("cardShadow1");
// 				$("#dummysAction").addClass("cardShadow1");
// 			}else{
// 				$(currentCardObj).addClass("cardShadow2");
// 				$("#dummysAction").addClass("cardShadow2");
// 			}
// 		}, delayTime);		
	}

	this.hideActionCard = function(){
		$("#currentCardGuideDiv").fadeOut(300);
		$("#dummysAction").fadeOut(300,function(){
			$("#shuffledCardsContainerDiv").animate({left: (windowWidth - $("#shuffledCardsContainerDiv").width()) / 2},500);
		});
	}
	
	this.hideShuffledCards = function(){
		$("#shuffledCardsContainerDiv").fadeOut(300);
	}


/////////가이드 관련
	this.showGuide = function(step){
		var cardWidth = parseInt(this.dummysWidth);
		
		switch(step)
		{
			case '1-1' :
				$("#shuffledCardsContainerDiv").show();
				var cardSrc = "/img/card_decks/"+this.deckPath+"/58.jpg";
				$("#shuffledCard1").attr('src',cardSrc);
				//$("#shuffledCard1").addClass("cardShadow1");
				$("#shuffledCard1").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});
				//var cardWidth = (window parseInt((windowWidth - 15*3)/2);
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				//setTimeout(function(){
					$("#shuffledCard1").css({ width : cardWidth});
					//console.log(maxHeight +" - " + $("#shuffledCard1").height()/2);
					$("#shuffledCard1").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : (windowWidth - cardWidth)/2});
				//},100);
			break;
			case '1-2' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/55.jpg";
				$("#shuffledCard2").attr('src',cardSrc);
				//$("#shuffledCard2").addClass("cardShadow1");
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				
				$("#shuffledCard1").animate({ left : windowWidth/2 - cardWidth - 8},500,function(){
					
					$("#shuffledCard2").fadeIn(300,function(){
						if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
							delegate.finishShowGuideStep(step);
						}
					});
					$("#shuffledCard2").css({ width : cardWidth});
					$("#shuffledCard2").css({top:(maxHeight - $("#shuffledCard1").height())/2, left : windowWidth /2 + 8});
				});
				
			break;
			case '1-3' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/17.jpg";
				$("#shuffledCard3").attr('src',cardSrc);
				$("#shuffledCard3").fadeIn(300);
				//$("#shuffledCard3").addClass("cardShadow2");
				$("#shuffledCard3").css({top:$("#shuffledCard2").position().top, left :$("#shuffledCard2").position().left, width : $("#shuffledCard2").width(), hegith : $("#shuffledCard2").height()});
			break;
			case '2-1' :
				$("#shuffledCard1").fadeOut(300);
				$("#shuffledCard2").fadeOut(300);
				$("#shuffledCard3").fadeOut(300);

				//$("#shuffledCard1").removeClass('cardShadow1');
				//$("#shuffledCard2").removeClass('cardShadow1');
				//$("#shuffledCard3").removeClass('cardShadow2');
				
				if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
					delegate.finishShowGuideStep(step);
				}
			break;
			case '2-2' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/16.jpg";
				$("#shuffledCard1").attr('src',cardSrc);
				//$("#shuffledCard1").addClass('cardShadow2');
				
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				$("#shuffledCard1").css({left : (windowWidth - cardWidth)/2});
				$("#shuffledCard1").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});

				//setTimeout(function(){
					$("#shuffledCard1").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : (windowWidth - cardWidth)/2});
				//},100);
				
			break;
			case '2-3' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/71.jpg";
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				$("#shuffledCard2").attr('src',cardSrc);
				//$("#shuffledCard2").addClass('cardShadow1');
				$("#shuffledCard1").animate({ left : (windowWidth - cardWidth)/2 - 8 - cardWidth},500,function(){
					$("#shuffledCard2").fadeIn(300,function(){
						if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
							delegate.finishShowGuideStep(step);
						}
					});
					$("#shuffledCard2").css({top:(maxHeight - $("#shuffledCard1").height())/2, left : (windowWidth + cardWidth)/2 +  8});
				});
			break;
			case '2-4' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/21.jpg";
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				$("#shuffledCard3").attr('src',cardSrc);
				//$("#shuffledCard3").addClass('cardShadow1');
				//var cardWidth = parseInt(this.dummysWidth);
				$("#shuffledCard3").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});
				//setTimeout(function(){
					$("#shuffledCard3").css({ width : cardWidth});
					$("#shuffledCard3").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : (windowWidth - cardWidth)/2});
				//},100);
			break;
			case '3-1' :
				$("#shuffledCard1").fadeOut(300);
				$("#shuffledCard2").fadeOut(300);
				$("#shuffledCard3").fadeOut(300);

// 				$("#shuffledCard1").removeClass('cardShadow2');
// 				$("#shuffledCard2").removeClass('cardShadow1');
// 				$("#shuffledCard3").removeClass('cardShadow1');

//				$("#shuffledCard1").addClass('cardShadow2');
				
				var cardSrc = "/img/card_decks/"+this.deckPath+"/28.jpg";
				$("#shuffledCard1").attr('src',cardSrc);
				
				setTimeout(function(){
					//var cardWidth = parseInt((windowWidth - 15*3)/2);
					//var cardWidth = parseInt(this.dummysWidth);
					$("#shuffledCard1").fadeIn(300,function(){
						if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
							delegate.finishShowGuideStep(step);
						}
					});

					//setTimeout(function(){
						$("#shuffledCard1").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : 15});
					//},100);
				},1000);
			break;
			case '3-2' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/34.jpg";
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				$("#shuffledCard2").attr('src',cardSrc);
				//$("#shuffledCard2").addClass('cardShadow2');
				$("#shuffledCard2").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});
				var left = ((windowWidth - 15 - cardWidth) - 15) / 3 + 15;
				$("#shuffledCard2").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : left});
			break;
			case '3-3' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/18.jpg";
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				//$("#shuffledCard3").addClass('cardShadow1');
				$("#shuffledCard3").attr('src',cardSrc);
				$("#shuffledCard3").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});
				$("#shuffledCard3").css({ width : cardWidth});
				var left = ((windowWidth - 15 - cardWidth) - 15) / 3 * 2 + 15;
				$("#shuffledCard3").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : left});
			break;
			case '3-4' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/9.jpg";
				cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				$("#shuffledCard4").attr('src',cardSrc);
				//$("#shuffledCard4").addClass('cardShadow1');
				$("#shuffledCard4").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});
				$("#shuffledCard4").css({ width : cardWidth});
				var left = ((windowWidth - 15 - cardWidth) - 15) / 3 * 3 + 15;
				$("#shuffledCard4").css({top:(maxHeight - $("#shuffledCard1").height())/2, left : left});
			break;
			case '4-1' :
				//cardWidth = (cardWidth < parseInt((windowWidth - 15*3)/2)) ? cardWidth : parseInt((windowWidth - 15*3)/2);
				//var cardWidth = parseInt(this.dummysWidth);
				$("#shuffledCard1").fadeOut(300);
				$("#shuffledCard2").fadeOut(300);
				$("#shuffledCard3").fadeOut(300);
				$("#shuffledCard4").fadeOut(300);
				$("#shuffledCard1").animate({left : $("#shuffledCard1").position().left - 50},300);
				$("#shuffledCard2").animate({left : $("#shuffledCard2").position().left - 50},300);
				$("#shuffledCard3").animate({left : $("#shuffledCard3").position().left - 50},300);
				$("#shuffledCard4").animate({left : $("#shuffledCard4").position().left - 50},300, function(){
					setTimeout(function(){
						if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
							delegate.finishShowGuideStep(step);
						}
					},1000);
				});
				//$("#shuffledCard1").removeClass('cardShadow2');
			break;
			case '4-2' :
				var cardSrc = "/img/card_decks/"+this.deckPath+"/-11.jpg";
				//$("#shuffledCard1").addClass('cardShadow2');
				$("#shuffledCard1").attr('src',cardSrc);
				
				var cardWidth = parseInt(this.dummysWidth);
				$("#shuffledCard1").fadeIn(300,function(){
					if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
						delegate.finishShowGuideStep(step);
					}
				});

				//setTimeout(function(){
					$("#shuffledCard1").css({ width : cardWidth});
					$("#shuffledCard1").css({top:(maxHeight - parseInt(cardWidth * 1.7322))/2, left : (windowWidth - cardWidth)/2, opacity: 1});
				//},100);
			break;
			case '4-3' :
				var cardTransform = "rotate(180deg)";
				delayTime = 1000;
// 				$("#shuffledCard1").removeClass('cardShadow2');
// 				$("#shuffledCard1").addClass('cardShadow1');
			    
				$("#shuffledCard1").animate({  borderSpacing: 180 }, {
					step: function(now,fx) {
				      	$(this).css({transform:'rotate('+now+'deg)'});
				      	setTimeout(function(){
					      	if(typeof delegate !== 'undefined' && delegate.finishShowGuideStep){
								delegate.finishShowGuideStep(step);
							}
				      	},1000);
				    },
				    duration:delayTime
				},'linear');
			break;
				
			
		}
	}
	this.showTarotMenu = function(){
		$("#shuffledCard1").fadeOut(300);
		$("#tarotMenuContainerDiv").fadeIn(300);
		setTimeout(function(){
			$("#tarotMenuContainerDiv").css({top:(maxHeight - $("#tarotMenuContainerDiv").height())/2, left : (windowWidth - $("#tarotMenuContainerDiv").width())/2});
		},100);
	}
};
</script></div><style>
.askButton{
background: rgba(98,125,77,1);
background: -moz-linear-gradient(top, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
background: -webkit-gradient(left top, left bottom, color-stop(0%, rgba(98,125,77,1)), color-stop(100%, rgba(31,59,8,1)));
background: -webkit-linear-gradient(top, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
background: -o-linear-gradient(top, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
background: -ms-linear-gradient(top, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
background: linear-gradient(to bottom, rgba(98,125,77,1) 0%, rgba(31,59,8,1) 100%);
filter: "progid:DXImageTransform.Microsoft.gradient( startColorstr='#627d4d', endColorstr='#1f3b08', GradientType=0 )";
}
</style>
<div id="fullSizeLayerDiv" style="position: fixed; top: 0; left: 0; display: none; background-color: rgba(0, 0, 0, 0.85); color: #ffffff; height: 100vh; width: 100%;z-index:100;overflow-y:auto">
	<div id="layerContentsContainerDiv" style="position: absolute;  background-color: rgba(255,255,255,1);margin:0 auto">
		<div style="width:90%;margin:10px auto 0;font-size:16px;font-weight:bold;color:#454545;text-align:center;line-height:20px;height:20px" id="layerContentsTitleDiv"></div>
		<div style="width:90%;margin:0 auto;font-size:14px;font-weight:500;color:#676767;text-align:center" id="layerContentsMessageDiv"></div>
		<div id="layerCancelBtn" style="display: none;width:100%;position: absolute; color:#676767;background:rgba(255,255,255,1);border-top:1px solid #ababab;height: 35px; font-size: 14px; line-height: 35px; text-align: center; cursor: pointer"></div>
		<div id="layerOkBtn" style="display: none;width:100%;position: absolute; color:#ffffff;background:rgba(68,165,176,1);border-top:1px solid #ababab;height: 35px; font-size: 14px; line-height: 35px; text-align: center; cursor: pointer"></div>
	</div>
</div>
<div id="userProfileDiv" style="position:absolute;display:none;color:#fff;box-shadow: 2px 2px 1px #888888;z-index:99">
	<div id="userProfileContainerDiv" style="width:100%"></div>
</div>

<div id="languageContainerDiv" style="background:#fff;border:1px solid #787878;width:100px;position:absolute;display:none;height:90px">
	<div class="pointer" style="height:30px;width:100%;line-height:30px;font-weight:100;font-size:14px;text-align:center" onclick="common.changeLanguage('ko')">한국어</div>
	<div class="pointer" style="height:30px;width:100%;line-height:30px;font-weight:100;font-size:14px;text-align:center" onclick="common.changeLanguage('ja')">日本語</div>
	<div class="pointer" style="height:30px;width:100%;line-height:30px;font-weight:100;font-size:14px;text-align:center" onclick="common.changeLanguage('en')">English</div>
</div>

<!-- -div id="inqueryContainerDiv" style="display:none;position:fixed;z-index:13;border:1px solid #419ea9;font-size:20px;line-height:30px;font-weight:500;width:30px;height:30px;text-align:center;padding:5px;color:#fff" class="rounded5px pointer backgroundColor buttonShadow2">
	?!
</div -->


<script type="text/javascript"><!--
	google_ad_client = "pub-1352082031777619";
	google_ad_width = 160;
	google_ad_height = 600;
	google_ad_format = "160x600_as";
	google_ad_type = "text_image";
	google_ad_channel ="7814561497";
	
	google_color_border = '777777';
	google_color_bg = '444444';
	google_color_link = 'cccccc';
	google_color_text = 'dddddd';
	google_color_url = 'bbbbbb';
	
	//--></script>
	<!-- script type="text/javascript"
	  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
	</script -->
	
	<!-- script src="http://www.tarotcafe.net/adlogger/track/adlogger_tracker.php" type="text/javascript"></script>
	<noscript>Copyright AdLogger, <a href="http://www.adlogger.org/index.php/Main_Page">Click Fraud</a>.</noscript>
	<!-- End AdLogger Tracking Code -->
	<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
	</script>
	<script type="text/javascript">
	var pageTracker = _gat._getTracker("UA-4650784-1");
	pageTracker._trackPageview();
</script>
<script type="text/javascript" src="https://wcs.naver.net/wcslog.js"></script>
<script type="text/javascript">
if(!wcs_add) var wcs_add = {};
wcs_add["wa"] = "fcbdbd72e4687c";
wcs_do();
</script>



<script>

$(function() {
	
});
</script>

</body>
</html>