<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¹”ë”í•œ íƒ€ë¡œì¹´ë“œ í…ŒìŠ¤íŠ¸</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
            min-height: 100vh;
            margin: 0;
            font-family: 'Inter', sans-serif;
        }
        
        .card-3d {
            perspective: 1000px;
            transform-style: preserve-3d;
        }
        
        .card-face {
            backface-visibility: hidden;
            transition: transform 0.6s ease-in-out;
        }
        
        .card-back {
            transform: rotateY(0deg);
        }
        
        .card-front {
            transform: rotateY(180deg);
        }
        
        .card-flipped .card-back {
            transform: rotateY(180deg);
        }
        
        .card-flipped .card-front {
            transform: rotateY(0deg);
        }
        
        .card-hover:hover {
            transform: scale(1.05) rotate(2deg);
        }
        
        .card-selected {
            transform: scale(1.1);
            box-shadow: 0 20px 40px rgba(99, 102, 241, 0.5);
        }
        
        .bg-gradient-primary {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }
        
        .btn-ghost {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-ghost:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-ghost:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .card-container {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
            backdrop-filter: blur(10px);
        }
        
        .rotating {
            animation: rotate 2s linear infinite;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useCallback, useEffect } = React;
        
        // ìƒ˜í”Œ íƒ€ë¡œì¹´ë“œ ë°ì´í„°
        const sampleCards = [
            {
                id: "fool",
                name: "The Fool",
                nameKo: "ë°”ë³´",
                image: "images/cards/major-arcana/00-the-fool.webp",
                suit: "major",
                number: 0,
                keywords: ["ì‹œì‘", "ëª¨í—˜", "ìˆœìˆ˜"]
            },
            {
                id: "magician",
                name: "The Magician",
                nameKo: "ë§ˆë²•ì‚¬",
                image: "images/cards/major-arcana/01-the-magician.webp",
                suit: "major",
                number: 1,
                keywords: ["ì˜ì§€", "ì‹¤í–‰", "ëŠ¥ë ¥"]
            },
            {
                id: "high-priestess",
                name: "The High Priestess",
                nameKo: "ì—¬êµí™©",
                image: "images/cards/major-arcana/02-the-high-priestess.webp",
                suit: "major",
                number: 2,
                keywords: ["ì§ê´€", "ì§€í˜œ", "ì‹ ë¹„"]
            }
        ];
        
        // ì…”í”Œ ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸
        function ShuffleIcon({ className = "w-4 h-4" }) {
            useEffect(() => {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, []);
            
            return React.createElement('i', {
                'data-lucide': 'shuffle',
                className: className
            });
        }
        
        // ê¹”ë”í•œ íƒ€ë¡œì¹´ë“œ ì»´í¬ë„ŒíŠ¸ (í…ìŠ¤íŠ¸ ì—†ìŒ)
        function CleanTarotCard({ card, size = 'lg', isFlipped = false, isSelected = false, onClick, className = '' }) {
            const [flipped, setFlipped] = useState(isFlipped);
            
            const handleClick = () => {
                if (onClick) {
                    onClick();
                } else {
                    setFlipped(!flipped);
                }
            };
            
            const sizeClasses = {
                sm: 'w-15 h-25',
                md: 'w-18 h-30',
                lg: 'w-24 h-40',
                xl: 'w-30 h-50'
            };
            
            return (
                <div 
                    className={`card-3d ${sizeClasses[size]} cursor-pointer transition-all duration-300 card-hover ${isSelected ? 'card-selected' : ''} ${flipped ? 'card-flipped' : ''} ${className}`}
                    onClick={handleClick}
                >
                    {/* ì¹´ë“œ ë’·ë©´ */}
                    <div className="card-face card-back absolute inset-0 rounded-lg">
                        <div className="w-full h-full bg-gradient-primary rounded-lg p-2 flex items-center justify-center">
                            <div className="w-full h-full border-2 border-white border-opacity-30 rounded-lg flex items-center justify-center">
                                <div className="text-white text-opacity-80 text-center">
                                    <div className="w-8 h-8 mx-auto mb-2 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                        <span className="text-lg">ğŸ”®</span>
                                    </div>
                                    <div className="text-xs font-medium opacity-80">TAROT</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* ì¹´ë“œ ì•ë©´ (ì´ë¯¸ì§€ë§Œ) */}
                    <div className="card-face card-front absolute inset-0 rounded-lg">
                        {card ? (
                            <div className="w-full h-full bg-white rounded-lg overflow-hidden shadow-lg p-1">
                                {card.image ? (
                                    <img 
                                        src={card.image} 
                                        alt={card.nameKo}
                                        className="w-full h-full object-contain rounded-lg"
                                    />
                                ) : (
                                    <div className="w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-400 to-blue-500 rounded-lg">
                                        <span className="text-white text-6xl">ğŸƒ</span>
                                    </div>
                                )}
                            </div>
                        ) : (
                            <div className="w-full h-full bg-gray-200 rounded-lg flex items-center justify-center">
                                <span className="text-gray-400 text-4xl">ğŸƒ</span>
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        // ê¹”ë”í•œ ì¹´ë“œë± ì»´í¬ë„ŒíŠ¸
        function CleanCardDeck({ cards, maxVisible = 3, onCardSelect, onShuffle }) {
            const [selectedIndex, setSelectedIndex] = useState(null);
            const [hoveredIndex, setHoveredIndex] = useState(null);
            const [isShuffling, setIsShuffling] = useState(false);
            
            const handleShuffle = () => {
                setIsShuffling(true);
                setTimeout(() => {
                    setIsShuffling(false);
                    if (onShuffle) onShuffle();
                }, 2000);
            };
            
            const handleCardSelect = (index) => {
                setSelectedIndex(index);
                if (onCardSelect && cards[index]) {
                    onCardSelect(cards[index], index);
                }
            };
            
            const visibleCards = cards.slice(0, maxVisible);
            
            return (
                <div className="relative">
                    <div className="relative flex justify-center items-center min-h-[250px]">
                        {isShuffling ? (
                            <div className="text-center">
                                <div className="w-16 h-16 mx-auto mb-4 bg-gradient-primary rounded-full flex items-center justify-center rotating">
                                    <ShuffleIcon className="w-8 h-8 text-white" />
                                </div>
                                <p className="text-white opacity-80">ì¹´ë“œë¥¼ ì„ê³  ìˆìŠµë‹ˆë‹¤...</p>
                            </div>
                        ) : (
                            <div className="relative">
                                {/* ìŠ¤íƒëœ ì¹´ë“œë“¤ */}
                                <div className="relative">
                                    {visibleCards.map((card, index) => {
                                        const isHovered = hoveredIndex === index;
                                        const isSelected = selectedIndex === index;
                                        
                                        return (
                                            <div
                                                key={`${card.id}-${index}`}
                                                className="absolute transition-all duration-300"
                                                style={{
                                                    zIndex: maxVisible - index,
                                                    left: `${index * 3}px`,
                                                    top: `${index * -2}px`,
                                                    transform: `
                                                        translate(${isHovered || isSelected ? '12px' : '0'}, ${isHovered || isSelected ? '-12px' : '0'}) 
                                                        rotate(${isHovered ? '8deg' : index * 1 + 'deg'}) 
                                                        scale(${isSelected ? '1.15' : isHovered ? '1.08' : '1'})
                                                    `
                                                }}
                                                onMouseEnter={() => setHoveredIndex(index)}
                                                onMouseLeave={() => setHoveredIndex(null)}
                                                onClick={() => handleCardSelect(index)}
                                            >
                                                <CleanTarotCard
                                                    card={index === visibleCards.length - 1 ? undefined : card}
                                                    size="lg"
                                                    isFlipped={false}
                                                    isSelected={isSelected}
                                                    className={`${isHovered ? 'shadow-2xl' : 'shadow-lg'}`}
                                                />
                                            </div>
                                        );
                                    })}
                                </div>
                                
                                {/* ë± ì •ë³´ */}
                                <div className="mt-48 text-center">
                                    <p className="text-white opacity-60 text-sm mb-4">
                                        {cards.length}ì¥ì˜ ì¹´ë“œ
                                    </p>
                                    <button
                                        onClick={handleShuffle}
                                        className="btn-ghost mx-auto"
                                        disabled={isShuffling}
                                    >
                                        <ShuffleIcon className="w-4 h-4" />
                                        <span>ì„ê¸°</span>
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }
        
        // ë©”ì¸ í…ŒìŠ¤íŠ¸ ì•±
        function CleanTarotTestApp() {
            const [selectedCard, setSelectedCard] = useState(null);
            const [cards, setCards] = useState(sampleCards);
            
            useEffect(() => {
                // Lucide ì•„ì´ì½˜ ì´ˆê¸°í™”
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, [selectedCard]);
            
            const handleShuffle = () => {
                const shuffled = [...cards].sort(() => Math.random() - 0.5);
                setCards(shuffled);
            };
            
            const handleCardSelect = (card, index) => {
                setSelectedCard(card);
                console.log('Selected card:', card, 'at index:', index);
            };
            
            return (
                <div className="min-h-screen p-6 text-white">
                    <div className="text-center mb-8">
                        <h1 className="text-4xl font-bold text-white mb-4">ğŸ”® ê¹”ë”í•œ íƒ€ë¡œì¹´ë“œ í…ŒìŠ¤íŠ¸</h1>
                        <p className="text-white opacity-70 text-lg">
                            ì¹´ë“œëŠ” ìˆœìˆ˜í•˜ê²Œ ì´ë¯¸ì§€ë§Œ, í…ìŠ¤íŠ¸ëŠ” ê°€ì´ë“œë¡œë§Œ í‘œì‹œ
                        </p>
                    </div>
                    
                    <div className="max-w-4xl mx-auto space-y-12">
                        {/* ê°œë³„ ì¹´ë“œ í…ŒìŠ¤íŠ¸ */}
                        <div className="card-container">
                            <h2 className="text-2xl font-bold text-white mb-6">ê°œë³„ íƒ€ë¡œì¹´ë“œ (ì´ë¯¸ì§€ë§Œ)</h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 justify-items-center">
                                {sampleCards.map((card, index) => (
                                    <div key={card.id} className="text-center">
                                        <CleanTarotCard
                                            card={card}
                                            size="lg"
                                            isFlipped={true}
                                            onClick={() => alert(`${card.nameKo} ì¹´ë“œë¥¼ í´ë¦­í–ˆìŠµë‹ˆë‹¤!`)}
                                        />
                                        {/* ì¹´ë“œ ë°‘ ê°€ì´ë“œ í…ìŠ¤íŠ¸ */}
                                        <div className="mt-3 space-y-1">
                                            <p className="text-white font-medium">{card.nameKo}</p>
                                            <p className="text-white opacity-60 text-sm">{card.keywords.join(', ')}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                        
                        {/* ì¹´ë“œë± í…ŒìŠ¤íŠ¸ */}
                        <div className="card-container">
                            <h2 className="text-2xl font-bold text-white mb-6 text-center">ì¹´ë“œë± ì¸í„°ë™ì…˜</h2>
                            <CleanCardDeck
                                cards={cards}
                                maxVisible={3}
                                onShuffle={handleShuffle}
                                onCardSelect={handleCardSelect}
                            />
                            {selectedCard && (
                                <div className="text-center mt-8 p-4 bg-white bg-opacity-10 rounded-lg">
                                    <h3 className="text-white font-bold text-lg mb-2">ì„ íƒëœ ì¹´ë“œ</h3>
                                    <p className="text-white text-xl">{selectedCard.nameKo}</p>
                                    <p className="text-white opacity-70 mt-2">{selectedCard.keywords.join(', ')}</p>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }
        
        // ì•± ë Œë”ë§
        ReactDOM.render(React.createElement(CleanTarotTestApp), document.getElementById('root'));
    </script>
</body>
</html>